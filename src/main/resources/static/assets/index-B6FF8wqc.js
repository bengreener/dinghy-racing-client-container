var hf=Object.defineProperty;var mf=(d,r,l)=>r in d?hf(d,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):d[r]=l;var vi=(d,r,l)=>mf(d,typeof r!="symbol"?r+"":r,l);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function l(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(c){if(c.ep)return;c.ep=!0;const h=l(c);fetch(c.href,h)}})();function mc(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var ua={exports:{}},er={},ca={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku;function pf(){if(Ku)return Ce;Ku=1;var d=Symbol.for("react.element"),r=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),P=Symbol.iterator;function R(S){return S===null||typeof S!="object"?null:(S=P&&S[P]||S["@@iterator"],typeof S=="function"?S:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,L={};function G(S,b,T){this.props=S,this.context=b,this.refs=L,this.updater=T||O}G.prototype.isReactComponent={},G.prototype.setState=function(S,b){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,b,"setState")},G.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function ae(){}ae.prototype=G.prototype;function $(S,b,T){this.props=S,this.context=b,this.refs=L,this.updater=T||O}var K=$.prototype=new ae;K.constructor=$,I(K,G.prototype),K.isPureReactComponent=!0;var te=Array.isArray,pe=Object.prototype.hasOwnProperty,de={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function A(S,b,T){var M,ue={},fe=null,ke=null;if(b!=null)for(M in b.ref!==void 0&&(ke=b.ref),b.key!==void 0&&(fe=""+b.key),b)pe.call(b,M)&&!q.hasOwnProperty(M)&&(ue[M]=b[M]);var ve=arguments.length-2;if(ve===1)ue.children=T;else if(1<ve){for(var Re=Array(ve),Ke=0;Ke<ve;Ke++)Re[Ke]=arguments[Ke+2];ue.children=Re}if(S&&S.defaultProps)for(M in ve=S.defaultProps,ve)ue[M]===void 0&&(ue[M]=ve[M]);return{$$typeof:d,type:S,key:fe,ref:ke,props:ue,_owner:de.current}}function re(S,b){return{$$typeof:d,type:S.type,key:b,ref:S.ref,props:S.props,_owner:S._owner}}function X(S){return typeof S=="object"&&S!==null&&S.$$typeof===d}function ye(S){var b={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(T){return b[T]})}var xe=/\/+/g;function ne(S,b){return typeof S=="object"&&S!==null&&S.key!=null?ye(""+S.key):b.toString(36)}function H(S,b,T,M,ue){var fe=typeof S;(fe==="undefined"||fe==="boolean")&&(S=null);var ke=!1;if(S===null)ke=!0;else switch(fe){case"string":case"number":ke=!0;break;case"object":switch(S.$$typeof){case d:case r:ke=!0}}if(ke)return ke=S,ue=ue(ke),S=M===""?"."+ne(ke,0):M,te(ue)?(T="",S!=null&&(T=S.replace(xe,"$&/")+"/"),H(ue,b,T,"",function(Ke){return Ke})):ue!=null&&(X(ue)&&(ue=re(ue,T+(!ue.key||ke&&ke.key===ue.key?"":(""+ue.key).replace(xe,"$&/")+"/")+S)),b.push(ue)),1;if(ke=0,M=M===""?".":M+":",te(S))for(var ve=0;ve<S.length;ve++){fe=S[ve];var Re=M+ne(fe,ve);ke+=H(fe,b,T,Re,ue)}else if(Re=R(S),typeof Re=="function")for(S=Re.call(S),ve=0;!(fe=S.next()).done;)fe=fe.value,Re=M+ne(fe,ve++),ke+=H(fe,b,T,Re,ue);else if(fe==="object")throw b=String(S),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return ke}function oe(S,b,T){if(S==null)return S;var M=[],ue=0;return H(S,M,"","",function(fe){return b.call(T,fe,ue++)}),M}function V(S){if(S._status===-1){var b=S._result;b=b(),b.then(function(T){(S._status===0||S._status===-1)&&(S._status=1,S._result=T)},function(T){(S._status===0||S._status===-1)&&(S._status=2,S._result=T)}),S._status===-1&&(S._status=0,S._result=b)}if(S._status===1)return S._result.default;throw S._result}var D={current:null},_={transition:null},Q={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:_,ReactCurrentOwner:de};function W(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:oe,forEach:function(S,b,T){oe(S,function(){b.apply(this,arguments)},T)},count:function(S){var b=0;return oe(S,function(){b++}),b},toArray:function(S){return oe(S,function(b){return b})||[]},only:function(S){if(!X(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Ce.Component=G,Ce.Fragment=l,Ce.Profiler=c,Ce.PureComponent=$,Ce.StrictMode=o,Ce.Suspense=C,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ce.act=W,Ce.cloneElement=function(S,b,T){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var M=I({},S.props),ue=S.key,fe=S.ref,ke=S._owner;if(b!=null){if(b.ref!==void 0&&(fe=b.ref,ke=de.current),b.key!==void 0&&(ue=""+b.key),S.type&&S.type.defaultProps)var ve=S.type.defaultProps;for(Re in b)pe.call(b,Re)&&!q.hasOwnProperty(Re)&&(M[Re]=b[Re]===void 0&&ve!==void 0?ve[Re]:b[Re])}var Re=arguments.length-2;if(Re===1)M.children=T;else if(1<Re){ve=Array(Re);for(var Ke=0;Ke<Re;Ke++)ve[Ke]=arguments[Ke+2];M.children=ve}return{$$typeof:d,type:S.type,key:ue,ref:fe,props:M,_owner:ke}},Ce.createContext=function(S){return S={$$typeof:m,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:h,_context:S},S.Consumer=S},Ce.createElement=A,Ce.createFactory=function(S){var b=A.bind(null,S);return b.type=S,b},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(S){return{$$typeof:w,render:S}},Ce.isValidElement=X,Ce.lazy=function(S){return{$$typeof:j,_payload:{_status:-1,_result:S},_init:V}},Ce.memo=function(S,b){return{$$typeof:N,type:S,compare:b===void 0?null:b}},Ce.startTransition=function(S){var b=_.transition;_.transition={};try{S()}finally{_.transition=b}},Ce.unstable_act=W,Ce.useCallback=function(S,b){return D.current.useCallback(S,b)},Ce.useContext=function(S){return D.current.useContext(S)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(S){return D.current.useDeferredValue(S)},Ce.useEffect=function(S,b){return D.current.useEffect(S,b)},Ce.useId=function(){return D.current.useId()},Ce.useImperativeHandle=function(S,b,T){return D.current.useImperativeHandle(S,b,T)},Ce.useInsertionEffect=function(S,b){return D.current.useInsertionEffect(S,b)},Ce.useLayoutEffect=function(S,b){return D.current.useLayoutEffect(S,b)},Ce.useMemo=function(S,b){return D.current.useMemo(S,b)},Ce.useReducer=function(S,b,T){return D.current.useReducer(S,b,T)},Ce.useRef=function(S){return D.current.useRef(S)},Ce.useState=function(S){return D.current.useState(S)},Ce.useSyncExternalStore=function(S,b,T){return D.current.useSyncExternalStore(S,b,T)},Ce.useTransition=function(){return D.current.useTransition()},Ce.version="18.3.1",Ce}var Xu;function ga(){return Xu||(Xu=1,ca.exports=pf()),ca.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju;function gf(){if(Ju)return er;Ju=1;var d=ga(),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function m(w,C,N){var j,P={},R=null,O=null;N!==void 0&&(R=""+N),C.key!==void 0&&(R=""+C.key),C.ref!==void 0&&(O=C.ref);for(j in C)o.call(C,j)&&!h.hasOwnProperty(j)&&(P[j]=C[j]);if(w&&w.defaultProps)for(j in C=w.defaultProps,C)P[j]===void 0&&(P[j]=C[j]);return{$$typeof:r,type:w,key:R,ref:O,props:P,_owner:c.current}}return er.Fragment=l,er.jsx=m,er.jsxs=m,er}var ec;function yf(){return ec||(ec=1,ua.exports=gf()),ua.exports}var u=yf(),y=ga();const gt=mc(y);var wi={},da={exports:{}},ct={},fa={exports:{}},ha={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc;function vf(){return tc||(tc=1,(function(d){function r(_,Q){var W=_.length;_.push(Q);e:for(;0<W;){var S=W-1>>>1,b=_[S];if(0<c(b,Q))_[S]=Q,_[W]=b,W=S;else break e}}function l(_){return _.length===0?null:_[0]}function o(_){if(_.length===0)return null;var Q=_[0],W=_.pop();if(W!==Q){_[0]=W;e:for(var S=0,b=_.length,T=b>>>1;S<T;){var M=2*(S+1)-1,ue=_[M],fe=M+1,ke=_[fe];if(0>c(ue,W))fe<b&&0>c(ke,ue)?(_[S]=ke,_[fe]=W,S=fe):(_[S]=ue,_[M]=W,S=M);else if(fe<b&&0>c(ke,W))_[S]=ke,_[fe]=W,S=fe;else break e}}return Q}function c(_,Q){var W=_.sortIndex-Q.sortIndex;return W!==0?W:_.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var m=Date,w=m.now();d.unstable_now=function(){return m.now()-w}}var C=[],N=[],j=1,P=null,R=3,O=!1,I=!1,L=!1,G=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(_){for(var Q=l(N);Q!==null;){if(Q.callback===null)o(N);else if(Q.startTime<=_)o(N),Q.sortIndex=Q.expirationTime,r(C,Q);else break;Q=l(N)}}function te(_){if(L=!1,K(_),!I)if(l(C)!==null)I=!0,V(pe);else{var Q=l(N);Q!==null&&D(te,Q.startTime-_)}}function pe(_,Q){I=!1,L&&(L=!1,ae(A),A=-1),O=!0;var W=R;try{for(K(Q),P=l(C);P!==null&&(!(P.expirationTime>Q)||_&&!ye());){var S=P.callback;if(typeof S=="function"){P.callback=null,R=P.priorityLevel;var b=S(P.expirationTime<=Q);Q=d.unstable_now(),typeof b=="function"?P.callback=b:P===l(C)&&o(C),K(Q)}else o(C);P=l(C)}if(P!==null)var T=!0;else{var M=l(N);M!==null&&D(te,M.startTime-Q),T=!1}return T}finally{P=null,R=W,O=!1}}var de=!1,q=null,A=-1,re=5,X=-1;function ye(){return!(d.unstable_now()-X<re)}function xe(){if(q!==null){var _=d.unstable_now();X=_;var Q=!0;try{Q=q(!0,_)}finally{Q?ne():(de=!1,q=null)}}else de=!1}var ne;if(typeof $=="function")ne=function(){$(xe)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,oe=H.port2;H.port1.onmessage=xe,ne=function(){oe.postMessage(null)}}else ne=function(){G(xe,0)};function V(_){q=_,de||(de=!0,ne())}function D(_,Q){A=G(function(){_(d.unstable_now())},Q)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(_){_.callback=null},d.unstable_continueExecution=function(){I||O||(I=!0,V(pe))},d.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<_?Math.floor(1e3/_):5},d.unstable_getCurrentPriorityLevel=function(){return R},d.unstable_getFirstCallbackNode=function(){return l(C)},d.unstable_next=function(_){switch(R){case 1:case 2:case 3:var Q=3;break;default:Q=R}var W=R;R=Q;try{return _()}finally{R=W}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(_,Q){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var W=R;R=_;try{return Q()}finally{R=W}},d.unstable_scheduleCallback=function(_,Q,W){var S=d.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?S+W:S):W=S,_){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=W+b,_={id:j++,callback:Q,priorityLevel:_,startTime:W,expirationTime:b,sortIndex:-1},W>S?(_.sortIndex=W,r(N,_),l(C)===null&&_===l(N)&&(L?(ae(A),A=-1):L=!0,D(te,W-S))):(_.sortIndex=b,r(C,_),I||O||(I=!0,V(pe))),_},d.unstable_shouldYield=ye,d.unstable_wrapCallback=function(_){var Q=R;return function(){var W=R;R=Q;try{return _.apply(this,arguments)}finally{R=W}}}})(ha)),ha}var nc;function wf(){return nc||(nc=1,fa.exports=vf()),fa.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc;function Cf(){if(sc)return ct;sc=1;var d=ga(),r=wf();function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function h(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},P={};function R(e){return C.call(P,e)?!0:C.call(j,e)?!1:N.test(e)?P[e]=!0:(j[e]=!0,!1)}function O(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function I(e,t,n,s){if(t===null||typeof t>"u"||O(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function L(e,t,n,s,i,a,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=f}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){G[e]=new L(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];G[t]=new L(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){G[e]=new L(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){G[e]=new L(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){G[e]=new L(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){G[e]=new L(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){G[e]=new L(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){G[e]=new L(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){G[e]=new L(e,5,!1,e.toLowerCase(),null,!1,!1)});var ae=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ae,$);G[t]=new L(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ae,$);G[t]=new L(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ae,$);G[t]=new L(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){G[e]=new L(e,1,!1,e.toLowerCase(),null,!1,!1)}),G.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){G[e]=new L(e,1,!1,e.toLowerCase(),null,!0,!0)});function K(e,t,n,s){var i=G.hasOwnProperty(t)?G[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(I(t,n,i,s)&&(n=null),s||i===null?R(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var te=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=Symbol.for("react.element"),de=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),ye=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),_=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=_&&e[_]||e["@@iterator"],typeof e=="function"?e:null)}var W=Object.assign,S;function b(e){if(S===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);S=t&&t[1]||""}return`
`+S+e}var T=!1;function M(e,t){if(!e||T)return"";T=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var s=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){s=E}e.call(t.prototype)}else{try{throw Error()}catch(E){s=E}e()}}catch(E){if(E&&s&&typeof E.stack=="string"){for(var i=E.stack.split(`
`),a=s.stack.split(`
`),f=i.length-1,p=a.length-1;1<=f&&0<=p&&i[f]!==a[p];)p--;for(;1<=f&&0<=p;f--,p--)if(i[f]!==a[p]){if(f!==1||p!==1)do if(f--,p--,0>p||i[f]!==a[p]){var g=`
`+i[f].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=f&&0<=p);break}}}finally{T=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?b(e):""}function ue(e){switch(e.tag){case 5:return b(e.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1),e;case 11:return e=M(e.type.render,!1),e;case 1:return e=M(e.type,!0),e;default:return""}}function fe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case de:return"Portal";case re:return"Profiler";case A:return"StrictMode";case ne:return"Suspense";case H:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ye:return(e.displayName||"Context")+".Consumer";case X:return(e._context.displayName||"Context")+".Provider";case xe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}function ke(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Re(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ke(e){var t=Re(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(f){s=""+f,a.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sn(e){e._valueTracker||(e._valueTracker=Ke(e))}function sr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Re(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Yt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kn(e,t){var n=t.checked;return W({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zn(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ve(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hn(e,t){t=t.checked,t!=null&&K(e,"checked",t,!1)}function xn(e,t){Hn(e,t);var n=ve(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nn(e,t.type,n):t.hasOwnProperty("defaultValue")&&Nn(e,t.type,ve(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Nn(e,t,n){(t!=="number"||Yt(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Kt=Array.isArray;function Mt(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Vn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(l(91));return W({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rr(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(l(92));if(Kt(n)){if(1<n.length)throw Error(l(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function ir(e,t){var n=ve(t.value),s=ve(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function zt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ps(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lr(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wn,ar=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wn=Wn||document.createElement("div"),Wn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function En(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ni=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(e){Ni.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jn[t]=jn[e]})});function or(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jn.hasOwnProperty(e)&&jn[e]?(""+t).trim():t+"px"}function ur(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=or(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var Ei=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gs(e,t){if(t){if(Ei[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(l(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(l(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(t.style!=null&&typeof t.style!="object")throw Error(l(62))}}function ys(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z=null;function le(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var we=null,je=null,ce=null;function Me(e){if(e=Ms(e)){if(typeof we!="function")throw Error(l(280));var t=e.stateNode;t&&(t=Or(t),we(e.stateNode,e.type,t))}}function Te(e){je?ce?ce.push(e):ce=[e]:je=e}function be(){if(je){var e=je,t=ce;if(ce=je=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function cr(e,t){return e(t)}function ya(){}var ji=!1;function va(e,t,n){if(ji)return e(t,n);ji=!0;try{return cr(e,t,n)}finally{ji=!1,(je!==null||ce!==null)&&(ya(),be())}}function vs(e,t){var n=e.stateNode;if(n===null)return null;var s=Or(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var Ti=!1;if(w)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{Ti=!1}function vc(e,t,n,s,i,a,f,p,g){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(F){this.onError(F)}}var Cs=!1,dr=null,fr=!1,_i=null,wc={onError:function(e){Cs=!0,dr=e}};function Cc(e,t,n,s,i,a,f,p,g){Cs=!1,dr=null,vc.apply(wc,arguments)}function Sc(e,t,n,s,i,a,f,p,g){if(Cc.apply(this,arguments),Cs){if(Cs){var E=dr;Cs=!1,dr=null}else throw Error(l(198));fr||(fr=!0,_i=E)}}function Tn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wa(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ca(e){if(Tn(e)!==e)throw Error(l(188))}function kc(e){var t=e.alternate;if(!t){if(t=Tn(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ca(i),e;if(a===s)return Ca(i),t;a=a.sibling}throw Error(l(188))}if(n.return!==s.return)n=i,s=a;else{for(var f=!1,p=i.child;p;){if(p===n){f=!0,n=i,s=a;break}if(p===s){f=!0,s=i,n=a;break}p=p.sibling}if(!f){for(p=a.child;p;){if(p===n){f=!0,n=a,s=i;break}if(p===s){f=!0,s=a,n=i;break}p=p.sibling}if(!f)throw Error(l(189))}}if(n.alternate!==s)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function Sa(e){return e=kc(e),e!==null?ka(e):null}function ka(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ka(e);if(t!==null)return t;e=e.sibling}return null}var xa=r.unstable_scheduleCallback,Na=r.unstable_cancelCallback,xc=r.unstable_shouldYield,Nc=r.unstable_requestPaint,ze=r.unstable_now,Ec=r.unstable_getCurrentPriorityLevel,Ri=r.unstable_ImmediatePriority,Ea=r.unstable_UserBlockingPriority,hr=r.unstable_NormalPriority,jc=r.unstable_LowPriority,ja=r.unstable_IdlePriority,mr=null,Dt=null;function Tc(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(mr,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:bc,_c=Math.log,Rc=Math.LN2;function bc(e){return e>>>=0,e===0?32:31-(_c(e)/Rc|0)|0}var pr=64,gr=4194304;function Ss(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yr(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,f=n&268435455;if(f!==0){var p=f&~i;p!==0?s=Ss(p):(a&=f,a!==0&&(s=Ss(a)))}else f=n&~i,f!==0?s=Ss(f):a!==0&&(s=Ss(a));if(s===0)return 0;if(t!==0&&t!==s&&(t&i)===0&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Nt(t),i=1<<n,s|=e[n],t&=~i;return s}function Pc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dc(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var f=31-Nt(a),p=1<<f,g=i[f];g===-1?((p&n)===0||(p&s)!==0)&&(i[f]=Pc(p,t)):g<=t&&(e.expiredLanes|=p),a&=~p}}function bi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ta(){var e=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),e}function Pi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ks(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=n}function Oc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Nt(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function Di(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Nt(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var _e=0;function _a(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ra,Oi,ba,Pa,Da,Li=!1,vr=[],Xt=null,Jt=null,en=null,xs=new Map,Ns=new Map,tn=[],Lc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oa(e,t){switch(e){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Jt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(t.pointerId)}}function Es(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ms(t),t!==null&&Oi(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Uc(e,t,n,s,i){switch(t){case"focusin":return Xt=Es(Xt,e,t,n,s,i),!0;case"dragenter":return Jt=Es(Jt,e,t,n,s,i),!0;case"mouseover":return en=Es(en,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return xs.set(a,Es(xs.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Ns.set(a,Es(Ns.get(a)||null,e,t,n,s,i)),!0}return!1}function La(e){var t=_n(e.target);if(t!==null){var n=Tn(t);if(n!==null){if(t=n.tag,t===13){if(t=wa(n),t!==null){e.blockedOn=t,Da(e.priority,function(){ba(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Z=s,n.target.dispatchEvent(s),Z=null}else return t=Ms(n),t!==null&&Oi(t),e.blockedOn=n,!1;t.shift()}return!0}function Ua(e,t,n){wr(e)&&n.delete(t)}function Fc(){Li=!1,Xt!==null&&wr(Xt)&&(Xt=null),Jt!==null&&wr(Jt)&&(Jt=null),en!==null&&wr(en)&&(en=null),xs.forEach(Ua),Ns.forEach(Ua)}function js(e,t){e.blockedOn===t&&(e.blockedOn=null,Li||(Li=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fc)))}function Ts(e){function t(i){return js(i,e)}if(0<vr.length){js(vr[0],e);for(var n=1;n<vr.length;n++){var s=vr[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Xt!==null&&js(Xt,e),Jt!==null&&js(Jt,e),en!==null&&js(en,e),xs.forEach(t),Ns.forEach(t),n=0;n<tn.length;n++)s=tn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<tn.length&&(n=tn[0],n.blockedOn===null);)La(n),n.blockedOn===null&&tn.shift()}var $n=te.ReactCurrentBatchConfig,Cr=!0;function Ic(e,t,n,s){var i=_e,a=$n.transition;$n.transition=null;try{_e=1,Ui(e,t,n,s)}finally{_e=i,$n.transition=a}}function Ac(e,t,n,s){var i=_e,a=$n.transition;$n.transition=null;try{_e=4,Ui(e,t,n,s)}finally{_e=i,$n.transition=a}}function Ui(e,t,n,s){if(Cr){var i=Fi(e,t,n,s);if(i===null)Ji(e,t,s,Sr,n),Oa(e,s);else if(Uc(i,e,t,n,s))s.stopPropagation();else if(Oa(e,s),t&4&&-1<Lc.indexOf(e)){for(;i!==null;){var a=Ms(i);if(a!==null&&Ra(a),a=Fi(e,t,n,s),a===null&&Ji(e,t,s,Sr,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else Ji(e,t,s,null,n)}}var Sr=null;function Fi(e,t,n,s){if(Sr=null,e=le(s),e=_n(e),e!==null)if(t=Tn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wa(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sr=e,null}function Fa(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ec()){case Ri:return 1;case Ea:return 4;case hr:case jc:return 16;case ja:return 536870912;default:return 16}default:return 16}}var nn=null,Ii=null,kr=null;function Ia(){if(kr)return kr;var e,t=Ii,n=t.length,s,i="value"in nn?nn.value:nn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var f=n-e;for(s=1;s<=f&&t[n-s]===i[a-s];s++);return kr=i.slice(e,1<s?1-s:void 0)}function xr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nr(){return!0}function Aa(){return!1}function ft(e){function t(n,s,i,a,f){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=f,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(a):a[p]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Nr:Aa,this.isPropagationStopped=Aa,this}return W(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),t}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=ft(Qn),_s=W({},Qn,{view:0,detail:0}),Mc=ft(_s),Mi,zi,Rs,Er=W({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(Mi=e.screenX-Rs.screenX,zi=e.screenY-Rs.screenY):zi=Mi=0,Rs=e),Mi)},movementY:function(e){return"movementY"in e?e.movementY:zi}}),Ma=ft(Er),zc=W({},Er,{dataTransfer:0}),Hc=ft(zc),Bc=W({},_s,{relatedTarget:0}),Hi=ft(Bc),Vc=W({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Wc=ft(Vc),$c=W({},Qn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qc=ft($c),Gc=W({},Qn,{data:0}),za=ft(Gc),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yc[e])?!!t[e]:!1}function Bi(){return Kc}var Xc=W({},_s,{key:function(e){if(e.key){var t=qc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bi,charCode:function(e){return e.type==="keypress"?xr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jc=ft(Xc),ed=W({},Er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ha=ft(ed),td=W({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bi}),nd=ft(td),sd=W({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),rd=ft(sd),id=W({},Er,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ld=ft(id),ad=[9,13,27,32],Vi=w&&"CompositionEvent"in window,bs=null;w&&"documentMode"in document&&(bs=document.documentMode);var od=w&&"TextEvent"in window&&!bs,Ba=w&&(!Vi||bs&&8<bs&&11>=bs),Va=" ",Wa=!1;function $a(e,t){switch(e){case"keyup":return ad.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function ud(e,t){switch(e){case"compositionend":return Qa(t);case"keypress":return t.which!==32?null:(Wa=!0,Va);case"textInput":return e=t.data,e===Va&&Wa?null:e;default:return null}}function cd(e,t){if(Gn)return e==="compositionend"||!Vi&&$a(e,t)?(e=Ia(),kr=Ii=nn=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ba&&t.locale!=="ko"?null:t.data;default:return null}}var dd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ga(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dd[e.type]:t==="textarea"}function qa(e,t,n,s){Te(s),t=br(t,"onChange"),0<t.length&&(n=new Ai("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Ps=null,Ds=null;function fd(e){ho(e,0)}function jr(e){var t=Xn(e);if(sr(t))return e}function hd(e,t){if(e==="change")return t}var Za=!1;if(w){var Wi;if(w){var $i="oninput"in document;if(!$i){var Ya=document.createElement("div");Ya.setAttribute("oninput","return;"),$i=typeof Ya.oninput=="function"}Wi=$i}else Wi=!1;Za=Wi&&(!document.documentMode||9<document.documentMode)}function Ka(){Ps&&(Ps.detachEvent("onpropertychange",Xa),Ds=Ps=null)}function Xa(e){if(e.propertyName==="value"&&jr(Ds)){var t=[];qa(t,Ds,e,le(e)),va(fd,t)}}function md(e,t,n){e==="focusin"?(Ka(),Ps=t,Ds=n,Ps.attachEvent("onpropertychange",Xa)):e==="focusout"&&Ka()}function pd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jr(Ds)}function gd(e,t){if(e==="click")return jr(t)}function yd(e,t){if(e==="input"||e==="change")return jr(t)}function vd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:vd;function Os(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!C.call(t,i)||!Et(e[i],t[i]))return!1}return!0}function Ja(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eo(e,t){var n=Ja(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ja(n)}}function to(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?to(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function no(){for(var e=window,t=Yt();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Yt(e.document)}return t}function Qi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wd(e){var t=no(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&to(n.ownerDocument.documentElement,n)){if(s!==null&&Qi(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=eo(n,a);var f=eo(n,s);i&&f&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cd=w&&"documentMode"in document&&11>=document.documentMode,qn=null,Gi=null,Ls=null,qi=!1;function so(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qi||qn==null||qn!==Yt(s)||(s=qn,"selectionStart"in s&&Qi(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ls&&Os(Ls,s)||(Ls=s,s=br(Gi,"onSelect"),0<s.length&&(t=new Ai("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=qn)))}function Tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zn={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionend:Tr("Transition","TransitionEnd")},Zi={},ro={};w&&(ro=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function _r(e){if(Zi[e])return Zi[e];if(!Zn[e])return e;var t=Zn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ro)return Zi[e]=t[n];return e}var io=_r("animationend"),lo=_r("animationiteration"),ao=_r("animationstart"),oo=_r("transitionend"),uo=new Map,co="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(e,t){uo.set(e,t),h(t,[e])}for(var Yi=0;Yi<co.length;Yi++){var Ki=co[Yi],Sd=Ki.toLowerCase(),kd=Ki[0].toUpperCase()+Ki.slice(1);sn(Sd,"on"+kd)}sn(io,"onAnimationEnd"),sn(lo,"onAnimationIteration"),sn(ao,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(oo,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function fo(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Sc(s,t,void 0,e),e.currentTarget=null}function ho(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var f=s.length-1;0<=f;f--){var p=s[f],g=p.instance,E=p.currentTarget;if(p=p.listener,g!==a&&i.isPropagationStopped())break e;fo(i,p,E),a=g}else for(f=0;f<s.length;f++){if(p=s[f],g=p.instance,E=p.currentTarget,p=p.listener,g!==a&&i.isPropagationStopped())break e;fo(i,p,E),a=g}}}if(fr)throw e=_i,fr=!1,_i=null,e}function De(e,t){var n=t[il];n===void 0&&(n=t[il]=new Set);var s=e+"__bubble";n.has(s)||(mo(t,e,2,!1),n.add(s))}function Xi(e,t,n){var s=0;t&&(s|=4),mo(n,e,s,t)}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Fs(e){if(!e[Rr]){e[Rr]=!0,o.forEach(function(n){n!=="selectionchange"&&(xd.has(n)||Xi(n,!1,e),Xi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rr]||(t[Rr]=!0,Xi("selectionchange",!1,t))}}function mo(e,t,n,s){switch(Fa(t)){case 1:var i=Ic;break;case 4:i=Ac;break;default:i=Ui}n=i.bind(null,t,n,e),i=void 0,!Ti||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ji(e,t,n,s,i){var a=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var p=s.stateNode.containerInfo;if(p===i||p.nodeType===8&&p.parentNode===i)break;if(f===4)for(f=s.return;f!==null;){var g=f.tag;if((g===3||g===4)&&(g=f.stateNode.containerInfo,g===i||g.nodeType===8&&g.parentNode===i))return;f=f.return}for(;p!==null;){if(f=_n(p),f===null)return;if(g=f.tag,g===5||g===6){s=a=f;continue e}p=p.parentNode}}s=s.return}va(function(){var E=a,F=le(n),z=[];e:{var U=uo.get(e);if(U!==void 0){var Y=Ai,ee=e;switch(e){case"keypress":if(xr(n)===0)break e;case"keydown":case"keyup":Y=Jc;break;case"focusin":ee="focus",Y=Hi;break;case"focusout":ee="blur",Y=Hi;break;case"beforeblur":case"afterblur":Y=Hi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=nd;break;case io:case lo:case ao:Y=Wc;break;case oo:Y=rd;break;case"scroll":Y=Mc;break;case"wheel":Y=ld;break;case"copy":case"cut":case"paste":Y=Qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Ha}var se=(t&4)!==0,He=!se&&e==="scroll",k=se?U!==null?U+"Capture":null:U;se=[];for(var v=E,x;v!==null;){x=v;var B=x.stateNode;if(x.tag===5&&B!==null&&(x=B,k!==null&&(B=vs(v,k),B!=null&&se.push(Is(v,B,x)))),He)break;v=v.return}0<se.length&&(U=new Y(U,ee,null,n,F),z.push({event:U,listeners:se}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",U&&n!==Z&&(ee=n.relatedTarget||n.fromElement)&&(_n(ee)||ee[Ht]))break e;if((Y||U)&&(U=F.window===F?F:(U=F.ownerDocument)?U.defaultView||U.parentWindow:window,Y?(ee=n.relatedTarget||n.toElement,Y=E,ee=ee?_n(ee):null,ee!==null&&(He=Tn(ee),ee!==He||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(Y=null,ee=E),Y!==ee)){if(se=Ma,B="onMouseLeave",k="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(se=Ha,B="onPointerLeave",k="onPointerEnter",v="pointer"),He=Y==null?U:Xn(Y),x=ee==null?U:Xn(ee),U=new se(B,v+"leave",Y,n,F),U.target=He,U.relatedTarget=x,B=null,_n(F)===E&&(se=new se(k,v+"enter",ee,n,F),se.target=x,se.relatedTarget=He,B=se),He=B,Y&&ee)t:{for(se=Y,k=ee,v=0,x=se;x;x=Yn(x))v++;for(x=0,B=k;B;B=Yn(B))x++;for(;0<v-x;)se=Yn(se),v--;for(;0<x-v;)k=Yn(k),x--;for(;v--;){if(se===k||k!==null&&se===k.alternate)break t;se=Yn(se),k=Yn(k)}se=null}else se=null;Y!==null&&po(z,U,Y,se,!1),ee!==null&&He!==null&&po(z,He,ee,se,!0)}}e:{if(U=E?Xn(E):window,Y=U.nodeName&&U.nodeName.toLowerCase(),Y==="select"||Y==="input"&&U.type==="file")var ie=hd;else if(Ga(U))if(Za)ie=yd;else{ie=pd;var he=md}else(Y=U.nodeName)&&Y.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ie=gd);if(ie&&(ie=ie(e,E))){qa(z,ie,n,F);break e}he&&he(e,U,E),e==="focusout"&&(he=U._wrapperState)&&he.controlled&&U.type==="number"&&Nn(U,"number",U.value)}switch(he=E?Xn(E):window,e){case"focusin":(Ga(he)||he.contentEditable==="true")&&(qn=he,Gi=E,Ls=null);break;case"focusout":Ls=Gi=qn=null;break;case"mousedown":qi=!0;break;case"contextmenu":case"mouseup":case"dragend":qi=!1,so(z,n,F);break;case"selectionchange":if(Cd)break;case"keydown":case"keyup":so(z,n,F)}var me;if(Vi)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Gn?$a(e,n)&&(ge="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ge="onCompositionStart");ge&&(Ba&&n.locale!=="ko"&&(Gn||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Gn&&(me=Ia()):(nn=F,Ii="value"in nn?nn.value:nn.textContent,Gn=!0)),he=br(E,ge),0<he.length&&(ge=new za(ge,e,null,n,F),z.push({event:ge,listeners:he}),me?ge.data=me:(me=Qa(n),me!==null&&(ge.data=me)))),(me=od?ud(e,n):cd(e,n))&&(E=br(E,"onBeforeInput"),0<E.length&&(F=new za("onBeforeInput","beforeinput",null,n,F),z.push({event:F,listeners:E}),F.data=me))}ho(z,t)})}function Is(e,t,n){return{instance:e,listener:t,currentTarget:n}}function br(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=vs(e,n),a!=null&&s.unshift(Is(e,a,i)),a=vs(e,t),a!=null&&s.push(Is(e,a,i))),e=e.return}return s}function Yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function po(e,t,n,s,i){for(var a=t._reactName,f=[];n!==null&&n!==s;){var p=n,g=p.alternate,E=p.stateNode;if(g!==null&&g===s)break;p.tag===5&&E!==null&&(p=E,i?(g=vs(n,a),g!=null&&f.unshift(Is(n,g,p))):i||(g=vs(n,a),g!=null&&f.push(Is(n,g,p)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Nd=/\r\n?/g,Ed=/\u0000|\uFFFD/g;function go(e){return(typeof e=="string"?e:""+e).replace(Nd,`
`).replace(Ed,"")}function Pr(e,t,n){if(t=go(t),go(e)!==t&&n)throw Error(l(425))}function Dr(){}var el=null,tl=null;function nl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,jd=typeof clearTimeout=="function"?clearTimeout:void 0,yo=typeof Promise=="function"?Promise:void 0,Td=typeof queueMicrotask=="function"?queueMicrotask:typeof yo<"u"?function(e){return yo.resolve(null).then(e).catch(_d)}:sl;function _d(e){setTimeout(function(){throw e})}function rl(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),Ts(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Ts(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Kn=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Kn,As="__reactProps$"+Kn,Ht="__reactContainer$"+Kn,il="__reactEvents$"+Kn,Rd="__reactListeners$"+Kn,bd="__reactHandles$"+Kn;function _n(e){var t=e[Ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[Ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vo(e);e!==null;){if(n=e[Ot])return n;e=vo(e)}return t}e=n,n=e.parentNode}return null}function Ms(e){return e=e[Ot]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(l(33))}function Or(e){return e[As]||null}var ll=[],Jn=-1;function ln(e){return{current:e}}function Oe(e){0>Jn||(e.current=ll[Jn],ll[Jn]=null,Jn--)}function Pe(e,t){Jn++,ll[Jn]=e.current,e.current=t}var an={},Xe=ln(an),it=ln(!1),Rn=an;function es(e,t){var n=e.type.contextTypes;if(!n)return an;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function lt(e){return e=e.childContextTypes,e!=null}function Lr(){Oe(it),Oe(Xe)}function wo(e,t,n){if(Xe.current!==an)throw Error(l(168));Pe(Xe,t),Pe(it,n)}function Co(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(l(108,ke(e)||"Unknown",i));return W({},n,s)}function Ur(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||an,Rn=Xe.current,Pe(Xe,e),Pe(it,it.current),!0}function So(e,t,n){var s=e.stateNode;if(!s)throw Error(l(169));n?(e=Co(e,t,Rn),s.__reactInternalMemoizedMergedChildContext=e,Oe(it),Oe(Xe),Pe(Xe,e)):Oe(it),Pe(it,n)}var Bt=null,Fr=!1,al=!1;function ko(e){Bt===null?Bt=[e]:Bt.push(e)}function Pd(e){Fr=!0,ko(e)}function on(){if(!al&&Bt!==null){al=!0;var e=0,t=_e;try{var n=Bt;for(_e=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Bt=null,Fr=!1}catch(i){throw Bt!==null&&(Bt=Bt.slice(e+1)),xa(Ri,on),i}finally{_e=t,al=!1}}return null}var ts=[],ns=0,Ir=null,Ar=0,vt=[],wt=0,bn=null,Vt=1,Wt="";function Pn(e,t){ts[ns++]=Ar,ts[ns++]=Ir,Ir=e,Ar=t}function xo(e,t,n){vt[wt++]=Vt,vt[wt++]=Wt,vt[wt++]=bn,bn=e;var s=Vt;e=Wt;var i=32-Nt(s)-1;s&=~(1<<i),n+=1;var a=32-Nt(t)+i;if(30<a){var f=i-i%5;a=(s&(1<<f)-1).toString(32),s>>=f,i-=f,Vt=1<<32-Nt(t)+i|n<<i|s,Wt=a+e}else Vt=1<<a|n<<i|s,Wt=e}function ol(e){e.return!==null&&(Pn(e,1),xo(e,1,0))}function ul(e){for(;e===Ir;)Ir=ts[--ns],ts[ns]=null,Ar=ts[--ns],ts[ns]=null;for(;e===bn;)bn=vt[--wt],vt[wt]=null,Wt=vt[--wt],vt[wt]=null,Vt=vt[--wt],vt[wt]=null}var ht=null,mt=null,Ue=!1,jt=null;function No(e,t){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Eo(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,mt=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bn!==null?{id:Vt,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ht=e,mt=null,!0):!1;default:return!1}}function cl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dl(e){if(Ue){var t=mt;if(t){var n=t;if(!Eo(e,t)){if(cl(e))throw Error(l(418));t=rn(n.nextSibling);var s=ht;t&&Eo(e,t)?No(s,n):(e.flags=e.flags&-4097|2,Ue=!1,ht=e)}}else{if(cl(e))throw Error(l(418));e.flags=e.flags&-4097|2,Ue=!1,ht=e}}}function jo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function Mr(e){if(e!==ht)return!1;if(!Ue)return jo(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nl(e.type,e.memoizedProps)),t&&(t=mt)){if(cl(e))throw To(),Error(l(418));for(;t;)No(e,t),t=rn(t.nextSibling)}if(jo(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mt=rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=ht?rn(e.stateNode.nextSibling):null;return!0}function To(){for(var e=mt;e;)e=rn(e.nextSibling)}function ss(){mt=ht=null,Ue=!1}function fl(e){jt===null?jt=[e]:jt.push(e)}var Dd=te.ReactCurrentBatchConfig;function zs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(l(309));var s=n.stateNode}if(!s)throw Error(l(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(f){var p=i.refs;f===null?delete p[a]:p[a]=f},t._stringRef=a,t)}if(typeof e!="string")throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function zr(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _o(e){var t=e._init;return t(e._payload)}function Ro(e){function t(k,v){if(e){var x=k.deletions;x===null?(k.deletions=[v],k.flags|=16):x.push(v)}}function n(k,v){if(!e)return null;for(;v!==null;)t(k,v),v=v.sibling;return null}function s(k,v){for(k=new Map;v!==null;)v.key!==null?k.set(v.key,v):k.set(v.index,v),v=v.sibling;return k}function i(k,v){return k=gn(k,v),k.index=0,k.sibling=null,k}function a(k,v,x){return k.index=x,e?(x=k.alternate,x!==null?(x=x.index,x<v?(k.flags|=2,v):x):(k.flags|=2,v)):(k.flags|=1048576,v)}function f(k){return e&&k.alternate===null&&(k.flags|=2),k}function p(k,v,x,B){return v===null||v.tag!==6?(v=sa(x,k.mode,B),v.return=k,v):(v=i(v,x),v.return=k,v)}function g(k,v,x,B){var ie=x.type;return ie===q?F(k,v,x.props.children,B,x.key):v!==null&&(v.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===V&&_o(ie)===v.type)?(B=i(v,x.props),B.ref=zs(k,v,x),B.return=k,B):(B=ci(x.type,x.key,x.props,null,k.mode,B),B.ref=zs(k,v,x),B.return=k,B)}function E(k,v,x,B){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=ra(x,k.mode,B),v.return=k,v):(v=i(v,x.children||[]),v.return=k,v)}function F(k,v,x,B,ie){return v===null||v.tag!==7?(v=Mn(x,k.mode,B,ie),v.return=k,v):(v=i(v,x),v.return=k,v)}function z(k,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=sa(""+v,k.mode,x),v.return=k,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pe:return x=ci(v.type,v.key,v.props,null,k.mode,x),x.ref=zs(k,null,v),x.return=k,x;case de:return v=ra(v,k.mode,x),v.return=k,v;case V:var B=v._init;return z(k,B(v._payload),x)}if(Kt(v)||Q(v))return v=Mn(v,k.mode,x,null),v.return=k,v;zr(k,v)}return null}function U(k,v,x,B){var ie=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return ie!==null?null:p(k,v,""+x,B);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pe:return x.key===ie?g(k,v,x,B):null;case de:return x.key===ie?E(k,v,x,B):null;case V:return ie=x._init,U(k,v,ie(x._payload),B)}if(Kt(x)||Q(x))return ie!==null?null:F(k,v,x,B,null);zr(k,x)}return null}function Y(k,v,x,B,ie){if(typeof B=="string"&&B!==""||typeof B=="number")return k=k.get(x)||null,p(v,k,""+B,ie);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case pe:return k=k.get(B.key===null?x:B.key)||null,g(v,k,B,ie);case de:return k=k.get(B.key===null?x:B.key)||null,E(v,k,B,ie);case V:var he=B._init;return Y(k,v,x,he(B._payload),ie)}if(Kt(B)||Q(B))return k=k.get(x)||null,F(v,k,B,ie,null);zr(v,B)}return null}function ee(k,v,x,B){for(var ie=null,he=null,me=v,ge=v=0,Ge=null;me!==null&&ge<x.length;ge++){me.index>ge?(Ge=me,me=null):Ge=me.sibling;var Ee=U(k,me,x[ge],B);if(Ee===null){me===null&&(me=Ge);break}e&&me&&Ee.alternate===null&&t(k,me),v=a(Ee,v,ge),he===null?ie=Ee:he.sibling=Ee,he=Ee,me=Ge}if(ge===x.length)return n(k,me),Ue&&Pn(k,ge),ie;if(me===null){for(;ge<x.length;ge++)me=z(k,x[ge],B),me!==null&&(v=a(me,v,ge),he===null?ie=me:he.sibling=me,he=me);return Ue&&Pn(k,ge),ie}for(me=s(k,me);ge<x.length;ge++)Ge=Y(me,k,ge,x[ge],B),Ge!==null&&(e&&Ge.alternate!==null&&me.delete(Ge.key===null?ge:Ge.key),v=a(Ge,v,ge),he===null?ie=Ge:he.sibling=Ge,he=Ge);return e&&me.forEach(function(yn){return t(k,yn)}),Ue&&Pn(k,ge),ie}function se(k,v,x,B){var ie=Q(x);if(typeof ie!="function")throw Error(l(150));if(x=ie.call(x),x==null)throw Error(l(151));for(var he=ie=null,me=v,ge=v=0,Ge=null,Ee=x.next();me!==null&&!Ee.done;ge++,Ee=x.next()){me.index>ge?(Ge=me,me=null):Ge=me.sibling;var yn=U(k,me,Ee.value,B);if(yn===null){me===null&&(me=Ge);break}e&&me&&yn.alternate===null&&t(k,me),v=a(yn,v,ge),he===null?ie=yn:he.sibling=yn,he=yn,me=Ge}if(Ee.done)return n(k,me),Ue&&Pn(k,ge),ie;if(me===null){for(;!Ee.done;ge++,Ee=x.next())Ee=z(k,Ee.value,B),Ee!==null&&(v=a(Ee,v,ge),he===null?ie=Ee:he.sibling=Ee,he=Ee);return Ue&&Pn(k,ge),ie}for(me=s(k,me);!Ee.done;ge++,Ee=x.next())Ee=Y(me,k,ge,Ee.value,B),Ee!==null&&(e&&Ee.alternate!==null&&me.delete(Ee.key===null?ge:Ee.key),v=a(Ee,v,ge),he===null?ie=Ee:he.sibling=Ee,he=Ee);return e&&me.forEach(function(ff){return t(k,ff)}),Ue&&Pn(k,ge),ie}function He(k,v,x,B){if(typeof x=="object"&&x!==null&&x.type===q&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case pe:e:{for(var ie=x.key,he=v;he!==null;){if(he.key===ie){if(ie=x.type,ie===q){if(he.tag===7){n(k,he.sibling),v=i(he,x.props.children),v.return=k,k=v;break e}}else if(he.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===V&&_o(ie)===he.type){n(k,he.sibling),v=i(he,x.props),v.ref=zs(k,he,x),v.return=k,k=v;break e}n(k,he);break}else t(k,he);he=he.sibling}x.type===q?(v=Mn(x.props.children,k.mode,B,x.key),v.return=k,k=v):(B=ci(x.type,x.key,x.props,null,k.mode,B),B.ref=zs(k,v,x),B.return=k,k=B)}return f(k);case de:e:{for(he=x.key;v!==null;){if(v.key===he)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(k,v.sibling),v=i(v,x.children||[]),v.return=k,k=v;break e}else{n(k,v);break}else t(k,v);v=v.sibling}v=ra(x,k.mode,B),v.return=k,k=v}return f(k);case V:return he=x._init,He(k,v,he(x._payload),B)}if(Kt(x))return ee(k,v,x,B);if(Q(x))return se(k,v,x,B);zr(k,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(k,v.sibling),v=i(v,x),v.return=k,k=v):(n(k,v),v=sa(x,k.mode,B),v.return=k,k=v),f(k)):n(k,v)}return He}var rs=Ro(!0),bo=Ro(!1),Hr=ln(null),Br=null,is=null,hl=null;function ml(){hl=is=Br=null}function pl(e){var t=Hr.current;Oe(Hr),e._currentValue=t}function gl(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ls(e,t){Br=e,hl=is=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(at=!0),e.firstContext=null)}function Ct(e){var t=e._currentValue;if(hl!==e)if(e={context:e,memoizedValue:t,next:null},is===null){if(Br===null)throw Error(l(308));is=e,Br.dependencies={lanes:0,firstContext:e}}else is=is.next=e;return t}var Dn=null;function yl(e){Dn===null?Dn=[e]:Dn.push(e)}function Po(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,yl(t)):(n.next=i.next,i.next=n),t.interleaved=n,$t(e,s)}function $t(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var un=!1;function vl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ne&2)!==0){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,$t(e,n)}return i=s.interleaved,i===null?(t.next=t,yl(s)):(t.next=i.next,i.next=t),s.interleaved=t,$t(e,n)}function Vr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Di(e,n)}}function Oo(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=f:a=a.next=f,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wr(e,t,n,s){var i=e.updateQueue;un=!1;var a=i.firstBaseUpdate,f=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var g=p,E=g.next;g.next=null,f===null?a=E:f.next=E,f=g;var F=e.alternate;F!==null&&(F=F.updateQueue,p=F.lastBaseUpdate,p!==f&&(p===null?F.firstBaseUpdate=E:p.next=E,F.lastBaseUpdate=g))}if(a!==null){var z=i.baseState;f=0,F=E=g=null,p=a;do{var U=p.lane,Y=p.eventTime;if((s&U)===U){F!==null&&(F=F.next={eventTime:Y,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var ee=e,se=p;switch(U=t,Y=n,se.tag){case 1:if(ee=se.payload,typeof ee=="function"){z=ee.call(Y,z,U);break e}z=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=se.payload,U=typeof ee=="function"?ee.call(Y,z,U):ee,U==null)break e;z=W({},z,U);break e;case 2:un=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,U=i.effects,U===null?i.effects=[p]:U.push(p))}else Y={eventTime:Y,lane:U,tag:p.tag,payload:p.payload,callback:p.callback,next:null},F===null?(E=F=Y,g=z):F=F.next=Y,f|=U;if(p=p.next,p===null){if(p=i.shared.pending,p===null)break;U=p,p=U.next,U.next=null,i.lastBaseUpdate=U,i.shared.pending=null}}while(!0);if(F===null&&(g=z),i.baseState=g,i.firstBaseUpdate=E,i.lastBaseUpdate=F,t=i.shared.interleaved,t!==null){i=t;do f|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Un|=f,e.lanes=f,e.memoizedState=z}}function Lo(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(l(191,i));i.call(s)}}}var Hs={},Lt=ln(Hs),Bs=ln(Hs),Vs=ln(Hs);function On(e){if(e===Hs)throw Error(l(174));return e}function wl(e,t){switch(Pe(Vs,t),Pe(Bs,e),Pe(Lt,Hs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ps(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ps(t,e)}Oe(Lt),Pe(Lt,t)}function as(){Oe(Lt),Oe(Bs),Oe(Vs)}function Uo(e){On(Vs.current);var t=On(Lt.current),n=ps(t,e.type);t!==n&&(Pe(Bs,e),Pe(Lt,n))}function Cl(e){Bs.current===e&&(Oe(Lt),Oe(Bs))}var Fe=ln(0);function $r(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sl=[];function kl(){for(var e=0;e<Sl.length;e++)Sl[e]._workInProgressVersionPrimary=null;Sl.length=0}var Qr=te.ReactCurrentDispatcher,xl=te.ReactCurrentBatchConfig,Ln=0,Ie=null,Ve=null,$e=null,Gr=!1,Ws=!1,$s=0,Od=0;function Je(){throw Error(l(321))}function Nl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function El(e,t,n,s,i,a){if(Ln=a,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qr.current=e===null||e.memoizedState===null?Id:Ad,e=n(s,i),Ws){a=0;do{if(Ws=!1,$s=0,25<=a)throw Error(l(301));a+=1,$e=Ve=null,t.updateQueue=null,Qr.current=Md,e=n(s,i)}while(Ws)}if(Qr.current=Yr,t=Ve!==null&&Ve.next!==null,Ln=0,$e=Ve=Ie=null,Gr=!1,t)throw Error(l(300));return e}function jl(){var e=$s!==0;return $s=0,e}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ie.memoizedState=$e=e:$e=$e.next=e,$e}function St(){if(Ve===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=$e===null?Ie.memoizedState:$e.next;if(t!==null)$e=t,Ve=e;else{if(e===null)throw Error(l(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},$e===null?Ie.memoizedState=$e=e:$e=$e.next=e}return $e}function Qs(e,t){return typeof t=="function"?t(e):t}function Tl(e){var t=St(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var s=Ve,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var f=i.next;i.next=a.next,a.next=f}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var p=f=null,g=null,E=a;do{var F=E.lane;if((Ln&F)===F)g!==null&&(g=g.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),s=E.hasEagerState?E.eagerState:e(s,E.action);else{var z={lane:F,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};g===null?(p=g=z,f=s):g=g.next=z,Ie.lanes|=F,Un|=F}E=E.next}while(E!==null&&E!==a);g===null?f=s:g.next=p,Et(s,t.memoizedState)||(at=!0),t.memoizedState=s,t.baseState=f,t.baseQueue=g,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Ie.lanes|=a,Un|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _l(e){var t=St(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var f=i=i.next;do a=e(a,f.action),f=f.next;while(f!==i);Et(a,t.memoizedState)||(at=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function Fo(){}function Io(e,t){var n=Ie,s=St(),i=t(),a=!Et(s.memoizedState,i);if(a&&(s.memoizedState=i,at=!0),s=s.queue,Rl(zo.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Gs(9,Mo.bind(null,n,s,i,t),void 0,null),Qe===null)throw Error(l(349));(Ln&30)!==0||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Mo(e,t,n,s){t.value=n,t.getSnapshot=s,Ho(t)&&Bo(e)}function zo(e,t,n){return n(function(){Ho(t)&&Bo(e)})}function Ho(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch{return!0}}function Bo(e){var t=$t(e,1);t!==null&&bt(t,e,1,-1)}function Vo(e){var t=Ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t.queue=e,e=e.dispatch=Fd.bind(null,Ie,e),[t.memoizedState,e]}function Gs(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Wo(){return St().memoizedState}function qr(e,t,n,s){var i=Ut();Ie.flags|=e,i.memoizedState=Gs(1|t,n,void 0,s===void 0?null:s)}function Zr(e,t,n,s){var i=St();s=s===void 0?null:s;var a=void 0;if(Ve!==null){var f=Ve.memoizedState;if(a=f.destroy,s!==null&&Nl(s,f.deps)){i.memoizedState=Gs(t,n,a,s);return}}Ie.flags|=e,i.memoizedState=Gs(1|t,n,a,s)}function $o(e,t){return qr(8390656,8,e,t)}function Rl(e,t){return Zr(2048,8,e,t)}function Qo(e,t){return Zr(4,2,e,t)}function Go(e,t){return Zr(4,4,e,t)}function qo(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zo(e,t,n){return n=n!=null?n.concat([e]):null,Zr(4,4,qo.bind(null,t,e),n)}function bl(){}function Yo(e,t){var n=St();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Nl(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=St();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Nl(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return(Ln&21)===0?(e.baseState&&(e.baseState=!1,at=!0),e.memoizedState=n):(Et(n,t)||(n=Ta(),Ie.lanes|=n,Un|=n,e.baseState=!0),t)}function Ld(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var s=xl.transition;xl.transition={};try{e(!1),t()}finally{_e=n,xl.transition=s}}function Jo(){return St().memoizedState}function Ud(e,t,n){var s=mn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},eu(e))tu(t,n);else if(n=Po(e,t,n,s),n!==null){var i=st();bt(n,e,s,i),nu(n,t,s)}}function Fd(e,t,n){var s=mn(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(eu(e))tu(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var f=t.lastRenderedState,p=a(f,n);if(i.hasEagerState=!0,i.eagerState=p,Et(p,f)){var g=t.interleaved;g===null?(i.next=i,yl(t)):(i.next=g.next,g.next=i),t.interleaved=i;return}}catch{}finally{}n=Po(e,t,i,s),n!==null&&(i=st(),bt(n,e,s,i),nu(n,t,s))}}function eu(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function tu(e,t){Ws=Gr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nu(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Di(e,n)}}var Yr={readContext:Ct,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Id={readContext:Ct,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:$o,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qr(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){return qr(4,2,e,t)},useMemo:function(e,t){var n=Ut();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Ut();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Ud.bind(null,Ie,e),[s.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:Vo,useDebugValue:bl,useDeferredValue:function(e){return Ut().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Ld.bind(null,e[1]),Ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ie,i=Ut();if(Ue){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),Qe===null)throw Error(l(349));(Ln&30)!==0||Ao(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,$o(zo.bind(null,s,a,e),[e]),s.flags|=2048,Gs(9,Mo.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=Ut(),t=Qe.identifierPrefix;if(Ue){var n=Wt,s=Vt;n=(s&~(1<<32-Nt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=$s++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Od++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ad={readContext:Ct,useCallback:Yo,useContext:Ct,useEffect:Rl,useImperativeHandle:Zo,useInsertionEffect:Qo,useLayoutEffect:Go,useMemo:Ko,useReducer:Tl,useRef:Wo,useState:function(){return Tl(Qs)},useDebugValue:bl,useDeferredValue:function(e){var t=St();return Xo(t,Ve.memoizedState,e)},useTransition:function(){var e=Tl(Qs)[0],t=St().memoizedState;return[e,t]},useMutableSource:Fo,useSyncExternalStore:Io,useId:Jo,unstable_isNewReconciler:!1},Md={readContext:Ct,useCallback:Yo,useContext:Ct,useEffect:Rl,useImperativeHandle:Zo,useInsertionEffect:Qo,useLayoutEffect:Go,useMemo:Ko,useReducer:_l,useRef:Wo,useState:function(){return _l(Qs)},useDebugValue:bl,useDeferredValue:function(e){var t=St();return Ve===null?t.memoizedState=e:Xo(t,Ve.memoizedState,e)},useTransition:function(){var e=_l(Qs)[0],t=St().memoizedState;return[e,t]},useMutableSource:Fo,useSyncExternalStore:Io,useId:Jo,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=W({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Pl(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:W({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Kr={isMounted:function(e){return(e=e._reactInternals)?Tn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=st(),i=mn(e),a=Qt(s,i);a.payload=t,n!=null&&(a.callback=n),t=cn(e,a,i),t!==null&&(bt(t,e,i,s),Vr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=st(),i=mn(e),a=Qt(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=cn(e,a,i),t!==null&&(bt(t,e,i,s),Vr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),s=mn(e),i=Qt(n,s);i.tag=2,t!=null&&(i.callback=t),t=cn(e,i,s),t!==null&&(bt(t,e,s,n),Vr(t,e,s))}};function su(e,t,n,s,i,a,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,f):t.prototype&&t.prototype.isPureReactComponent?!Os(n,s)||!Os(i,a):!0}function ru(e,t,n){var s=!1,i=an,a=t.contextType;return typeof a=="object"&&a!==null?a=Ct(a):(i=lt(t)?Rn:Xe.current,s=t.contextTypes,a=(s=s!=null)?es(e,i):an),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kr,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function iu(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Kr.enqueueReplaceState(t,t.state,null)}function Dl(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},vl(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Ct(a):(a=lt(t)?Rn:Xe.current,i.context=es(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Pl(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Kr.enqueueReplaceState(i,i.state,null),Wr(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function os(e,t){try{var n="",s=t;do n+=ue(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Ol(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ll(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var zd=typeof WeakMap=="function"?WeakMap:Map;function lu(e,t,n){n=Qt(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){ri||(ri=!0,Zl=s),Ll(e,t)},n}function au(e,t,n){n=Qt(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){Ll(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Ll(e,t),typeof s!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function ou(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new zd;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=ef.bind(null,e,t,n),t.then(e,e))}function uu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cu(e,t,n,s,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qt(-1,1),t.tag=2,cn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Hd=te.ReactCurrentOwner,at=!1;function nt(e,t,n,s){t.child=e===null?bo(t,null,n,s):rs(t,e.child,n,s)}function du(e,t,n,s,i){n=n.render;var a=t.ref;return ls(t,i),s=El(e,t,n,s,a,i),n=jl(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gt(e,t,i)):(Ue&&n&&ol(t),t.flags|=1,nt(e,t,s,i),t.child)}function fu(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!na(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,hu(e,t,a,s,i)):(e=ci(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&i)===0){var f=a.memoizedProps;if(n=n.compare,n=n!==null?n:Os,n(f,s)&&e.ref===t.ref)return Gt(e,t,i)}return t.flags|=1,e=gn(a,s),e.ref=t.ref,e.return=t,t.child=e}function hu(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(Os(a,s)&&e.ref===t.ref)if(at=!1,t.pendingProps=s=a,(e.lanes&i)!==0)(e.flags&131072)!==0&&(at=!0);else return t.lanes=e.lanes,Gt(e,t,i)}return Ul(e,t,n,s,i)}function mu(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(cs,pt),pt|=n;else{if((n&1073741824)===0)return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pe(cs,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Pe(cs,pt),pt|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,Pe(cs,pt),pt|=s;return nt(e,t,i,n),t.child}function pu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ul(e,t,n,s,i){var a=lt(n)?Rn:Xe.current;return a=es(t,a),ls(t,i),n=El(e,t,n,s,a,i),s=jl(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gt(e,t,i)):(Ue&&s&&ol(t),t.flags|=1,nt(e,t,n,i),t.child)}function gu(e,t,n,s,i){if(lt(n)){var a=!0;Ur(t)}else a=!1;if(ls(t,i),t.stateNode===null)Jr(e,t),ru(t,n,s),Dl(t,n,s,i),s=!0;else if(e===null){var f=t.stateNode,p=t.memoizedProps;f.props=p;var g=f.context,E=n.contextType;typeof E=="object"&&E!==null?E=Ct(E):(E=lt(n)?Rn:Xe.current,E=es(t,E));var F=n.getDerivedStateFromProps,z=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function";z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==s||g!==E)&&iu(t,f,s,E),un=!1;var U=t.memoizedState;f.state=U,Wr(t,s,f,i),g=t.memoizedState,p!==s||U!==g||it.current||un?(typeof F=="function"&&(Pl(t,n,F,s),g=t.memoizedState),(p=un||su(t,n,p,s,U,g,E))?(z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=g),f.props=s,f.state=g,f.context=E,s=p):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,Do(e,t),p=t.memoizedProps,E=t.type===t.elementType?p:Tt(t.type,p),f.props=E,z=t.pendingProps,U=f.context,g=n.contextType,typeof g=="object"&&g!==null?g=Ct(g):(g=lt(n)?Rn:Xe.current,g=es(t,g));var Y=n.getDerivedStateFromProps;(F=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==z||U!==g)&&iu(t,f,s,g),un=!1,U=t.memoizedState,f.state=U,Wr(t,s,f,i);var ee=t.memoizedState;p!==z||U!==ee||it.current||un?(typeof Y=="function"&&(Pl(t,n,Y,s),ee=t.memoizedState),(E=un||su(t,n,E,s,U,ee,g)||!1)?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,ee,g),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,ee,g)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ee),f.props=s,f.state=ee,f.context=g,s=E):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),s=!1)}return Fl(e,t,n,s,a,i)}function Fl(e,t,n,s,i,a){pu(e,t);var f=(t.flags&128)!==0;if(!s&&!f)return i&&So(t,n,!1),Gt(e,t,a);s=t.stateNode,Hd.current=t;var p=f&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&f?(t.child=rs(t,e.child,null,a),t.child=rs(t,null,p,a)):nt(e,t,p,a),t.memoizedState=s.state,i&&So(t,n,!0),t.child}function yu(e){var t=e.stateNode;t.pendingContext?wo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wo(e,t.context,!1),wl(e,t.containerInfo)}function vu(e,t,n,s,i){return ss(),fl(i),t.flags|=256,nt(e,t,n,s),t.child}var Il={dehydrated:null,treeContext:null,retryLane:0};function Al(e){return{baseLanes:e,cachePool:null,transitions:null}}function wu(e,t,n){var s=t.pendingProps,i=Fe.current,a=!1,f=(t.flags&128)!==0,p;if((p=f)||(p=e!==null&&e.memoizedState===null?!1:(i&2)!==0),p?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pe(Fe,i&1),e===null)return dl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(f=s.children,e=s.fallback,a?(s=t.mode,a=t.child,f={mode:"hidden",children:f},(s&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=f):a=di(f,s,0,null),e=Mn(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Al(n),t.memoizedState=Il,e):Ml(t,f));if(i=e.memoizedState,i!==null&&(p=i.dehydrated,p!==null))return Bd(e,t,f,s,p,i,n);if(a){a=s.fallback,f=t.mode,i=e.child,p=i.sibling;var g={mode:"hidden",children:s.children};return(f&1)===0&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=g,t.deletions=null):(s=gn(i,g),s.subtreeFlags=i.subtreeFlags&14680064),p!==null?a=gn(p,a):(a=Mn(a,f,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,f=e.child.memoizedState,f=f===null?Al(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},a.memoizedState=f,a.childLanes=e.childLanes&~n,t.memoizedState=Il,s}return a=e.child,e=a.sibling,s=gn(a,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ml(e,t){return t=di({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xr(e,t,n,s){return s!==null&&fl(s),rs(t,e.child,null,n),e=Ml(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bd(e,t,n,s,i,a,f){if(n)return t.flags&256?(t.flags&=-257,s=Ol(Error(l(422))),Xr(e,t,f,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=di({mode:"visible",children:s.children},i,0,null),a=Mn(a,i,f,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,(t.mode&1)!==0&&rs(t,e.child,null,f),t.child.memoizedState=Al(f),t.memoizedState=Il,a);if((t.mode&1)===0)return Xr(e,t,f,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var p=s.dgst;return s=p,a=Error(l(419)),s=Ol(a,s,void 0),Xr(e,t,f,s)}if(p=(f&e.childLanes)!==0,at||p){if(s=Qe,s!==null){switch(f&-f){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(s.suspendedLanes|f))!==0?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,$t(e,i),bt(s,e,i,-1))}return ta(),s=Ol(Error(l(421))),Xr(e,t,f,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=tf.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,mt=rn(i.nextSibling),ht=t,Ue=!0,jt=null,e!==null&&(vt[wt++]=Vt,vt[wt++]=Wt,vt[wt++]=bn,Vt=e.id,Wt=e.overflow,bn=t),t=Ml(t,s.children),t.flags|=4096,t)}function Cu(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),gl(e.return,t,n)}function zl(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function Su(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(nt(e,t,s.children,n),s=Fe.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cu(e,n,t);else if(e.tag===19)Cu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Pe(Fe,s),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&$r(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zl(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&$r(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zl(t,!0,n,null,a);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jr(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vd(e,t,n){switch(t.tag){case 3:yu(t),ss();break;case 5:Uo(t);break;case 1:lt(t.type)&&Ur(t);break;case 4:wl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;Pe(Hr,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Pe(Fe,Fe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?wu(e,t,n):(Pe(Fe,Fe.current&1),e=Gt(e,t,n),e!==null?e.sibling:null);Pe(Fe,Fe.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Su(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Fe,Fe.current),s)break;return null;case 22:case 23:return t.lanes=0,mu(e,t,n)}return Gt(e,t,n)}var ku,Hl,xu,Nu;ku=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Hl=function(){},xu=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,On(Lt.current);var a=null;switch(n){case"input":i=kn(e,i),s=kn(e,s),a=[];break;case"select":i=W({},i,{value:void 0}),s=W({},s,{value:void 0}),a=[];break;case"textarea":i=Vn(e,i),s=Vn(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Dr)}gs(n,s);var f;n=null;for(E in i)if(!s.hasOwnProperty(E)&&i.hasOwnProperty(E)&&i[E]!=null)if(E==="style"){var p=i[E];for(f in p)p.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(c.hasOwnProperty(E)?a||(a=[]):(a=a||[]).push(E,null));for(E in s){var g=s[E];if(p=i?.[E],s.hasOwnProperty(E)&&g!==p&&(g!=null||p!=null))if(E==="style")if(p){for(f in p)!p.hasOwnProperty(f)||g&&g.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in g)g.hasOwnProperty(f)&&p[f]!==g[f]&&(n||(n={}),n[f]=g[f])}else n||(a||(a=[]),a.push(E,n)),n=g;else E==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,p=p?p.__html:void 0,g!=null&&p!==g&&(a=a||[]).push(E,g)):E==="children"?typeof g!="string"&&typeof g!="number"||(a=a||[]).push(E,""+g):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(c.hasOwnProperty(E)?(g!=null&&E==="onScroll"&&De("scroll",e),a||p===g||(a=[])):(a=a||[]).push(E,g))}n&&(a=a||[]).push("style",n);var E=a;(t.updateQueue=E)&&(t.flags|=4)}},Nu=function(e,t,n,s){n!==s&&(t.flags|=4)};function qs(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Wd(e,t,n){var s=t.pendingProps;switch(ul(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return lt(t.type)&&Lr(),et(t),null;case 3:return s=t.stateNode,as(),Oe(it),Oe(Xe),kl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Mr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,jt!==null&&(Xl(jt),jt=null))),Hl(e,t),et(t),null;case 5:Cl(t);var i=On(Vs.current);if(n=t.type,e!==null&&t.stateNode!=null)xu(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(l(166));return et(t),null}if(e=On(Lt.current),Mr(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Ot]=t,s[As]=a,e=(t.mode&1)!==0,n){case"dialog":De("cancel",s),De("close",s);break;case"iframe":case"object":case"embed":De("load",s);break;case"video":case"audio":for(i=0;i<Us.length;i++)De(Us[i],s);break;case"source":De("error",s);break;case"img":case"image":case"link":De("error",s),De("load",s);break;case"details":De("toggle",s);break;case"input":zn(s,a),De("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},De("invalid",s);break;case"textarea":rr(s,a),De("invalid",s)}gs(n,a),i=null;for(var f in a)if(a.hasOwnProperty(f)){var p=a[f];f==="children"?typeof p=="string"?s.textContent!==p&&(a.suppressHydrationWarning!==!0&&Pr(s.textContent,p,e),i=["children",p]):typeof p=="number"&&s.textContent!==""+p&&(a.suppressHydrationWarning!==!0&&Pr(s.textContent,p,e),i=["children",""+p]):c.hasOwnProperty(f)&&p!=null&&f==="onScroll"&&De("scroll",s)}switch(n){case"input":Sn(s),Bn(s,a,!0);break;case"textarea":Sn(s),zt(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Dr)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{f=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lr(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(n,{is:s.is}):(e=f.createElement(n),n==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,n),e[Ot]=t,e[As]=s,ku(e,t,!1,!1),t.stateNode=e;e:{switch(f=ys(n,s),n){case"dialog":De("cancel",e),De("close",e),i=s;break;case"iframe":case"object":case"embed":De("load",e),i=s;break;case"video":case"audio":for(i=0;i<Us.length;i++)De(Us[i],e);i=s;break;case"source":De("error",e),i=s;break;case"img":case"image":case"link":De("error",e),De("load",e),i=s;break;case"details":De("toggle",e),i=s;break;case"input":zn(e,s),i=kn(e,s),De("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=W({},s,{value:void 0}),De("invalid",e);break;case"textarea":rr(e,s),i=Vn(e,s),De("invalid",e);break;default:i=s}gs(n,i),p=i;for(a in p)if(p.hasOwnProperty(a)){var g=p[a];a==="style"?ur(e,g):a==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&ar(e,g)):a==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&En(e,g):typeof g=="number"&&En(e,""+g):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(c.hasOwnProperty(a)?g!=null&&a==="onScroll"&&De("scroll",e):g!=null&&K(e,a,g,f))}switch(n){case"input":Sn(e),Bn(e,s,!1);break;case"textarea":Sn(e),zt(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ve(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?Mt(e,!!s.multiple,a,!1):s.defaultValue!=null&&Mt(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Dr)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)Nu(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(l(166));if(n=On(Vs.current),On(Lt.current),Mr(t)){if(s=t.stateNode,n=t.memoizedProps,s[Ot]=t,(a=s.nodeValue!==n)&&(e=ht,e!==null))switch(e.tag){case 3:Pr(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pr(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ot]=t,t.stateNode=s}return et(t),null;case 13:if(Oe(Fe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&mt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)To(),ss(),t.flags|=98560,a=!1;else if(a=Mr(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(l(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(l(317));a[Ot]=t}else ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),a=!1}else jt!==null&&(Xl(jt),jt=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Fe.current&1)!==0?We===0&&(We=3):ta())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return as(),Hl(e,t),e===null&&Fs(t.stateNode.containerInfo),et(t),null;case 10:return pl(t.type._context),et(t),null;case 17:return lt(t.type)&&Lr(),et(t),null;case 19:if(Oe(Fe),a=t.memoizedState,a===null)return et(t),null;if(s=(t.flags&128)!==0,f=a.rendering,f===null)if(s)qs(a,!1);else{if(We!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=$r(e),f!==null){for(t.flags|=128,qs(a,!1),s=f.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,f=a.alternate,f===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,e=f.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pe(Fe,Fe.current&1|2),t.child}e=e.sibling}a.tail!==null&&ze()>ds&&(t.flags|=128,s=!0,qs(a,!1),t.lanes=4194304)}else{if(!s)if(e=$r(f),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!Ue)return et(t),null}else 2*ze()-a.renderingStartTime>ds&&n!==1073741824&&(t.flags|=128,s=!0,qs(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(n=a.last,n!==null?n.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ze(),t.sibling=null,n=Fe.current,Pe(Fe,s?n&1|2:n&1),t):(et(t),null);case 22:case 23:return ea(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(pt&1073741824)!==0&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(l(156,t.tag))}function $d(e,t){switch(ul(t),t.tag){case 1:return lt(t.type)&&Lr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return as(),Oe(it),Oe(Xe),kl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Cl(t),null;case 13:if(Oe(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Fe),null;case 4:return as(),null;case 10:return pl(t.type._context),null;case 22:case 23:return ea(),null;case 24:return null;default:return null}}var ei=!1,tt=!1,Qd=typeof WeakSet=="function"?WeakSet:Set,J=null;function us(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ae(e,t,s)}else n.current=null}function Bl(e,t,n){try{n()}catch(s){Ae(e,t,s)}}var Eu=!1;function Gd(e,t){if(el=Cr,e=no(),Qi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var f=0,p=-1,g=-1,E=0,F=0,z=e,U=null;t:for(;;){for(var Y;z!==n||i!==0&&z.nodeType!==3||(p=f+i),z!==a||s!==0&&z.nodeType!==3||(g=f+s),z.nodeType===3&&(f+=z.nodeValue.length),(Y=z.firstChild)!==null;)U=z,z=Y;for(;;){if(z===e)break t;if(U===n&&++E===i&&(p=f),U===a&&++F===s&&(g=f),(Y=z.nextSibling)!==null)break;z=U,U=z.parentNode}z=Y}n=p===-1||g===-1?null:{start:p,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(tl={focusedElem:e,selectionRange:n},Cr=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var ee=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var se=ee.memoizedProps,He=ee.memoizedState,k=t.stateNode,v=k.getSnapshotBeforeUpdate(t.elementType===t.type?se:Tt(t.type,se),He);k.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(B){Ae(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return ee=Eu,Eu=!1,ee}function Zs(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Bl(t,n,a)}i=i.next}while(i!==s)}}function ti(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Vl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ju(e){var t=e.alternate;t!==null&&(e.alternate=null,ju(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[As],delete t[il],delete t[Rd],delete t[bd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tu(e){return e.tag===5||e.tag===3||e.tag===4}function _u(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Dr));else if(s!==4&&(e=e.child,e!==null))for(Wl(e,t,n),e=e.sibling;e!==null;)Wl(e,t,n),e=e.sibling}function $l(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for($l(e,t,n),e=e.sibling;e!==null;)$l(e,t,n),e=e.sibling}var Ze=null,_t=!1;function dn(e,t,n){for(n=n.child;n!==null;)Ru(e,t,n),n=n.sibling}function Ru(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(mr,n)}catch{}switch(n.tag){case 5:tt||us(n,t);case 6:var s=Ze,i=_t;Ze=null,dn(e,t,n),Ze=s,_t=i,Ze!==null&&(_t?(e=Ze,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(_t?(e=Ze,n=n.stateNode,e.nodeType===8?rl(e.parentNode,n):e.nodeType===1&&rl(e,n),Ts(e)):rl(Ze,n.stateNode));break;case 4:s=Ze,i=_t,Ze=n.stateNode.containerInfo,_t=!0,dn(e,t,n),Ze=s,_t=i;break;case 0:case 11:case 14:case 15:if(!tt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,f=a.destroy;a=a.tag,f!==void 0&&((a&2)!==0||(a&4)!==0)&&Bl(n,t,f),i=i.next}while(i!==s)}dn(e,t,n);break;case 1:if(!tt&&(us(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(p){Ae(n,t,p)}dn(e,t,n);break;case 21:dn(e,t,n);break;case 22:n.mode&1?(tt=(s=tt)||n.memoizedState!==null,dn(e,t,n),tt=s):dn(e,t,n);break;default:dn(e,t,n)}}function bu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qd),t.forEach(function(s){var i=nf.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Rt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,f=t,p=f;e:for(;p!==null;){switch(p.tag){case 5:Ze=p.stateNode,_t=!1;break e;case 3:Ze=p.stateNode.containerInfo,_t=!0;break e;case 4:Ze=p.stateNode.containerInfo,_t=!0;break e}p=p.return}if(Ze===null)throw Error(l(160));Ru(a,f,i),Ze=null,_t=!1;var g=i.alternate;g!==null&&(g.return=null),i.return=null}catch(E){Ae(i,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pu(t,e),t=t.sibling}function Pu(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Ft(e),s&4){try{Zs(3,e,e.return),ti(3,e)}catch(se){Ae(e,e.return,se)}try{Zs(5,e,e.return)}catch(se){Ae(e,e.return,se)}}break;case 1:Rt(t,e),Ft(e),s&512&&n!==null&&us(n,n.return);break;case 5:if(Rt(t,e),Ft(e),s&512&&n!==null&&us(n,n.return),e.flags&32){var i=e.stateNode;try{En(i,"")}catch(se){Ae(e,e.return,se)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,f=n!==null?n.memoizedProps:a,p=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{p==="input"&&a.type==="radio"&&a.name!=null&&Hn(i,a),ys(p,f);var E=ys(p,a);for(f=0;f<g.length;f+=2){var F=g[f],z=g[f+1];F==="style"?ur(i,z):F==="dangerouslySetInnerHTML"?ar(i,z):F==="children"?En(i,z):K(i,F,z,E)}switch(p){case"input":xn(i,a);break;case"textarea":ir(i,a);break;case"select":var U=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var Y=a.value;Y!=null?Mt(i,!!a.multiple,Y,!1):U!==!!a.multiple&&(a.defaultValue!=null?Mt(i,!!a.multiple,a.defaultValue,!0):Mt(i,!!a.multiple,a.multiple?[]:"",!1))}i[As]=a}catch(se){Ae(e,e.return,se)}}break;case 6:if(Rt(t,e),Ft(e),s&4){if(e.stateNode===null)throw Error(l(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(se){Ae(e,e.return,se)}}break;case 3:if(Rt(t,e),Ft(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(t.containerInfo)}catch(se){Ae(e,e.return,se)}break;case 4:Rt(t,e),Ft(e);break;case 13:Rt(t,e),Ft(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ql=ze())),s&4&&bu(e);break;case 22:if(F=n!==null&&n.memoizedState!==null,e.mode&1?(tt=(E=tt)||F,Rt(t,e),tt=E):Rt(t,e),Ft(e),s&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!F&&(e.mode&1)!==0)for(J=e,F=e.child;F!==null;){for(z=J=F;J!==null;){switch(U=J,Y=U.child,U.tag){case 0:case 11:case 14:case 15:Zs(4,U,U.return);break;case 1:us(U,U.return);var ee=U.stateNode;if(typeof ee.componentWillUnmount=="function"){s=U,n=U.return;try{t=s,ee.props=t.memoizedProps,ee.state=t.memoizedState,ee.componentWillUnmount()}catch(se){Ae(s,n,se)}}break;case 5:us(U,U.return);break;case 22:if(U.memoizedState!==null){Lu(z);continue}}Y!==null?(Y.return=U,J=Y):Lu(z)}F=F.sibling}e:for(F=null,z=e;;){if(z.tag===5){if(F===null){F=z;try{i=z.stateNode,E?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(p=z.stateNode,g=z.memoizedProps.style,f=g!=null&&g.hasOwnProperty("display")?g.display:null,p.style.display=or("display",f))}catch(se){Ae(e,e.return,se)}}}else if(z.tag===6){if(F===null)try{z.stateNode.nodeValue=E?"":z.memoizedProps}catch(se){Ae(e,e.return,se)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;F===z&&(F=null),z=z.return}F===z&&(F=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Rt(t,e),Ft(e),s&4&&bu(e);break;case 21:break;default:Rt(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tu(n)){var s=n;break e}n=n.return}throw Error(l(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(En(i,""),s.flags&=-33);var a=_u(e);$l(e,a,i);break;case 3:case 4:var f=s.stateNode.containerInfo,p=_u(e);Wl(e,p,f);break;default:throw Error(l(161))}}catch(g){Ae(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qd(e,t,n){J=e,Du(e)}function Du(e,t,n){for(var s=(e.mode&1)!==0;J!==null;){var i=J,a=i.child;if(i.tag===22&&s){var f=i.memoizedState!==null||ei;if(!f){var p=i.alternate,g=p!==null&&p.memoizedState!==null||tt;p=ei;var E=tt;if(ei=f,(tt=g)&&!E)for(J=i;J!==null;)f=J,g=f.child,f.tag===22&&f.memoizedState!==null?Uu(i):g!==null?(g.return=f,J=g):Uu(i);for(;a!==null;)J=a,Du(a),a=a.sibling;J=i,ei=p,tt=E}Ou(e)}else(i.subtreeFlags&8772)!==0&&a!==null?(a.return=i,J=a):Ou(e)}}function Ou(e){for(;J!==null;){var t=J;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:tt||ti(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!tt)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Lo(t,a,s);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lo(t,f,n)}break;case 5:var p=t.stateNode;if(n===null&&t.flags&4){n=p;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var F=E.memoizedState;if(F!==null){var z=F.dehydrated;z!==null&&Ts(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}tt||t.flags&512&&Vl(t)}catch(U){Ae(t,t.return,U)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function Lu(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function Uu(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ti(4,t)}catch(g){Ae(t,n,g)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(g){Ae(t,i,g)}}var a=t.return;try{Vl(t)}catch(g){Ae(t,a,g)}break;case 5:var f=t.return;try{Vl(t)}catch(g){Ae(t,f,g)}}}catch(g){Ae(t,t.return,g)}if(t===e){J=null;break}var p=t.sibling;if(p!==null){p.return=t.return,J=p;break}J=t.return}}var Zd=Math.ceil,ni=te.ReactCurrentDispatcher,Ql=te.ReactCurrentOwner,kt=te.ReactCurrentBatchConfig,Ne=0,Qe=null,Be=null,Ye=0,pt=0,cs=ln(0),We=0,Ys=null,Un=0,si=0,Gl=0,Ks=null,ot=null,ql=0,ds=1/0,qt=null,ri=!1,Zl=null,fn=null,ii=!1,hn=null,li=0,Xs=0,Yl=null,ai=-1,oi=0;function st(){return(Ne&6)!==0?ze():ai!==-1?ai:ai=ze()}function mn(e){return(e.mode&1)===0?1:(Ne&2)!==0&&Ye!==0?Ye&-Ye:Dd.transition!==null?(oi===0&&(oi=Ta()),oi):(e=_e,e!==0||(e=window.event,e=e===void 0?16:Fa(e.type)),e)}function bt(e,t,n,s){if(50<Xs)throw Xs=0,Yl=null,Error(l(185));ks(e,n,s),((Ne&2)===0||e!==Qe)&&(e===Qe&&((Ne&2)===0&&(si|=n),We===4&&pn(e,Ye)),ut(e,s),n===1&&Ne===0&&(t.mode&1)===0&&(ds=ze()+500,Fr&&on()))}function ut(e,t){var n=e.callbackNode;Dc(e,t);var s=yr(e,e===Qe?Ye:0);if(s===0)n!==null&&Na(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Na(n),t===1)e.tag===0?Pd(Iu.bind(null,e)):ko(Iu.bind(null,e)),Td(function(){(Ne&6)===0&&on()}),n=null;else{switch(_a(s)){case 1:n=Ri;break;case 4:n=Ea;break;case 16:n=hr;break;case 536870912:n=ja;break;default:n=hr}n=$u(n,Fu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fu(e,t){if(ai=-1,oi=0,(Ne&6)!==0)throw Error(l(327));var n=e.callbackNode;if(fs()&&e.callbackNode!==n)return null;var s=yr(e,e===Qe?Ye:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=ui(e,s);else{t=s;var i=Ne;Ne|=2;var a=Mu();(Qe!==e||Ye!==t)&&(qt=null,ds=ze()+500,In(e,t));do try{Xd();break}catch(p){Au(e,p)}while(!0);ml(),ni.current=a,Ne=i,Be!==null?t=0:(Qe=null,Ye=0,t=We)}if(t!==0){if(t===2&&(i=bi(e),i!==0&&(s=i,t=Kl(e,i))),t===1)throw n=Ys,In(e,0),pn(e,s),ut(e,ze()),n;if(t===6)pn(e,s);else{if(i=e.current.alternate,(s&30)===0&&!Yd(i)&&(t=ui(e,s),t===2&&(a=bi(e),a!==0&&(s=a,t=Kl(e,a))),t===1))throw n=Ys,In(e,0),pn(e,s),ut(e,ze()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(l(345));case 2:An(e,ot,qt);break;case 3:if(pn(e,s),(s&130023424)===s&&(t=ql+500-ze(),10<t)){if(yr(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){st(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=sl(An.bind(null,e,ot,qt),t);break}An(e,ot,qt);break;case 4:if(pn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var f=31-Nt(s);a=1<<f,f=t[f],f>i&&(i=f),s&=~a}if(s=i,s=ze()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Zd(s/1960))-s,10<s){e.timeoutHandle=sl(An.bind(null,e,ot,qt),s);break}An(e,ot,qt);break;case 5:An(e,ot,qt);break;default:throw Error(l(329))}}}return ut(e,ze()),e.callbackNode===n?Fu.bind(null,e):null}function Kl(e,t){var n=Ks;return e.current.memoizedState.isDehydrated&&(In(e,t).flags|=256),e=ui(e,t),e!==2&&(t=ot,ot=n,t!==null&&Xl(t)),e}function Xl(e){ot===null?ot=e:ot.push.apply(ot,e)}function Yd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!Et(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pn(e,t){for(t&=~Gl,t&=~si,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),s=1<<n;e[n]=-1,t&=~s}}function Iu(e){if((Ne&6)!==0)throw Error(l(327));fs();var t=yr(e,0);if((t&1)===0)return ut(e,ze()),null;var n=ui(e,t);if(e.tag!==0&&n===2){var s=bi(e);s!==0&&(t=s,n=Kl(e,s))}if(n===1)throw n=Ys,In(e,0),pn(e,t),ut(e,ze()),n;if(n===6)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,An(e,ot,qt),ut(e,ze()),null}function Jl(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(ds=ze()+500,Fr&&on())}}function Fn(e){hn!==null&&hn.tag===0&&(Ne&6)===0&&fs();var t=Ne;Ne|=1;var n=kt.transition,s=_e;try{if(kt.transition=null,_e=1,e)return e()}finally{_e=s,kt.transition=n,Ne=t,(Ne&6)===0&&on()}}function ea(){pt=cs.current,Oe(cs)}function In(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,jd(n)),Be!==null)for(n=Be.return;n!==null;){var s=n;switch(ul(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Lr();break;case 3:as(),Oe(it),Oe(Xe),kl();break;case 5:Cl(s);break;case 4:as();break;case 13:Oe(Fe);break;case 19:Oe(Fe);break;case 10:pl(s.type._context);break;case 22:case 23:ea()}n=n.return}if(Qe=e,Be=e=gn(e.current,null),Ye=pt=t,We=0,Ys=null,Gl=si=Un=0,ot=Ks=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var f=a.next;a.next=i,s.next=f}n.pending=s}Dn=null}return e}function Au(e,t){do{var n=Be;try{if(ml(),Qr.current=Yr,Gr){for(var s=Ie.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Gr=!1}if(Ln=0,$e=Ve=Ie=null,Ws=!1,$s=0,Ql.current=null,n===null||n.return===null){We=1,Ys=t,Be=null;break}e:{var a=e,f=n.return,p=n,g=t;if(t=Ye,p.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var E=g,F=p,z=F.tag;if((F.mode&1)===0&&(z===0||z===11||z===15)){var U=F.alternate;U?(F.updateQueue=U.updateQueue,F.memoizedState=U.memoizedState,F.lanes=U.lanes):(F.updateQueue=null,F.memoizedState=null)}var Y=uu(f);if(Y!==null){Y.flags&=-257,cu(Y,f,p,a,t),Y.mode&1&&ou(a,E,t),t=Y,g=E;var ee=t.updateQueue;if(ee===null){var se=new Set;se.add(g),t.updateQueue=se}else ee.add(g);break e}else{if((t&1)===0){ou(a,E,t),ta();break e}g=Error(l(426))}}else if(Ue&&p.mode&1){var He=uu(f);if(He!==null){(He.flags&65536)===0&&(He.flags|=256),cu(He,f,p,a,t),fl(os(g,p));break e}}a=g=os(g,p),We!==4&&(We=2),Ks===null?Ks=[a]:Ks.push(a),a=f;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var k=lu(a,g,t);Oo(a,k);break e;case 1:p=g;var v=a.type,x=a.stateNode;if((a.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(fn===null||!fn.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var B=au(a,p,t);Oo(a,B);break e}}a=a.return}while(a!==null)}Hu(n)}catch(ie){t=ie,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Mu(){var e=ni.current;return ni.current=Yr,e===null?Yr:e}function ta(){(We===0||We===3||We===2)&&(We=4),Qe===null||(Un&268435455)===0&&(si&268435455)===0||pn(Qe,Ye)}function ui(e,t){var n=Ne;Ne|=2;var s=Mu();(Qe!==e||Ye!==t)&&(qt=null,In(e,t));do try{Kd();break}catch(i){Au(e,i)}while(!0);if(ml(),Ne=n,ni.current=s,Be!==null)throw Error(l(261));return Qe=null,Ye=0,We}function Kd(){for(;Be!==null;)zu(Be)}function Xd(){for(;Be!==null&&!xc();)zu(Be)}function zu(e){var t=Wu(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Hu(e):Be=t,Ql.current=null}function Hu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Wd(n,t,pt),n!==null){Be=n;return}}else{if(n=$d(n,t),n!==null){n.flags&=32767,Be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Be=null;return}}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);We===0&&(We=5)}function An(e,t,n){var s=_e,i=kt.transition;try{kt.transition=null,_e=1,Jd(e,t,n,s)}finally{kt.transition=i,_e=s}return null}function Jd(e,t,n,s){do fs();while(hn!==null);if((Ne&6)!==0)throw Error(l(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Oc(e,a),e===Qe&&(Be=Qe=null,Ye=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||ii||(ii=!0,$u(hr,function(){return fs(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=kt.transition,kt.transition=null;var f=_e;_e=1;var p=Ne;Ne|=4,Ql.current=null,Gd(e,n),Pu(n,e),wd(tl),Cr=!!el,tl=el=null,e.current=n,qd(n),Nc(),Ne=p,_e=f,kt.transition=a}else e.current=n;if(ii&&(ii=!1,hn=e,li=i),a=e.pendingLanes,a===0&&(fn=null),Tc(n.stateNode),ut(e,ze()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(ri)throw ri=!1,e=Zl,Zl=null,e;return(li&1)!==0&&e.tag!==0&&fs(),a=e.pendingLanes,(a&1)!==0?e===Yl?Xs++:(Xs=0,Yl=e):Xs=0,on(),null}function fs(){if(hn!==null){var e=_a(li),t=kt.transition,n=_e;try{if(kt.transition=null,_e=16>e?16:e,hn===null)var s=!1;else{if(e=hn,hn=null,li=0,(Ne&6)!==0)throw Error(l(331));var i=Ne;for(Ne|=4,J=e.current;J!==null;){var a=J,f=a.child;if((J.flags&16)!==0){var p=a.deletions;if(p!==null){for(var g=0;g<p.length;g++){var E=p[g];for(J=E;J!==null;){var F=J;switch(F.tag){case 0:case 11:case 15:Zs(8,F,a)}var z=F.child;if(z!==null)z.return=F,J=z;else for(;J!==null;){F=J;var U=F.sibling,Y=F.return;if(ju(F),F===E){J=null;break}if(U!==null){U.return=Y,J=U;break}J=Y}}}var ee=a.alternate;if(ee!==null){var se=ee.child;if(se!==null){ee.child=null;do{var He=se.sibling;se.sibling=null,se=He}while(se!==null)}}J=a}}if((a.subtreeFlags&2064)!==0&&f!==null)f.return=a,J=f;else e:for(;J!==null;){if(a=J,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Zs(9,a,a.return)}var k=a.sibling;if(k!==null){k.return=a.return,J=k;break e}J=a.return}}var v=e.current;for(J=v;J!==null;){f=J;var x=f.child;if((f.subtreeFlags&2064)!==0&&x!==null)x.return=f,J=x;else e:for(f=v;J!==null;){if(p=J,(p.flags&2048)!==0)try{switch(p.tag){case 0:case 11:case 15:ti(9,p)}}catch(ie){Ae(p,p.return,ie)}if(p===f){J=null;break e}var B=p.sibling;if(B!==null){B.return=p.return,J=B;break e}J=p.return}}if(Ne=i,on(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(mr,e)}catch{}s=!0}return s}finally{_e=n,kt.transition=t}}return!1}function Bu(e,t,n){t=os(n,t),t=lu(e,t,1),e=cn(e,t,1),t=st(),e!==null&&(ks(e,1,t),ut(e,t))}function Ae(e,t,n){if(e.tag===3)Bu(e,e,n);else for(;t!==null;){if(t.tag===3){Bu(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fn===null||!fn.has(s))){e=os(n,e),e=au(t,e,1),t=cn(t,e,1),e=st(),t!==null&&(ks(t,1,e),ut(t,e));break}}t=t.return}}function ef(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(Ye&n)===n&&(We===4||We===3&&(Ye&130023424)===Ye&&500>ze()-ql?In(e,0):Gl|=n),ut(e,t)}function Vu(e,t){t===0&&((e.mode&1)===0?t=1:(t=gr,gr<<=1,(gr&130023424)===0&&(gr=4194304)));var n=st();e=$t(e,t),e!==null&&(ks(e,t,n),ut(e,n))}function tf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Vu(e,n)}function nf(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(l(314))}s!==null&&s.delete(t),Vu(e,n)}var Wu;Wu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)at=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return at=!1,Vd(e,t,n);at=(e.flags&131072)!==0}else at=!1,Ue&&(t.flags&1048576)!==0&&xo(t,Ar,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Jr(e,t),e=t.pendingProps;var i=es(t,Xe.current);ls(t,n),i=El(null,t,s,e,i,n);var a=jl();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lt(s)?(a=!0,Ur(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vl(t),i.updater=Kr,t.stateNode=i,i._reactInternals=t,Dl(t,s,e,n),t=Fl(null,t,s,!0,a,n)):(t.tag=0,Ue&&a&&ol(t),nt(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Jr(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=rf(s),e=Tt(s,e),i){case 0:t=Ul(null,t,s,e,n);break e;case 1:t=gu(null,t,s,e,n);break e;case 11:t=du(null,t,s,e,n);break e;case 14:t=fu(null,t,s,Tt(s.type,e),n);break e}throw Error(l(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),Ul(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),gu(e,t,s,i,n);case 3:e:{if(yu(t),e===null)throw Error(l(387));s=t.pendingProps,a=t.memoizedState,i=a.element,Do(e,t),Wr(t,s,null,n);var f=t.memoizedState;if(s=f.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=os(Error(l(423)),t),t=vu(e,t,s,n,i);break e}else if(s!==i){i=os(Error(l(424)),t),t=vu(e,t,s,n,i);break e}else for(mt=rn(t.stateNode.containerInfo.firstChild),ht=t,Ue=!0,jt=null,n=bo(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ss(),s===i){t=Gt(e,t,n);break e}nt(e,t,s,n)}t=t.child}return t;case 5:return Uo(t),e===null&&dl(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,f=i.children,nl(s,i)?f=null:a!==null&&nl(s,a)&&(t.flags|=32),pu(e,t),nt(e,t,f,n),t.child;case 6:return e===null&&dl(t),null;case 13:return wu(e,t,n);case 4:return wl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=rs(t,null,s,n):nt(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),du(e,t,s,i,n);case 7:return nt(e,t,t.pendingProps,n),t.child;case 8:return nt(e,t,t.pendingProps.children,n),t.child;case 12:return nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,f=i.value,Pe(Hr,s._currentValue),s._currentValue=f,a!==null)if(Et(a.value,f)){if(a.children===i.children&&!it.current){t=Gt(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var p=a.dependencies;if(p!==null){f=a.child;for(var g=p.firstContext;g!==null;){if(g.context===s){if(a.tag===1){g=Qt(-1,n&-n),g.tag=2;var E=a.updateQueue;if(E!==null){E=E.shared;var F=E.pending;F===null?g.next=g:(g.next=F.next,F.next=g),E.pending=g}}a.lanes|=n,g=a.alternate,g!==null&&(g.lanes|=n),gl(a.return,n,t),p.lanes|=n;break}g=g.next}}else if(a.tag===10)f=a.type===t.type?null:a.child;else if(a.tag===18){if(f=a.return,f===null)throw Error(l(341));f.lanes|=n,p=f.alternate,p!==null&&(p.lanes|=n),gl(f,n,t),f=a.sibling}else f=a.child;if(f!==null)f.return=a;else for(f=a;f!==null;){if(f===t){f=null;break}if(a=f.sibling,a!==null){a.return=f.return,f=a;break}f=f.return}a=f}nt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,ls(t,n),i=Ct(i),s=s(i),t.flags|=1,nt(e,t,s,n),t.child;case 14:return s=t.type,i=Tt(s,t.pendingProps),i=Tt(s.type,i),fu(e,t,s,i,n);case 15:return hu(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),Jr(e,t),t.tag=1,lt(s)?(e=!0,Ur(t)):e=!1,ls(t,n),ru(t,s,i),Dl(t,s,i,n),Fl(null,t,s,!0,e,n);case 19:return Su(e,t,n);case 22:return mu(e,t,n)}throw Error(l(156,t.tag))};function $u(e,t){return xa(e,t)}function sf(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,n,s){return new sf(e,t,n,s)}function na(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rf(e){if(typeof e=="function")return na(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xe)return 11;if(e===oe)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ci(e,t,n,s,i,a){var f=2;if(s=e,typeof e=="function")na(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case q:return Mn(n.children,i,a,t);case A:f=8,i|=8;break;case re:return e=xt(12,n,t,i|2),e.elementType=re,e.lanes=a,e;case ne:return e=xt(13,n,t,i),e.elementType=ne,e.lanes=a,e;case H:return e=xt(19,n,t,i),e.elementType=H,e.lanes=a,e;case D:return di(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:f=10;break e;case ye:f=9;break e;case xe:f=11;break e;case oe:f=14;break e;case V:f=16,s=null;break e}throw Error(l(130,e==null?e:typeof e,""))}return t=xt(f,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function Mn(e,t,n,s){return e=xt(7,e,s,t),e.lanes=n,e}function di(e,t,n,s){return e=xt(22,e,s,t),e.elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function sa(e,t,n){return e=xt(6,e,null,t),e.lanes=n,e}function ra(e,t,n){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lf(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pi(0),this.expirationTimes=Pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ia(e,t,n,s,i,a,f,p,g){return e=new lf(e,t,n,p,g),t===1?(t=1,a===!0&&(t|=8)):t=0,a=xt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vl(a),e}function af(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Qu(e){if(!e)return an;e=e._reactInternals;e:{if(Tn(e)!==e||e.tag!==1)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(l(171))}if(e.tag===1){var n=e.type;if(lt(n))return Co(e,n,t)}return t}function Gu(e,t,n,s,i,a,f,p,g){return e=ia(n,s,!0,e,i,a,f,p,g),e.context=Qu(null),n=e.current,s=st(),i=mn(n),a=Qt(s,i),a.callback=t??null,cn(n,a,i),e.current.lanes=i,ks(e,i,s),ut(e,s),e}function fi(e,t,n,s){var i=t.current,a=st(),f=mn(i);return n=Qu(n),t.context===null?t.context=n:t.pendingContext=n,t=Qt(a,f),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=cn(i,t,f),e!==null&&(bt(e,i,f,a),Vr(e,i,f)),f}function hi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function la(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}function of(){return null}var Zu=typeof reportError=="function"?reportError:function(e){console.error(e)};function aa(e){this._internalRoot=e}mi.prototype.render=aa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));fi(e,t,null,null)},mi.prototype.unmount=aa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){fi(null,e,null,null)}),t[Ht]=null}};function mi(e){this._internalRoot=e}mi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pa();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tn.length&&t!==0&&t<tn[n].priority;n++);tn.splice(n,0,e),n===0&&La(e)}};function oa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yu(){}function uf(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var E=hi(f);a.call(E)}}var f=Gu(t,s,e,0,null,!1,!1,"",Yu);return e._reactRootContainer=f,e[Ht]=f.current,Fs(e.nodeType===8?e.parentNode:e),Fn(),f}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var p=s;s=function(){var E=hi(g);p.call(E)}}var g=ia(e,0,!1,null,null,!1,!1,"",Yu);return e._reactRootContainer=g,e[Ht]=g.current,Fs(e.nodeType===8?e.parentNode:e),Fn(function(){fi(t,g,n,s)}),g}function gi(e,t,n,s,i){var a=n._reactRootContainer;if(a){var f=a;if(typeof i=="function"){var p=i;i=function(){var g=hi(f);p.call(g)}}fi(t,f,e,i)}else f=uf(n,t,e,i,s);return hi(f)}Ra=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ss(t.pendingLanes);n!==0&&(Di(t,n|1),ut(t,ze()),(Ne&6)===0&&(ds=ze()+500,on()))}break;case 13:Fn(function(){var s=$t(e,1);if(s!==null){var i=st();bt(s,e,1,i)}}),la(e,1)}},Oi=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var n=st();bt(t,e,134217728,n)}la(e,134217728)}},ba=function(e){if(e.tag===13){var t=mn(e),n=$t(e,t);if(n!==null){var s=st();bt(n,e,t,s)}la(e,t)}},Pa=function(){return _e},Da=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}},we=function(e,t,n){switch(t){case"input":if(xn(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=Or(s);if(!i)throw Error(l(90));sr(s),xn(s,i)}}}break;case"textarea":ir(e,n);break;case"select":t=n.value,t!=null&&Mt(e,!!n.multiple,t,!1)}},cr=Jl,ya=Fn;var cf={usingClientEntryPoint:!1,Events:[Ms,Xn,Or,Te,be,Jl]},Js={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},df={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sa(e),e===null?null:e.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||of,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{mr=yi.inject(df),Dt=yi}catch{}}return ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cf,ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oa(t))throw Error(l(200));return af(e,t,null,n)},ct.createRoot=function(e,t){if(!oa(e))throw Error(l(299));var n=!1,s="",i=Zu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ia(e,1,!1,null,null,n,!1,s,i),e[Ht]=t.current,Fs(e.nodeType===8?e.parentNode:e),new aa(t)},ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=Sa(t),e=e===null?null:e.stateNode,e},ct.flushSync=function(e){return Fn(e)},ct.hydrate=function(e,t,n){if(!pi(t))throw Error(l(200));return gi(null,e,t,!0,n)},ct.hydrateRoot=function(e,t,n){if(!oa(e))throw Error(l(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",f=Zu;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=Gu(t,null,e,1,n??null,i,!1,a,f),e[Ht]=t.current,Fs(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new mi(t)},ct.render=function(e,t,n){if(!pi(t))throw Error(l(200));return gi(null,e,t,!1,n)},ct.unmountComponentAtNode=function(e){if(!pi(e))throw Error(l(40));return e._reactRootContainer?(Fn(function(){gi(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1},ct.unstable_batchedUpdates=Jl,ct.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!pi(n))throw Error(l(200));if(e==null||e._reactInternals===void 0)throw Error(l(38));return gi(e,t,n,!1,s)},ct.version="18.3.1-next-f1338f8080-20240426",ct}var rc;function Sf(){if(rc)return da.exports;rc=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(r){console.error(r)}}return d(),da.exports=Cf(),da.exports}var ic;function kf(){if(ic)return wi;ic=1;var d=Sf();return wi.createRoot=d.createRoot,wi.hydrateRoot=d.hydrateRoot,wi}var xf=kf();const Nf=mc(xf),yt=y.createContext();function Ef(d,r){d.terminate=function(){const l=()=>{};this.onerror=l,this.onmessage=l,this.onopen=l;const o=new Date,c=Math.random().toString().substring(2,8),h=this.onclose;this.onclose=m=>{const w=new Date().getTime()-o.getTime();r(`Discarded socket (#${c})  closed after ${w}ms, with code/reason: ${m.code}/${m.reason}`)},this.close(),h?.call(d,{code:4001,reason:`Quick discarding socket (#${c}) without waiting for the shutdown sequence.`,wasClean:!1})}}const tr={LF:`
`,NULL:"\0"};class vn{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(r){const{command:l,headers:o,body:c,binaryBody:h,escapeHeaderValues:m,skipContentLengthHeader:w}=r;this.command=l,this.headers=Object.assign({},o||{}),h?(this._binaryBody=h,this.isBinaryBody=!0):(this._body=c||"",this.isBinaryBody=!1),this.escapeHeaderValues=m||!1,this.skipContentLengthHeader=w||!1}static fromRawFrame(r,l){const o={},c=h=>h.replace(/^\s+|\s+$/g,"");for(const h of r.headers.reverse()){h.indexOf(":");const m=c(h[0]);let w=c(h[1]);l&&r.command!=="CONNECT"&&r.command!=="CONNECTED"&&(w=vn.hdrValueUnEscape(w)),o[m]=w}return new vn({command:r.command,headers:o,binaryBody:r.binaryBody,escapeHeaderValues:l})}toString(){return this.serializeCmdAndHeaders()}serialize(){const r=this.serializeCmdAndHeaders();return this.isBinaryBody?vn.toUnit8Array(r,this._binaryBody).buffer:r+this._body+tr.NULL}serializeCmdAndHeaders(){const r=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const l of Object.keys(this.headers||{})){const o=this.headers[l];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?r.push(`${l}:${vn.hdrValueEscape(`${o}`)}`):r.push(`${l}:${o}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&r.push(`content-length:${this.bodyLength()}`),r.join(tr.LF)+tr.LF+tr.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const r=this.binaryBody;return r?r.length:0}static sizeOfUTF8(r){return r?new TextEncoder().encode(r).length:0}static toUnit8Array(r,l){const o=new TextEncoder().encode(r),c=new Uint8Array([0]),h=new Uint8Array(o.length+l.length+c.length);return h.set(o),h.set(l,o.length),h.set(c,o.length+l.length),h}static marshall(r){return new vn(r).serialize()}static hdrValueEscape(r){return r.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(r){return r.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const lc=0,Ci=10,Si=13,jf=58;class Tf{constructor(r,l){this.onFrame=r,this.onIncomingPing=l,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(r,l=!1){let o;if(typeof r=="string"?o=this._encoder.encode(r):o=new Uint8Array(r),l&&o[o.length-1]!==0){const c=new Uint8Array(o.length+1);c.set(o,0),c[o.length]=0,o=c}for(let c=0;c<o.length;c++){const h=o[c];this._onByte(h)}}_collectFrame(r){if(r!==lc&&r!==Si){if(r===Ci){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(r)}}_collectCommand(r){if(r!==Si){if(r===Ci){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(r)}}_collectHeaders(r){if(r!==Si){if(r===Ci){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(r)}}_reinjectByte(r){this._onByte(r)}_collectHeaderKey(r){if(r===jf){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(r)}_collectHeaderValue(r){if(r!==Si){if(r===Ci){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(r)}}_setupCollectBody(){const r=this._results.headers.filter(l=>l[0]==="content-length")[0];r?(this._bodyBytesRemaining=parseInt(r[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(r){if(r===lc){this._retrievedBody();return}this._consumeByte(r)}_collectBodyFixedSize(r){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(r)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(r){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",r)}this._initState()}_consumeByte(r){this._token.push(r)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const r=new Uint8Array(this._token);return this._token=[],r}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var wn;(function(d){d[d.CONNECTING=0]="CONNECTING",d[d.OPEN=1]="OPEN",d[d.CLOSING=2]="CLOSING",d[d.CLOSED=3]="CLOSED"})(wn||(wn={}));var Pt;(function(d){d[d.ACTIVE=0]="ACTIVE",d[d.DEACTIVATING=1]="DEACTIVATING",d[d.INACTIVE=2]="INACTIVE"})(Pt||(Pt={}));var ki;(function(d){d[d.LINEAR=0]="LINEAR",d[d.EXPONENTIAL=1]="EXPONENTIAL"})(ki||(ki={}));var nr;(function(d){d.Interval="interval",d.Worker="worker"})(nr||(nr={}));class _f{constructor(r,l=nr.Interval,o){this._interval=r,this._strategy=l,this._debug=o,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(r){this.stop(),this.shouldUseWorker()?this.runWorker(r):this.runInterval(r)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===nr.Worker}runWorker(r){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=l=>r(l.data))}runInterval(r){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const l=Date.now();this._timer=setInterval(()=>{r(Date.now()-l)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class rt{constructor(r){this.versions=r}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(r=>`v${r.replace(".","")}.stomp`)}}rt.V1_0="1.0";rt.V1_1="1.1";rt.V1_2="1.2";rt.default=new rt([rt.V1_2,rt.V1_1,rt.V1_0]);class Rf{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(r,l,o){this._client=r,this._webSocket=l,this._connected=!1,this._serverFrameHandlers={CONNECTED:c=>{this.debug(`connected to server ${c.headers.server}`),this._connected=!0,this._connectedVersion=c.headers.version,this._connectedVersion===rt.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(c.headers),this.onConnect(c)},MESSAGE:c=>{const h=c.headers.subscription,m=this._subscriptions[h]||this.onUnhandledMessage,w=c,C=this,N=this._connectedVersion===rt.V1_2?w.headers.ack:w.headers["message-id"];w.ack=(j={})=>C.ack(N,h,j),w.nack=(j={})=>C.nack(N,h,j),m(w)},RECEIPT:c=>{const h=this._receiptWatchers[c.headers["receipt-id"]];h?(h(c),delete this._receiptWatchers[c.headers["receipt-id"]]):this.onUnhandledReceipt(c)},ERROR:c=>{this.onStompError(c)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=o.debug,this.stompVersions=o.stompVersions,this.connectHeaders=o.connectHeaders,this.disconnectHeaders=o.disconnectHeaders,this.heartbeatIncoming=o.heartbeatIncoming,this.heartbeatOutgoing=o.heartbeatOutgoing,this.splitLargeFrames=o.splitLargeFrames,this.maxWebSocketChunkSize=o.maxWebSocketChunkSize,this.forceBinaryWSFrames=o.forceBinaryWSFrames,this.logRawCommunication=o.logRawCommunication,this.appendMissingNULLonIncoming=o.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=o.discardWebsocketOnCommFailure,this.onConnect=o.onConnect,this.onDisconnect=o.onDisconnect,this.onStompError=o.onStompError,this.onWebSocketClose=o.onWebSocketClose,this.onWebSocketError=o.onWebSocketError,this.onUnhandledMessage=o.onUnhandledMessage,this.onUnhandledReceipt=o.onUnhandledReceipt,this.onUnhandledFrame=o.onUnhandledFrame}start(){const r=new Tf(l=>{const o=vn.fromRawFrame(l,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${o}`),(this._serverFrameHandlers[o.command]||this.onUnhandledFrame)(o)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=l=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const o=l.data instanceof ArrayBuffer?new TextDecoder().decode(l.data):l.data;this.debug(`<<< ${o}`)}r.parseChunk(l.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=l=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(l)},this._webSocket.onerror=l=>{this.onWebSocketError(l)},this._webSocket.onopen=()=>{const l=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),l["accept-version"]=this.stompVersions.supportedVersions(),l["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:l})}}_setupHeartbeat(r){if(r.version!==rt.V1_1&&r.version!==rt.V1_2||!r["heart-beat"])return;const[l,o]=r["heart-beat"].split(",").map(c=>parseInt(c,10));if(this.heartbeatOutgoing!==0&&o!==0){const c=Math.max(this.heartbeatOutgoing,o);this.debug(`send PING every ${c}ms`),this._pinger=new _f(c,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===wn.OPEN&&(this._webSocket.send(tr.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&l!==0){const c=Math.max(this.heartbeatIncoming,l);this.debug(`check PONG every ${c}ms`),this._ponger=setInterval(()=>{const h=Date.now()-this._lastServerActivityTS;h>c*2&&(this.debug(`did not receive server activity for the last ${h}ms`),this._closeOrDiscardWebsocket())},c)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===wn.CONNECTING||this._webSocket.readyState===wn.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&Ef(this._webSocket,r=>this.debug(r)),this._webSocket.terminate()}_transmit(r){const{command:l,headers:o,body:c,binaryBody:h,skipContentLengthHeader:m}=r,w=new vn({command:l,headers:o,body:c,binaryBody:h,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:m});let C=w.serialize();if(this.logRawCommunication?this.debug(`>>> ${C}`):this.debug(`>>> ${w}`),this.forceBinaryWSFrames&&typeof C=="string"&&(C=new TextEncoder().encode(C)),typeof C!="string"||!this.splitLargeFrames)this._webSocket.send(C);else{let N=C;for(;N.length>0;){const j=N.substring(0,this.maxWebSocketChunkSize);N=N.substring(this.maxWebSocketChunkSize),this._webSocket.send(j),this.debug(`chunk sent = ${j.length}, remaining = ${N.length}`)}}}dispose(){if(this.connected)try{const r=Object.assign({},this.disconnectHeaders);r.receipt||(r.receipt=`close-${this._counter++}`),this.watchForReceipt(r.receipt,l=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(l)}),this._transmit({command:"DISCONNECT",headers:r})}catch(r){this.debug(`Ignoring error during disconnect ${r}`)}else(this._webSocket.readyState===wn.CONNECTING||this._webSocket.readyState===wn.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(r){const{destination:l,headers:o,body:c,binaryBody:h,skipContentLengthHeader:m}=r,w=Object.assign({destination:l},o);this._transmit({command:"SEND",headers:w,body:c,binaryBody:h,skipContentLengthHeader:m})}watchForReceipt(r,l){this._receiptWatchers[r]=l}subscribe(r,l,o={}){o=Object.assign({},o),o.id||(o.id=`sub-${this._counter++}`),o.destination=r,this._subscriptions[o.id]=l,this._transmit({command:"SUBSCRIBE",headers:o});const c=this;return{id:o.id,unsubscribe(h){return c.unsubscribe(o.id,h)}}}unsubscribe(r,l={}){l=Object.assign({},l),delete this._subscriptions[r],l.id=r,this._transmit({command:"UNSUBSCRIBE",headers:l})}begin(r){const l=r||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:l}});const o=this;return{id:l,commit(){o.commit(l)},abort(){o.abort(l)}}}commit(r){this._transmit({command:"COMMIT",headers:{transaction:r}})}abort(r){this._transmit({command:"ABORT",headers:{transaction:r}})}ack(r,l,o={}){o=Object.assign({},o),this._connectedVersion===rt.V1_2?o.id=r:o["message-id"]=r,o.subscription=l,this._transmit({command:"ACK",headers:o})}nack(r,l,o={}){return o=Object.assign({},o),this._connectedVersion===rt.V1_2?o.id=r:o["message-id"]=r,o.subscription=l,this._transmit({command:"NACK",headers:o})}}class bf{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(r){this._disconnectHeaders=r,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Pt.ACTIVE}_changeState(r){this.state=r,this.onChangeState(r)}constructor(r={}){this.stompVersions=rt.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=ki.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=nr.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Pt.INACTIVE;const l=()=>{};this.debug=l,this.beforeConnect=l,this.onConnect=l,this.onDisconnect=l,this.onUnhandledMessage=l,this.onUnhandledReceipt=l,this.onUnhandledFrame=l,this.onStompError=l,this.onWebSocketClose=l,this.onWebSocketError=l,this.logRawCommunication=!1,this.onChangeState=l,this.connectHeaders={},this._disconnectHeaders={},this.configure(r)}configure(r){Object.assign(this,r),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const r=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Pt.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Pt.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{r()})):r()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const r=this._createWebSocket();this._stompHandler=new Rf(this,r,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:l=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(l)},onDisconnect:l=>{this.onDisconnect(l)},onStompError:l=>{this.onStompError(l)},onWebSocketClose:l=>{this._stompHandler=void 0,this.state===Pt.DEACTIVATING&&this._changeState(Pt.INACTIVE),this.onWebSocketClose(l),this.active&&this._schedule_reconnect()},onWebSocketError:l=>{this.onWebSocketError(l)},onUnhandledMessage:l=>{this.onUnhandledMessage(l)},onUnhandledReceipt:l=>{this.onUnhandledReceipt(l)},onUnhandledFrame:l=>{this.onUnhandledFrame(l)}}),this._stompHandler.start()}_createWebSocket(){let r;if(this.webSocketFactory)r=this.webSocketFactory();else if(this.brokerURL)r=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return r.binaryType="arraybuffer",r}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===ki.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(r={}){const l=r.force||!1,o=this.active;let c;if(this.state===Pt.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Pt.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==wn.CLOSED){const h=this._stompHandler.onWebSocketClose;c=new Promise((m,w)=>{this._stompHandler.onWebSocketClose=C=>{h(C),m()}})}else return this._changeState(Pt.INACTIVE),Promise.resolve();return l?this._stompHandler?.discardWebsocket():o&&this._disposeStompHandler(),c}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(r){this._checkConnection(),this._stompHandler.publish(r)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(r,l){this._checkConnection(),this._stompHandler.watchForReceipt(r,l)}subscribe(r,l,o={}){return this._checkConnection(),this._stompHandler.subscribe(r,l,o)}unsubscribe(r,l={}){this._checkConnection(),this._stompHandler.unsubscribe(r,l)}begin(r){return this._checkConnection(),this._stompHandler.begin(r)}commit(r){this._checkConnection(),this._stompHandler.commit(r)}abort(r){this._checkConnection(),this._stompHandler.abort(r)}ack(r,l,o={}){this._checkConnection(),this._stompHandler.ack(r,l,o)}nack(r,l,o={}){this._checkConnection(),this._stompHandler.nack(r,l,o)}}class At{static RAISED="raised";static LOWERED="lowered"}function It(d,r,l=!1){const o=[...d],c=[];for(;o.length>0;){const h=Pf(o,r);c.push(o[h]),o.splice(h,1)}return l&&c.reverse(),c}function Pf(d,r){for(var l=0,o=r(d[l]),c=1;c<d.length;c++){const m=r(d[c]);if(Array.isArray(m)){for(var h=0;h<m.length&&!(m[h]>o[h]);h++)if(m[h]<o[h]){o=m,l=c;break}}else m<o&&(o=m,l=c)}return l}class Se{static FLEET="FLEET";static PURSUIT="PURSUIT";static from(r){switch(r?.toUpperCase()){case"FLEET":return Se.FLEET;case"PURSUIT":return Se.PURSUIT;default:return null}}}class Zt{static CSCCLUBSTART="CSCCLUBSTART";static RRS26="RRS26";static from(r){switch(r?.toUpperCase()){case"CSCCLUBSTART":return Zt.CSCCLUBSTART;case"RRS26":return Zt.RRS26;default:return null}}}class Df{_race;_signals=[];_prepareForRaceStartSignalHandlers=new Map;_makeRaceStartSignalHandlers=new Map;_clock;constructor(r,l){this.tickHandler=this.tickHandler.bind(this),this.prepareForRaceStartSignal=this.prepareForRaceStartSignal.bind(this),this.makeRaceStartSignal=this.makeRaceStartSignal.bind(this),this._race=r,this._signals=this._generateSignals(r),this._clock=l,l.addTickHandler(this.tickHandler)}tickHandler(){const r=this._clock.getTimeToSecondPrecision();this.prepareForRaceStartSignal(r),this.makeRaceStartSignal(r)}prepareForRaceStartSignal(r){const l=r+6e4;this._prepareForRaceStartSignalHandlers.size>0&&this._signals.some(o=>o.time===l)&&this._prepareForRaceStartSignalHandlers.forEach(o=>o())}makeRaceStartSignal(r){this._makeRaceStartSignalHandlers.size>0&&this._signals.some(l=>l.time===r)&&this._makeRaceStartSignalHandlers.forEach(l=>l())}addPrepareForRaceStartSignalHandler(r){this._prepareForRaceStartSignalHandlers.set(r,r)}removePrepareForRaceStartSignalHandler(r){this._prepareForRaceStartSignalHandlers.delete(r)}addMakeRaceStartSignalHandler(r){this._makeRaceStartSignalHandlers.set(r,r)}removeMakeRaceStartSignalHandler(r){this._makeRaceStartSignalHandlers.delete(r)}getNextRaceToStart(r){return this._race.plannedStartTime>=r?this._race:null}getSignals(){return this._signals}_generateSignals(r){const l=[];let o,c,h,m;switch(r.startType){case Zt.CSCCLUBSTART:o={raise:-6e5,lower:0},c={raise:-3e5,lower:0},h="Start sequence finished",m=null;break;default:o={raise:-3e5,lower:0},c={raise:-24e4,lower:-6e4},h="One minute",m={description:"One long"}}const w={name:r.fleet.name+" Class Flag"},C={name:"Blue Peter"};if(l.push({meaning:"Warning signal",time:r.plannedStartTime.getTime()+o.raise,soundSignal:{description:"One"},visualSignal:{flags:[w],flagsState:At.RAISED}}),l.push({meaning:"Preparatory signal",time:r.plannedStartTime.getTime()+c.raise,soundSignal:{description:"One"},visualSignal:{flags:[C],flagsState:At.RAISED}}),l.push({meaning:h,time:r.plannedStartTime.getTime()+c.lower,soundSignal:m,visualSignal:{flags:[C],flagsState:At.LOWERED}}),l.push({meaning:"Starting signal",time:r.plannedStartTime.getTime(),soundSignal:{description:"One"},visualSignal:{flags:[w],flagsState:At.LOWERED}}),r.type===Se.PURSUIT){const N=It(r.dinghyClasses,(O=>O.portsmouthNumber),!0),j=It(r.fleet.dinghyClasses,(O=>O.portsmouthNumber),!0)[0];N.some(O=>O.name===j.name)||N.unshift(j);const P=N[0].portsmouthNumber,R=r.duration;for(let O=1;O<N.length;O++){let I=Math.ceil((R-R*N[O].portsmouthNumber/P)/1e3)*1e3;l.push({meaning:N[O].name+" start",time:r.plannedStartTime.getTime()+I,soundSignal:{description:"One"}})}}return l}dispose(){this._clock.removeTickHandler(this.tickHandler)}}class Of{_races=[];_raceStartSequences=[];_signals=[];_prepareForRaceStartSignalHandlers=new Map;_makeRaceStartSignalHandlers=new Map;constructor(r,l){this.prepareForRaceStartSignalHandler=this.prepareForRaceStartSignalHandler.bind(this),this.makeRaceStartSignalHandler=this.makeRaceStartSignalHandler.bind(this),this._races=r,this._raceStartSequences=r.map(o=>{const c=new Df(o,l);return c.addPrepareForRaceStartSignalHandler(this.prepareForRaceStartSignalHandler),c.addMakeRaceStartSignalHandler(this.makeRaceStartSignalHandler),c}),this._signals=this._generateSignals(this._raceStartSequences)}prepareForRaceStartSignalHandler(){this._prepareForRaceStartSignalHandlers.size>0&&this._prepareForRaceStartSignalHandlers.forEach(r=>r())}makeRaceStartSignalHandler(){this._makeRaceStartSignalHandlers.size>0&&this._makeRaceStartSignalHandlers.forEach(r=>r())}addPrepareForRaceStartSignalHandler(r){this._prepareForRaceStartSignalHandlers.set(r,r)}removePrepareForRaceStartSignalHandler(r){this._prepareForRaceStartSignalHandlers.delete(r)}addMakeRaceStartSignalHandler(r){this._makeRaceStartSignalHandlers.set(r,r)}removeMakeRaceStartSignalHandler(r){this._makeRaceStartSignalHandlers.delete(r)}getNextRaceToStart(r){const l=[];return this._raceStartSequences.forEach(c=>{const h=c.getNextRaceToStart(r);h!==null&&l.push(h)}),l.toSorted((c,h)=>c-h)[0]}getSignals(){return this._signals}_generateSignals(r){const l=[],o=new Map,c=h=>{const m=h.map(w=>w.name);return m.sort(),m.join("")};return r.forEach(h=>{h.getSignals().forEach(m=>{if(m.visualSignal){const w=c(m.visualSignal.flags);o.has(w)?o.get(w).push(m):o.set(w,[m])}else l.push(m)})}),o.forEach(h=>{if(h.length>2){h.sort((m,w)=>{const C=m.time-w.time;return C===0?m.visualSignal.flagsState===At.RAISED?-1:1:C});for(let m=0;m<h.length-1;m++)if(h[m].time===h[m+1].time){const w=h[m].time,C=h.filter(j=>j.visualSignal.flagsState===At.RAISED&&j.time===w),N=h.filter(j=>j.visualSignal.flagsState===At.LOWERED&&j.time===w);C.length===N.length?(h.splice(m,C.length+N.length),m--):C.length>N.length?h.splice(m,C.length+N.length,C[0]):C.length<N.length&&h.splice(m,C.length+N.length,N[0])}}}),o.forEach(h=>{h.forEach(m=>l.push(m))}),l.sort((h,m)=>h.time-m.time)}dispose(){this._raceStartSequences.forEach(r=>{r.removePrepareForRaceStartSignalHandler(this.prepareForRaceStartSignalHandler),r.removeMakeRaceStartSignalHandler(this.makeRaceStartSignalHandler),r.dispose()})}}const dt=class dt{_startTime;_performanceTimerStartTime;_dateNowPerformanceNowDiff;_tickHandlers=new Map;_ticker;static formatTime(r,l=!1){const o=Intl.DateTimeFormat().resolvedOptions();let c={timeZone:o.timeZone,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return l&&(c={...c,fractionalSecondDigits:3}),new Intl.DateTimeFormat(o.locale,c).format(new Date(r))}static formatDuration(r,l=!1,o=!1){let c=0;l?c=Math.abs(Math.trunc(r/1e3)):c=Math.abs(Math.floor(r/1e3));const h=Math.abs(Math.trunc(c/60)),m=Math.abs(Math.trunc(h/60));let w="";return m>0&&(w=String(m).padStart(2,"0")+":"),w=w+String(h-m*60).padStart(2,"0")+":"+String(c-h*60).padStart(2,"0"),l&&(w+="."+String(Math.abs(r)-c*1e3).padStart(3,"0")),r<0&&!o&&(w="-"+w),w}static formatDurationAsSeconds(r){return Math.floor(r/1e3).toString()}static synchToTime(r){dt._synchOffset=r.getTime()-Date.now(),dt.synchEvent?dt._synchEvent=!1:dt._broadcastChannel.postMessage({message:"synchToTime",body:r})}static now(){return Date.now()+dt._synchOffset}constructor(r=new Date){if(window.Worker){const l=new URL("data:text/javascript;base64,bGV0IHRpY2tlcjsNCmxldCBkYXRlT2Zmc2V0ID0gRGF0ZS5ub3coKSAtIHBlcmZvcm1hbmNlLm5vdygpOw0KDQpmdW5jdGlvbiBzdGFydFRpY2tlcigpIHsNCiAgICAvLyBzeW5jaHJvbmlzZSB0byBzeXN0ZW0gY2xvY2sgc28gdGljayBpcyBldmVyeSB0aW1lIHN5c3RlbSBjbG9jayBzZWNvbmRzIGNoYW5nZQ0KICAgIC8vIHVzaW5nIHNldEludGVydmFsIHdvdWxkIGNyZWF0ZSB0aW1pbmcgY3JlZXA7IGludGVydmFsIGlzIGFsd2F5cyA+IDEwMDAgYnkgYSAncmFuZG9tIGZhY3RvcicNCiAgICAvLyB0aGlzIGFwcHJvYWNoIHJlc3VsdHMgaW4gYW4gYXZlcmFnZSBpbnRlcnZhbCBvZiB+MTAwMCBtaWxsaXNlY29uZHMNCiAgICBjb25zdCBzZXROZXh0VGljayA9IChyZWN1cnNpdmVDYWxsYmFjaykgPT4gew0KICAgICAgICB0aWNrZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgIHBvc3RNZXNzYWdlKG51bGwpOw0KICAgICAgICAgICAgcmVjdXJzaXZlQ2FsbGJhY2socmVjdXJzaXZlQ2FsbGJhY2spOw0KICAgICAgICB9LCAxMDAxIC0gKHBlcmZvcm1hbmNlLm5vdygpICsgZGF0ZU9mZnNldCkgJSAxMDAwKTsNCiAgICB9DQogICAgc2V0TmV4dFRpY2soc2V0TmV4dFRpY2spOw0KfQ0KDQpmdW5jdGlvbiBzdG9wVGlja2VyKCkgew0KICAgIGNsZWFySW50ZXJ2YWwodGlja2VyKTsNCn0NCg0Kb25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHsNCiAgICBzd2l0Y2ggKGV2ZW50LmRhdGEpIHsNCiAgICAgICAgY2FzZSAnc3RhcnQnOg0KICAgICAgICAgICAgc3RhcnRUaWNrZXIoKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdzdG9wJzoNCiAgICAgICAgICAgIHN0b3BUaWNrZXIoKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgY29uc29sZS5sb2coYHRpY2std29ya2VyOiBVbmtub3duIGNvbW1hbmQ6ICR7ZXZlbnQuZGF0YX1gKTsNCiAgICB9DQp9",import.meta.url);this._ticker=new Worker(l),this._ticker.onmessage=()=>{this._tickHandlers.size>0&&this._tickHandlers.forEach(o=>{o()})}}else console.log("clock: A browser that supports web workers is required for clock timer functions to work.");this._startTime=r.getTime(),this._dateNowPerformanceNowDiff=Date.now()-performance.now(),this._performanceTimerStartTime=this._startTime-this._dateNowPerformanceNowDiff}start(){this._ticker.postMessage("start")}stop(){this._ticker.postMessage("stop")}getTime(){return this._startTime+this.getElapsedTime()}getTimeToSecondPrecision(){return Math.floor((this._startTime+this.getElapsedTime())/1e3)*1e3}getElapsedTime(r){const l=performance.now(),o=Date.now(),c=r?this._startTime-r.getTime():0;return l+this._dateNowPerformanceNowDiff<o-2&&(this._dateNowPerformanceNowDiff=o-l,this._performanceTimerStartTime=this._startTime-this._dateNowPerformanceNowDiff),l-this._performanceTimerStartTime+c+dt._synchOffset}addTickHandler(r){this._tickHandlers.set(r,r)}removeTickHandler(r){this._tickHandlers.delete(r)}};vi(dt,"_synchOffset",0),vi(dt,"_broadcastChannel",new BroadcastChannel("DinghyRacingClock")),vi(dt,"_synchEvent",!1),dt._broadcastChannel.onmessage=({data:r})=>{switch(r.message){case"synchToTime":dt._synchEvent=!0,dt.synchToTime(r.body);break}};let qe=dt;class Le{httpRootURL;wsRootURL;stompClient;raceUpdateCallbacks=new Map;raceEntryLapsUpdateCallbacks=new Map;entryUpdateCallbacks=new Map;competitorCreationCallbacks=new Set;dinghyCreationCallbacks=new Set;dinghyClassCreationCallbacks=new Set;dinghyClassUpdateCallbacks=new Map;fleetCreationCallbacks=new Set;fleetUpdateCallbacks=new Map;clock=new qe;entryResultMap=new Map;raceResultMap=new Map;static competitorTemplate(){return{name:"",url:""}}static dinghyClassTemplate(){return{name:"",crewSize:1,portsmouthNumber:1e3,externalName:"",url:""}}static dinghyTemplate(){return{sailNumber:"",dinghyClass:Le.dinghyClassTemplate(),url:""}}static raceTemplate(){return{name:"",plannedStartTime:null,fleet:Le.fleetTemplate(),type:null,startType:null,duration:0,plannedLaps:null,lapsSailed:null,lapForecast:null,lastLapTime:null,averageLapTime:null,clock:null,dinghyClasses:[],url:""}}static entryTemplate(){return{race:Le.raceTemplate(),helm:Le.competitorTemplate(),crew:null,dinghy:Le.dinghyTemplate(),laps:[],sumOfLapTimes:0,correctedTime:0,onLastLap:!1,finishedRace:!1,scoringAbbreviation:null,position:null,url:"",metadata:null}}static lapTemplate(){return{number:null,time:0}}static crewTemplate(){return{helm:null,mate:null}}static fleetTemplate(){return{name:"",dinghyClasses:[],url:""}}constructor(r,l){if(this.handleCompetitorCreation=this.handleCompetitorCreation.bind(this),this.handleDinghyCreation=this.handleDinghyCreation.bind(this),this.handleRaceUpdate=this.handleRaceUpdate.bind(this),this.handleRaceEntryLapsUpdate=this.handleRaceEntryLapsUpdate.bind(this),this.handleEntryUpdate=this.handleEntryUpdate.bind(this),this.handleDinghyClassCreation=this.handleDinghyClassCreation.bind(this),this.handleDinghyClassUpdate=this.handleDinghyClassUpdate.bind(this),this.handleFleetCreation=this.handleFleetCreation.bind(this),this.handleFleetUpdate=this.handleFleetUpdate.bind(this),this.getStartSequence=this.getStartSequence.bind(this),!r)throw new Error("An HTTP root URL is required when creating an instance of DinghyRacingModel");if(!l)throw new Error("A WebSocket root URL is required when creating an instance of DinghyRacingModel");this.httpRootURL=r,this.wsRootURL=l,this.stompClient=new bf({brokerURL:l}),this.stompClient.onStompError=o=>{console.error(o)},this.stompClient.onConnect=()=>{this.stompClient.subscribe("/topic/createCompetitor",this.handleCompetitorCreation),this.stompClient.subscribe("/topic/createDinghy",this.handleDinghyCreation),this.stompClient.subscribe("/topic/createDinghyClass",this.handleDinghyClassCreation),this.stompClient.subscribe("/topic/createFleet",this.handleFleetCreation),this.stompClient.subscribe("/topic/updateRace",this.handleRaceUpdate),this.stompClient.subscribe("/topic/updateRaceEntryLaps",this.handleRaceEntryLapsUpdate),this.stompClient.subscribe("/topic/updateEntry",this.handleEntryUpdate),this.stompClient.subscribe("/topic/deleteEntry",this.handleEntryUpdate),this.stompClient.subscribe("/topic/updateDinghyClass",this.handleDinghyClassUpdate),this.stompClient.subscribe("/topic/updateFleet",this.handleFleetUpdate)},this.stompClient.activate(),this.clock.start()}registerCompetitorCreationCallback(r){this.competitorCreationCallbacks.add(r)}unregisterCompetitorCreationCallback(r){this.competitorCreationCallbacks.delete(r)}handleCompetitorCreation(){this.competitorCreationCallbacks.forEach(r=>r())}registerDinghyCreationCallback(r){this.dinghyCreationCallbacks.add(r)}unregisterDinghyCreationCallback(r){this.dinghyCreationCallbacks.delete(r)}handleDinghyCreation(){this.dinghyCreationCallbacks.forEach(r=>r())}registerRaceUpdateCallback(r,l){this.raceUpdateCallbacks.has(r)?this.raceUpdateCallbacks.get(r).add(l):this.raceUpdateCallbacks.set(r,new Set([l]))}unregisterRaceUpdateCallback(r,l){this.raceUpdateCallbacks.has(r)&&this.raceUpdateCallbacks.get(r).delete(l)}handleRaceUpdate(r){this.raceUpdateCallbacks.has(r.body)&&this.raceUpdateCallbacks.get(r.body).forEach(l=>l())}registerRaceEntryLapsUpdateCallback(r,l){this.raceEntryLapsUpdateCallbacks.has(r)?this.raceEntryLapsUpdateCallbacks.get(r).add(l):this.raceEntryLapsUpdateCallbacks.set(r,new Set([l]))}unregisterRaceEntryLapsUpdateCallback(r,l){this.raceEntryLapsUpdateCallbacks.has(r)&&this.raceEntryLapsUpdateCallbacks.get(r).delete(l)}handleRaceEntryLapsUpdate(r){this.raceEntryLapsUpdateCallbacks.has(r.body)&&this.raceEntryLapsUpdateCallbacks.get(r.body).forEach(l=>l())}registerEntryUpdateCallback(r,l){this.entryUpdateCallbacks.has(r)?this.entryUpdateCallbacks.get(r).add(l):this.entryUpdateCallbacks.set(r,new Set([l]))}unregisterEntryUpdateCallback(r,l){this.entryUpdateCallbacks.has(r)&&this.entryUpdateCallbacks.get(r).delete(l)}handleEntryUpdate(r){this.entryUpdateCallbacks.has(r.body)&&this.entryUpdateCallbacks.get(r.body).forEach(l=>l())}registerDinghyClassCreationCallback(r){this.dinghyClassCreationCallbacks.add(r)}unregisterDinghyClassCreationCallback(r){this.dinghyClassCreationCallbacks.delete(r)}handleDinghyClassCreation(){this.dinghyClassCreationCallbacks.forEach(r=>r())}registerDinghyClassUpdateCallback(r,l){this.dinghyClassUpdateCallbacks.has(r)?this.dinghyClassUpdateCallbacks.get(r).add(l):this.dinghyClassUpdateCallbacks.set(r,new Set([l]))}unregisterDinghyClassUpdateCallback(r,l){this.dinghyClassUpdateCallbacks.has(r)&&this.dinghyClassUpdateCallbacks.get(r).delete(l)}handleDinghyClassUpdate(r){this.dinghyClassUpdateCallbacks.has(r.body)&&this.dinghyClassUpdateCallbacks.get(r.body).forEach(l=>l())}registerFleetCreationCallback(r){this.fleetCreationCallbacks.add(r)}unregisterFleetCreationCallback(r){this.fleetCreationCallbacks.delete(r)}handleFleetCreation(){this.fleetCreationCallbacks.forEach(r=>r())}registerFleetUpdateCallback(r,l){this.fleetUpdateCallbacks.has(r)?this.fleetUpdateCallbacks.get(r).add(l):this.fleetUpdateCallbacks.set(r,new Set([l]))}unregisterFleetUpdateCallback(r,l){this.fleetUpdateCallbacks.has(r)&&this.fleetUpdateCallbacks.get(r).delete(l)}handleFleetUpdate(r){this.fleetUpdateCallbacks.has(r.body)&&this.fleetUpdateCallbacks.get(r.body).forEach(l=>l())}async addLap(r,l){const o=r.laps.length+1;return this.update(r.url+"/addLap",{number:o,time:l/1e3})}async removeLap(r,l){return this.update(r.url+"/removeLap",l)}async updateLap(r,l){const o=r.laps.length;return this.update(r.url+"/updateLap",{number:o,time:l/1e3})}async createCompetitor(r){const l=await this.create("competitors",r);return l.success?Promise.resolve({success:!0,domainObject:this._convertCompetitorHALToCompetitor(l.domainObject)}):Promise.resolve(l)}async updateCompetitor(r,l){let o=r.url;if(!r.url){const h=await this.getCompetitorByName(r.name);if(h.success)o=h.domainObject.url;else return Promise.resolve(h)}const c=await this.update(o,{name:l});return c.success?Promise.resolve({success:!0,domainObject:this._convertCompetitorHALToCompetitor(c.domainObject)}):Promise.resolve(c)}async createDinghy(r){let l;if(r.dinghyClass.url)l=r.dinghyClass.url;else{const c=await this.getDinghyClassByName(r.dinghyClass.name);if(!c.success)return Promise.resolve(c);l=c.domainObject.url}const o=await this.create("dinghies",{...r,dinghyClass:l});if(o.success){const c=await this.getDinghyClass(o.domainObject._links.dinghyClass.href);return c.success?Promise.resolve({success:!0,domainObject:{...Le.dinghyTemplate(),sailNumber:o.domainObject.sailNumber,dinghyClass:c.domainObject,url:o.domainObject._links.self.href}}):Promise.resolve(c)}else return Promise.resolve(o)}async createDinghyClass(r){const l=await this.create("dinghyClasses",r);return l.success?Promise.resolve({success:!0,domainObject:this._convertDinghyClassHALToDinghyClass(l.domainObject)}):Promise.resolve(l)}async updateDinghyClass(r){const l=await this.update(r.url,r);return l.success?Promise.resolve({success:!0,domainObject:this._convertDinghyClassHALToDinghyClass(l.domainObject)}):Promise.resolve(l)}async createFleet(r){const l={...r};r.dinghyClasses.length>0&&(l.dinghyClasses=r.dinghyClasses.map(c=>c.url));const o=await this.create("fleets",l);if(o.success){let c=await this.getDinghyClassesByUrl(o.domainObject._links.dinghyClasses.href);return c.success?Promise.resolve({success:!0,domainObject:this._convertFleetHALToFleet(o.domainObject,c.domainObject)}):Promise.resolve(c)}else return Promise.resolve(o)}async getFleet(r){const l=await this.read(r);if(l.success){let o=await this.getDinghyClassesByUrl(l.domainObject._links.dinghyClasses.href);return o.success?Promise.resolve({success:!0,domainObject:this._convertFleetHALToFleet(l.domainObject,o.domainObject)}):Promise.resolve(o)}else return Promise.resolve(l)}async getFleets(r,l){let o=this.httpRootURL+"/fleets?";Number.isInteger(r)&&(o+="page="+r+"&"),Number.isInteger(l)&&(o+="size="+l+"&"),o+="sort=name,asc";const c=await this.read(o);if(c.success){let h=c.domainObject._embedded.fleets;if(!Number.isInteger(r)&&!Number.isInteger(l)&&c.domainObject.page.totalElements>c.domainObject.page.size)return this.getFleets(0,c.domainObject.page.totalElements);const m=await Promise.all(h.map(C=>this.getDinghyClassesByUrl(C._links.dinghyClasses.href))),w=[];for(let C=0;C<h.length;C++)if(m[C].success)w.push(this._convertFleetHALToFleet(h[C],m[C].domainObject));else return Promise.resolve(m[C]);return Promise.resolve({success:!0,domainObject:w})}else return Promise.resolve(c)}async updateFleet(r){const l={...r};r.dinghyClasses.length>0&&(l.dinghyClasses=r.dinghyClasses.map(c=>c.url));const o=await this.update(r.url,l);if(o.success){let c=await this.getDinghyClassesByUrl(o.domainObject._links.dinghyClasses.href);return c.success?Promise.resolve({success:!0,domainObject:this._convertFleetHALToFleet(o.domainObject,c.domainObject)}):Promise.resolve(c)}else return Promise.resolve(o)}async createEntry(r,l,o,c=null){let h,m=[],w=[];if(r.url?m.push(Promise.resolve({success:!0,domainObject:r})):m.push(this.getRaceByNameAndPlannedStartTime(r.name,r.plannedStartTime)),l.url?m.push(Promise.resolve({success:!0,domainObject:l})):m.push(this.getCompetitorByName(l.name)),o.url)m.push(Promise.resolve({success:!0,domainObject:o}));else{if(o.dinghyClass.url)h=o.dinghyClass;else{const C=await this.getDinghyClassByName(o.dinghyClass.name);if(C.success)h=C.domainObject;else return Promise.resolve(C)}m.push(this.getDinghyBySailNumberAndDinghyClass(o.sailNumber,h))}if(c&&!c.url?m.push(this.getCompetitorByName(c.name)):m.push(Promise.resolve({success:!0,domainObject:c})),w=await Promise.all(m),w[0].success&&w[1].success&&w[2].success&&w[3].success){let C;return c?C=await this.create("entries",{race:w[0].domainObject.url,helm:w[1].domainObject.url,dinghy:w[2].domainObject.url,crew:w[3].domainObject.url}):C=await this.create("entries",{race:w[0].domainObject.url,helm:w[1].domainObject.url,dinghy:w[2].domainObject.url}),C.success?this._entryBuilder(C):Promise.resolve(C)}else{let C="";return w.forEach(N=>{N.success||(C&&(C+=`
`),C+=N.message)}),Promise.resolve({success:!1,message:C})}}async updateEntry(r,l,o,c=null){let h,m=[],w=[];if(l.url?m.push(Promise.resolve({success:!0,domainObject:l})):m.push(this.getCompetitorByName(l.name)),o.url)m.push(Promise.resolve({success:!0,domainObject:o}));else{if(o.dinghyClass.url)h=o.dinghyClass;else{const C=await this.getDinghyClassByName(o.dinghyClass.name);if(C.success)h=C.domainObject;else return Promise.resolve(C)}m.push(this.getDinghyBySailNumberAndDinghyClass(o.sailNumber,h))}if(c&&!c.url?m.push(this.getCompetitorByName(c.name)):m.push(Promise.resolve({success:!0,domainObject:c})),w=await Promise.all(m),w[0].success&&w[1].success&&w[2].success){let C;return c?C=await this.update(r.url,{helm:w[0].domainObject.url,dinghy:w[1].domainObject.url,crew:w[2].domainObject.url}):C=await this.update(r.url,{helm:w[0].domainObject.url,dinghy:w[1].domainObject.url,crew:null}),C.success?this._entryBuilder(C):Promise.resolve(C)}else{let C="";return w.forEach(N=>{N.success||(C&&(C+=`
`),C+=N.message)}),Promise.resolve({success:!1,message:C})}}async _entryBuilder(r){const l=await this.getRace(r.domainObject._links.race.href),o=await this.getCompetitor(r.domainObject._links.helm.href),c=await this.getDinghy(r.domainObject._links.dinghy.href),h=await this.getLaps(r.domainObject._links.laps.href);let m=await this.getCompetitor(r.domainObject._links.crew.href);if(!l.success)return Promise.resolve(l);if(!o.success)return Promise.resolve(o);if(!c.success)return Promise.resolve(c);if(!h.success)return Promise.resolve(h);if(!m.success)if(/404/.test(m.message))m={...m,domainObject:null};else return Promise.resolve(m);return Promise.resolve({success:!0,domainObject:this._convertEntryHALtoEntry(r.domainObject,l.domainObject,o.domainObject,c.domainObject,m.domainObject,h.domainObject,null)})}async withdrawEntry(r){return this.delete(r.url)}async updateEntryPosition(r,l){let o="";return r.race.url||(o+="The race URL is required to update an entry position."),r.url||(o!==""&&(o+="/n"),o+="An entry with a URL is required to update an entry position."),o!==""?Promise.resolve({success:!1,message:o}):this.update(r.race.url+"/updateEntryPosition?entry="+r.url+"&position="+l)}async createRace(r){const l={...r,fleet:r.fleet.url,duration:r.duration/1e3},o=await this.create("races",l);if(o.success){let c=await this.getFleet(o.domainObject._links.fleet.href);return c.success?Promise.resolve({success:!0,domainObject:this._convertRaceHALToRace(o.domainObject,c.domainObject)}):Promise.resolve(c)}else return Promise.resolve(o)}async getCompetitor(r){const l=await this.read(r);return l.success?Promise.resolve({success:!0,domainObject:this._convertCompetitorHALToCompetitor(l.domainObject)}):Promise.resolve(l)}async getCompetitors(r,l){const o=Number.isInteger(r),c=Number.isInteger(l);let h=this.httpRootURL+"/competitors?sort=name,asc";o&&(h+="&page="+r),c&&(h+="&size="+l);const m=await this.read(h);if(m.success){if(!o&&!c&&m.domainObject.page.totalElements>m.domainObject.page.size)return this.getCompetitors(0,m.domainObject.page.totalElements);const C=m.domainObject._embedded.competitors.map(N=>({...Le.competitorTemplate(),name:N.name,url:N._links.self.href}));return Promise.resolve({success:!0,domainObject:C})}else return Promise.resolve(m)}async getCrewsByDinghy(r){let l=[];if(!r||!r?.url)return Promise.resolve({success:!1,message:"Cannot retrieve dinghy crews without URL for dinghy."});const o=this.httpRootURL+"/crews/search/findCrewsByDinghy?dinghy="+r.url,c=await this.read(o);if(!c.success)return Promise.resolve(c);if(c.domainObject._embedded&&(l=c.domainObject._embedded.crews),l.length===0)return Promise.resolve({success:!0,domainObject:[]});const h=[];for(const m of l){const w={...Le.crewTemplate()};w.helm=m.helm?this._convertCompetitorHALToCompetitor(m.helm):null,w.mate=m.mate?this._convertCompetitorHALToCompetitor(m.mate):null,h.push(w)}return Promise.resolve({success:!0,domainObject:h})}getClock(){return this.clock}async getDinghy(r){const l=await this.read(r);if(l.success){const o=await this.getDinghyClass(l.domainObject._links.dinghyClass.href);return o.success?Promise.resolve({success:!0,domainObject:{...Le.dinghyTemplate(),sailNumber:l.domainObject.sailNumber,dinghyClass:o.domainObject,url:l.domainObject._links.self.href}}):Promise.resolve(o)}else return Promise.resolve(l)}async getDinghies(r,l,o){let c;r?c=this.httpRootURL+"/dinghies/search/findByDinghyClass?dinghyClass="+r.url:c=this.httpRootURL+"/dinghies",(Number.isInteger(l)||Number.isInteger(o))&&(r?c+="&":c+="?"),Number.isInteger(l)&&(c+="page="+l),Number.isInteger(o)&&(Number.isInteger(l)&&(c+="&"),c+="size="+o);const h=await this.read(c);if(h.success){if(!Number.isInteger(l)&&!Number.isInteger(o)&&h.domainObject.page.totalElements>h.domainObject.page.size)return this.getDinghies(r,0,h.domainObject.page.totalElements);const m=h.domainObject._embedded.dinghies,w=m.map(j=>j._links.dinghyClass.href),C=await Promise.all(w.map(j=>this.read(j))),N=[];for(let j=0;j<m.length;j++){const P=C[j].success?this._convertDinghyClassHALToDinghyClass(C[j].domainObject):null;N.push({sailNumber:m[j].sailNumber,dinghyClass:P,url:m[j]._links.self.href})}return Promise.resolve({success:!0,domainObject:N})}else return Promise.resolve(h)}async getDinghiesBySailNumber(r,l,o){let c=this.httpRootURL+"/dinghies/search/findBySailNumber?sailNumber="+r;Number.isInteger(l)&&(c+="page="+l),Number.isInteger(o)&&(Number.isInteger(l)&&(c+="&"),c+="size="+o);const h=await this.read(c);if(h.success){if(!Number.isInteger(l)&&!Number.isInteger(o)&&h.domainObject.page.totalElements>h.domainObject.page.size)return this.getDinghiesBySailNumber(r,0,h.domainObject.page.totalElements);const m=h.domainObject._embedded.dinghies,w=m.map(j=>j._links.dinghyClass.href),C=await Promise.all(w.map(j=>this.read(j))),N=[];for(let j=0;j<m.length;j++){const P=C[j].success?this._convertDinghyClassHALToDinghyClass(C[j].domainObject):null;N.push({sailNumber:m[j].sailNumber,dinghyClass:P,url:m[j]._links.self.href})}return Promise.resolve({success:!0,domainObject:N})}else return Promise.resolve(h)}async getDinghyBySailNumberAndDinghyClass(r,l){const o=this.httpRootURL+"/dinghies/search/findBySailNumberAndDinghyClass?sailNumber="+r+"&dinghyClass="+l.url,c=await this.read(o);if(c.success){const h={sailNumber:c.domainObject.sailNumber,dinghyClass:l,url:c.domainObject._links.self.href};return Promise.resolve({success:!0,domainObject:h})}else return Promise.resolve(c)}async getDinghyClass(r){const l=await this.read(r);return l.success?Promise.resolve({success:!0,domainObject:this._convertDinghyClassHALToDinghyClass(l.domainObject)}):Promise.resolve(l)}async getDinghyClassByName(r){return this.getDinghyClass(this.httpRootURL+"/dinghyClasses/search/findByName?name="+r)}async getSlowestDinghyClass(){return this.getDinghyClass(this.httpRootURL+"/dinghyClasses/search/findTopByOrderByPortsmouthNumberDesc")}async getDinghyClasses(r,l){let o=this.httpRootURL+"/dinghyClasses?";Number.isInteger(r)&&(o+="page="+r+"&"),Number.isInteger(l)&&(o+="size="+l+"&"),o+="sort=name,asc";const c=await this.read(o);if(c.success){let h=c.domainObject._embedded.dinghyClasses;if(!Number.isInteger(r)&&!Number.isInteger(l)&&c.domainObject.page.totalElements>c.domainObject.page.size)return this.getDinghyClasses(0,c.domainObject.page.totalElements);const m=h.map(w=>this._convertDinghyClassHALToDinghyClass(w));return Promise.resolve({success:!0,domainObject:m})}else return Promise.resolve(c)}async getDinghyClassesByUrl(r){const l=await this.read(r);if(l.success){const o=l.domainObject._embedded.dinghyClasses.map(c=>this._convertDinghyClassHALToDinghyClass(c));return Promise.resolve({success:!0,domainObject:o})}else return Promise.resolve(l)}async getEntry(r){const l=await this.read(r);if(l.success){if(this.entryResultMap.has(r)&&this.entryResultMap.get(r).eTag===l.eTag)return Promise.resolve(this.entryResultMap.get(r));{const o=[];o.push(this.getRace(l.domainObject._links.race.href)),o.push(this.getCompetitor(l.domainObject._links.helm.href)),o.push(this.getDinghy(l.domainObject._links.dinghy.href)),o.push(this.getCompetitor(l.domainObject._links.crew.href)),o.push(this.getLaps(l.domainObject._links.laps.href));const c=await Promise.all(o);if(!c[0].success)return Promise.resolve(c[0]);if(!c[1].success)return Promise.resolve(c[1]);if(!c[2].success)return Promise.resolve(c[3]);if(!c[3].success)if(/404/.test(c[3].message))c[3]={...c[3],domainObject:null};else return Promise.resolve(c[3]);if(!c[4].success)return Promise.resolve(c[4]);const m={success:!0,domainObject:this._convertEntryHALtoEntry(l.domainObject,c[0].domainObject,c[1].domainObject,c[2].domainObject,c[3].domainObject,c[4].domainObject,l.eTag?{eTag:l.eTag}:null),eTag:l.eTag};return m.eTag&&this.entryResultMap.set(r,m),Promise.resolve(m)}}else return Promise.resolve(l)}async getEntriesByRace(r){if(!r.url)return Promise.resolve({success:!1,message:"Cannot retrieve race entries without URL for race."});const l=r.url+"/signedUp",o=await this.read(l);if(!o.success)return Promise.resolve(o);const c=o.domainObject._embedded.entries;if(c.length===0)return Promise.resolve({success:!0,domainObject:[]});const h=[];c.forEach(C=>{h.push(this.getEntry(C._links.self.href))});const m=await Promise.all(h),w=[];for(const C of m){if(!C.success)return Promise.resolve(C);w.push(C.domainObject)}return Promise.resolve({success:!0,domainObject:w})}async getLaps(r){const l=await this.read(r);if(!l.success)return l;const o=l.domainObject._embedded.laps;if(o.length===0)return Promise.resolve({success:!0,domainObject:[]});const c=o.map(h=>({...Le.lapTemplate,number:h.number,time:this.convertISO8601DurationToMilliseconds(h.time)}));return Promise.resolve({success:!0,domainObject:c})}async getRace(r){const l=await this.read(r);if(l.success){if(this.raceResultMap.has(r)&&this.raceResultMap.get(r).eTag===l.eTag)return Promise.resolve(this.raceResultMap.get(r));{let o=await this.getFleet(l.domainObject._links.fleet.href);if(o.success){const h={success:!0,domainObject:this._convertRaceHALToRace(l.domainObject,o.domainObject),eTag:l.eTag};return h.eTag&&this.raceResultMap.set(r,h),Promise.resolve(h)}else return Promise.resolve(o)}}else return Promise.resolve(l)}async getRacesOnOrAfterTime(r,l,o){const c=this.httpRootURL+"/races/search/findByPlannedStartTimeGreaterThanEqual?time="+r.toISOString();return this.getRacesFromURL(c,l,o)}async getRacesBetweenTimes(r,l,o,c,h){const m=this.httpRootURL+"/races/search/findByPlannedStartTimeBetween?startTime="+r.toISOString()+"&endTime="+l.toISOString();return this.getRacesFromURL(m,o,c,h)}async getRacesBetweenTimesForType(r,l,o,c,h,m){const w=this.httpRootURL+"/races/search/findByPlannedStartTimeBetweenAndTypeEquals?startTime="+r.toISOString()+"&endTime="+l.toISOString()+"&type="+o;return this.getRacesFromURL(w,c,h,m)}async getRacesFromURL(r,l,o,c){const h=Number.isInteger(l),m=Number.isInteger(o),w=c!=null,C=/\?/.test(r);(h||m||w)&&!C&&(r+="?"),h&&(C?r+="&page="+l:r+="page="+l),m&&(C||h?r+="&size="+o:r+="size="+o),w&&(C||h||m?r+="&sort="+c.by+","+(c.order||"ASC"):r+="sort="+c.by+","+(c.order||"ASC"));const N=await this.read(r);if(N.success){if(!h&&!m&&N.domainObject.page.totalElements>N.domainObject.page.size)return this.getRacesFromURL(r,0,N.domainObject.page.totalElements);const j=N.domainObject._embedded.races,P=j.map(I=>I._links.fleet.href),R=await Promise.all(P.map(I=>this.getFleet(I))),O=[];for(let I=0;I<j.length;I++)O.push(this._convertRaceHALToRace(j[I],R[I].domainObject));return Promise.resolve({success:!0,domainObject:O})}else return Promise.resolve(N)}async getRaceByNameAndPlannedStartTime(r,l){const o=this.rootUrl+"races/search?name="+r+"&time="+l.toISOString();return this.getRace(o)}async updateRacePlannedLaps(r,l){let o;return r.url?o={success:!0,domainObject:r}:o=await this.getRaceByNameAndPlannedStartTime(r.name,r.plannedStartTime),o.success?this.update(o.domainObject.url,{plannedLaps:l}):o}async getStartSequence(r,l){let o;if(l===Se.PURSUIT&&r.some(h=>h.fleet.dinghyClasses.length===0)){const h=await this.getSlowestDinghyClass();if(h.success)o=h.domainObject;else return Promise.resolve(h)}o&&r.forEach(h=>{h.fleet.dinghyClasses.length===0&&(h.fleet.dinghyClasses=[o])});const c=new Of(r,this.clock);return Promise.resolve({success:!0,domainObject:c})}async startRace(r,l){let o;return r.url?o={success:!0,domainObject:r}:o=await this.getRaceByNameAndPlannedStartTime(r.name,r.plannedStartTime),o.success?this.update(o.domainObject.url,{plannedStartTime:l}):o}async getCompetitorByName(r){const l=this.httpRootURL+"/competitors/search/findByName?name="+r,o=await this.read(l);if(o.success){const c={...Le.competitorTemplate(),name:o.domainObject.name,url:o.domainObject._links.self.href};return Promise.resolve({success:!0,domainObject:c})}else return Promise.resolve(o)}async create(r,l){const o=JSON.stringify(l);return this._processFetch(this.httpRootURL+"/"+r,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/hal+json"},body:o})}async read(r){return this._processFetch(r,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/hal+json"},cache:"no-cache"})}async update(r,l){const o=JSON.stringify(l);return this._processFetch(r,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/hal+json"},body:o})}updateToManyAssociation(r,l){return this._processFetch(r,{method:"PUT",headers:{"Content-Type":"text/uri-list",Accept:"application/hal+json"},body:l})}async delete(r){return this._processFetch(r,{method:"DELETE"})}async _processFetch(r,l){try{let o;const c=await fetch(r,l);try{o=await c.json()}catch(h){h.message==="Unexpected end of JSON input"?o={}:o={message:h.message}}if(c.ok){let h=null;return c.headers.has("ETag")&&(h=c.headers.get("ETag")),Promise.resolve({success:!0,domainObject:o,eTag:h})}else{const h=this._buildClientErrorMessage(c,o);return Promise.resolve({success:!1,message:h})}}catch(o){return Promise.resolve({success:!1,message:o.toString()})}}_buildClientErrorMessage(r,l){if(l.message){if(/constraint \[entry.UK_entry_dinghy_id_race_id\]/.test(l.message))return"A race entry already exists for the selected dinghy.";if(/constraint \[entry.UK_entry_helm_id_race_id\]/.test(l.message))return"A race entry already exists for the selected helm.";if(/constraint \[entry.UK_entry_crew_id_race_id\]/.test(l.message))return"A race entry already exists for the selected crew.";const c=/(could not execute statement \[)(Duplicate entry)( ')([\w -]+)(' for key ')(\w+)(.+)/.exec(l.message);return c&&c[2]==="Duplicate entry"?`HTTP Error: 409 Conflict Message: The ${c[6]} '${c[4]}' already exists; this may be caused by an uppercase/ lowercase difference between existing record and the value entered.`:"HTTP Error: "+r.status+" "+r.statusText+" Message: "+l.message}return"HTTP Error: "+r.status+" "+r.statusText}_convertUriArrayToUriList(r){return r.join(`\r
`)}convertISO8601DurationToMilliseconds(r){const l=/(^|\+)[Pp][Tt](\+?(\d+)[Hh])?(\+?(\d+)[Mm])?(\+?(\d+([.,]\d+)?)[Ss])?$/.exec(r);if(!l)throw new TypeError("Duration not in expected format or range. ISO 8601 format, positive time values only expected.");const o=l[3]?l[3]*36e5:0,c=l[5]?l[5]*6e4:0,h=/,/.test(l[7])?l[7].replace(",","."):l[7],m=h?h*1e3:0;return o+c+m}_convertCompetitorHALToCompetitor(r){return{...Le.competitorTemplate(),name:r?.name,url:r?._links?.self?.href}}_convertDinghyClassHALToDinghyClass(r){return{...Le.dinghyClassTemplate(),name:r.name,crewSize:r.crewSize,portsmouthNumber:r.portsmouthNumber,externalName:r.externalName==null?"":r.externalName,url:r._links.self.href}}_convertEntryHALtoEntry(r,l,o,c,h,m,w=null){return{...Le.entryTemplate(),race:l,helm:o,dinghy:c,laps:m,crew:h,sumOfLapTimes:this.convertISO8601DurationToMilliseconds(r.sumOfLapTimes),correctedTime:r.correctedTime==="PT2562047788015215H30M7S"?0:this.convertISO8601DurationToMilliseconds(r.correctedTime),onLastLap:r.onLastLap,finishedRace:r.finishedRace,scoringAbbreviation:r.scoringAbbreviation,position:r.position,url:r._links.self.href,metadata:w}}_convertRaceHALToRace(r,l){return{...Le.raceTemplate(),name:r.name,plannedStartTime:new Date(r.plannedStartTime+"Z"),fleet:l,duration:this.convertISO8601DurationToMilliseconds(r.duration),type:Se.from(r.type),startType:Zt.from(r.startType),plannedLaps:r.plannedLaps,lapsSailed:r.leadEntry?r.leadEntry.lapsSailed:null,lapForecast:r.lapForecast,lastLapTime:r.leadEntry?this.convertISO8601DurationToMilliseconds(r.leadEntry.lastLapTime):null,averageLapTime:r.leadEntry?this.convertISO8601DurationToMilliseconds(r.leadEntry.averageLapTime):null,dinghyClasses:r.dinghyClasses,clock:this.clock,url:r._links.self.href}}_convertFleetHALToFleet(r,l=[]){return{...Le.fleetTemplate(),name:r.name,dinghyClasses:l,url:r._links.self.href}}}class Lf{static ASCENDING="ASC";static DESCENDING="DESC"}const Cn=y.createContext();function Uf(){const d=y.useContext(yt),r=y.useContext(Cn),[l,o]=y.useState(new Map),[c,h]=y.useState(),[m,w]=y.useState({...Le.dinghyClassTemplate(),portsmouthNumber:1e3}),[C,N]=y.useState(""),[j,P]=y.useState(Date.now()),R=y.useRef(null),O=y.useCallback(()=>{P(Date.now())},[]),I=y.useCallback(()=>{w({...Le.dinghyClassTemplate(),portsmouthNumber:1e3}),h(null),R.current.focus(),N("")},[]);y.useEffect(()=>{let q=!1;return d.getDinghyClasses().then(A=>{if(!q&&!A.success)N(`Unable to load dinghy classes
`+A.message);else if(!q){const re=new Map;A.domainObject.forEach(X=>{re.set(X.url,X)}),o(re)}}),()=>{q=!0,N("")}},[d,j]),y.useEffect(()=>(d.registerDinghyClassCreationCallback(O),()=>{d.unregisterDinghyClassCreationCallback(O)}),[d,O]),y.useEffect(()=>{const q=Array.from(l.values());return q.forEach(A=>{d.registerDinghyClassUpdateCallback(A.url,O)}),()=>{q.forEach(A=>{d.unregisterDinghyClassUpdateCallback(A.url,O)})}},[d,l,O]);async function L(){const q=await r.createDinghyClass(m);q.success?I():N(q.message)}async function G(){const q=await r.updateDinghyClass(m);q.success?I():N(q.message)}function ae(q){q.preventDefault(),L()}function $(q){q.preventDefault(),G()}function K({currentTarget:q}){const A={...l.get(q.id)};h(A),A.portsmouthNumber||(A.portsmouthNumber=1e3),w(A),R.current.focus(),N("")}function te({target:q}){q.name==="crewSize"||q.name==="portsmouthNumber"?w({...m,[q.name]:Number(q.value)}):w({...m,[q.name]:q.value})}function pe(){const q=[];return l.forEach((A,re)=>{q.push(u.jsxs("tr",{id:re,className:"clickable-table-row",onClick:K,children:[u.jsx("td",{id:A.name,children:A.name}),u.jsx("td",{id:A.crewSize,children:A.crewSize}),u.jsx("td",{id:A.portsmouthNumber,children:A.portsmouthNumber}),u.jsx("td",{id:A.externalName,children:A.externalName})]},re))}),q}function de(){return C?"console-error-message":"hidden"}return u.jsxs("div",{className:"w3-container console",children:[u.jsx("h1",{children:"Dinghy Classes"}),u.jsxs("form",{className:"w3-container",action:"",method:"get",children:[u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"dinghy-class-input",className:"w3-col m2",children:"Class Name"}),u.jsx("input",{id:"dinghy-class-input",ref:R,name:"name",className:"w3-half",type:"text",onChange:te,value:m.name,autoFocus:!0})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"crew-size-input",className:"w3-col m2",children:"Crew Size"}),u.jsx("input",{id:"crew-size-input",name:"crewSize",className:"w3-half",type:"number",min:"1",onChange:te,value:m.crewSize})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"portsmouth-number-input",className:"w3-col m2",children:"Portsmouth Number"}),u.jsx("input",{id:"portsmouth-number-input",name:"portsmouthNumber",className:"w3-half",type:"number",onChange:te,value:m.portsmouthNumber})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"external-name-input",className:"w3-col m2",children:"External Name"}),u.jsx("input",{id:"external-name-input",name:"externalName",className:"w3-half",type:"text",onChange:te,value:m.externalName})]}),u.jsx("div",{className:"w3-row",children:u.jsxs("div",{className:"w3-col m8",children:[c?u.jsx("button",{id:"dinghy-class-update-button",className:"w3-right",type:"button",onClick:$,children:"Update"}):u.jsx("button",{id:"dinghy-class-create-button",className:"w3-right",type:"button",onClick:ae,children:"Create"}),u.jsx("button",{id:"dinghy-class-cancel-button",className:"w3-right",type:"button",onClick:I,children:"Cancel"})]})})]}),u.jsx("p",{className:de(),children:C}),u.jsx("div",{className:"scrollable",children:u.jsxs("table",{className:"w3-table w3-striped",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Dinghy Class"}),u.jsx("th",{children:"Crew Size"}),u.jsx("th",{children:"Portsmouth Number"}),u.jsx("th",{children:"External Name"})]})}),u.jsx("tbody",{children:pe()})]})})]})}function Ff({onCreate:d}){const r=y.useContext(yt),[l,o]=gt.useState({...Le.raceTemplate(),plannedStartTime:new Date(Date.now()+60*new Date().getTimezoneOffset()*-1e3).toISOString().substring(0,16),duration:27e5,plannedLaps:5,type:Se.FLEET,startType:Zt.CSCCLUBSTART}),[c,h]=gt.useState({message:""}),[m,w]=gt.useState(new Map),[C,N]=gt.useState([]),[j,P]=y.useState(""),R=y.useRef(null),O=gt.useCallback(()=>{o({...Le.raceTemplate(),plannedStartTime:new Date(Date.now()+60*new Date().getTimezoneOffset()*-1e3).toISOString().substring(0,16),duration:27e5,plannedLaps:5,type:Se.FLEET,startType:Zt.CSCCLUBSTART}),P(""),R.current.focus()},[]);gt.useEffect(()=>{r.getFleets().then(ae=>{if(ae.success){let $=[],K=new Map;$.push(u.jsx("option",{value:null},"blank")),ae.domainObject.forEach(te=>{$.push(u.jsx("option",{value:te.name,children:te.name},te.name)),K.set(te.name,te)}),w(K),N($)}else P(`Unable to load fleets
`+ae.message)})},[r]),gt.useEffect(()=>{c&&c.success&&O(),c&&!c.success&&P(c.message)},[c,O]);async function I(ae){ae.preventDefault();const $={...l,plannedStartTime:new Date(l.plannedStartTime)};h(await d($))}function L({target:ae}){ae.name==="fleet"?ae.value===""?o({...l,fleet:Le.fleetTemplate()}):o({...l,fleet:m.get(ae.value)}):ae.name==="duration"?o({...l,[ae.name]:ae.value*6e4}):ae.name==="plannedLaps"?o({...l,[ae.name]:Number(ae.value)}):o({...l,[ae.name]:ae.value})}function G(){return j?"console-error-message":"hidden"}return u.jsxs("div",{className:"w3-container console",children:[u.jsx("h1",{children:"Create Race"}),u.jsxs("form",{className:"w3-container",action:"",method:"post",children:[u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"race-name-input",className:"w3-col m2",children:"Race Name"}),u.jsx("input",{id:"race-name-input",ref:R,name:"name",className:"w3-half",type:"text",onChange:L,value:l.name,autoFocus:!0})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"race-time-input",className:"w3-col m2",children:"Start Time"}),u.jsx("input",{id:"race-time-input",name:"plannedStartTime",className:"w3-half",type:"datetime-local",onChange:L,value:l.plannedStartTime})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"race-duration-input",className:"w3-col m2",children:"Duration"}),u.jsx("input",{id:"race-duration-input",name:"duration",className:"w3-half",type:"number",onChange:L,value:l.duration/6e4})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"race-laps-input",className:"w3-col m2",children:"Laps"}),u.jsx("input",{id:"race-laps-input",name:"plannedLaps",className:"w3-half",type:"number",min:"1",onChange:L,value:l.plannedLaps?l.plannedLaps:""})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"race-fleet-select",className:"w3-col m2",children:"Fleet"}),u.jsx("select",{id:"race-fleet-select",name:"fleet",className:"w3-half",multiple:!1,onChange:L,value:l.fleet?l.fleet.name:"",children:C})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"race-type-select",className:"w3-col m2",children:"Type"}),u.jsxs("select",{id:"race-type-select",name:"type",className:"w3-half",multiple:!1,onChange:L,value:l.type,children:[u.jsx("option",{value:"FLEET",children:"Fleet"}),u.jsx("option",{value:"PURSUIT",children:"Pursuit"})]})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"race-start-type-select",className:"w3-col m2",children:"Start Sequence"}),u.jsxs("select",{id:"race-start-type-select",name:"startType",className:"w3-half",multiple:!1,onChange:L,value:l.startType,children:[u.jsx("option",{value:"CSCCLUBSTART",children:"10-5-GO"}),u.jsx("option",{value:"RRS26",children:"5-4-1-GO"})]})]}),u.jsx("div",{className:"w3-row",children:u.jsx("div",{className:"w3-col m8",children:u.jsx("button",{id:"race-create-button",className:"w3-right",type:"button",onClick:I,children:"Create"})})})]}),u.jsx("p",{className:G(),children:j})]})}class ac extends gt.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,l){console.error(r,l)}render(){return this.state.hasError?u.jsxs(u.Fragment,{children:[u.jsx("h1",{children:"Error"}),u.jsx("h2",{children:this.state.error.name}),u.jsx("p",{children:this.state.error.message})]}):this.props.children}}function xi({sessionStart:d,sessionEnd:r,onSessionStartChange:l,onSessionEndChange:o}){const[c,h]=y.useState(()=>{let O;return d&&(O=new Date(d.getTime()),O.setMinutes(O.getMinutes()-O.getTimezoneOffset())),O?O.toISOString().substring(0,16):""}),[m,w]=y.useState(()=>{let O;return r&&(O=new Date(r.getTime()),O.setMinutes(O.getMinutes()-O.getTimezoneOffset())),O?O.toISOString().substring(0,16):""}),[C,N]=y.useState();function j(O){if(isNaN(Date.parse(O.target.value)))h(O.target.value),N("");else{const I=new Date(O.target.value);h(O.target.value),N(""),l&&l(I),(m===""||I>new Date(m))&&(w(O.target.value),o&&o(I))}}function P(O){if(isNaN(Date.parse(O.target.value)))w(O.target.value),N("");else{const I=new Date(O.target.value);w(O.target.value),N(""),o&&o(I),(c===""||I<new Date(c))&&(h(O.target.value),N(""),l&&l(I))}}function R(){return C?"console-error-message":"hidden"}return u.jsxs("div",{children:[u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"select-session-start",className:"w3-col m2",children:"Session Start"}),u.jsx("input",{id:"select-session-start",name:"sessionStartTime",type:"datetime-local",className:"w3-col m3",onChange:j,value:c})]}),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"select-session-end",className:"w3-col m2",children:"Session End"}),u.jsx("input",{id:"select-session-end",name:"sessionEndTime",type:"datetime-local",className:"w3-col m3",onChange:P,value:m})]}),u.jsx("p",{className:R(),children:C})]})}function If(d){return d==null?"":d.replace(/\w\S*/g,function(r){return r.charAt(0).toUpperCase()+r.substring(1).toLowerCase()})}function Af({showSignUpForm:d=!1}){const r=y.useContext(yt),[l,o]=y.useState(new Date),[c,h]=y.useState(()=>{const $=new Date(Math.floor(Date.now()/864e5)*864e5+72e6);return $.setMinutes($.getMinutes()+$.getTimezoneOffset()),$}),[m,w]=y.useState(new Map),[C,N]=y.useState(""),[j,P]=y.useState(Date.now()),R=y.useCallback(()=>{P(Date.now())},[]);function O({currentTarget:$}){d&&d(m.get($.id))}y.useEffect(()=>{let $=!1,K=[];return r.getRacesBetweenTimes(l,c).then(te=>{if(te.success&&!$){let pe=new Map;K=te.domainObject,K.forEach(de=>{pe.set(de.url,de),r.registerRaceUpdateCallback(de.url,R)}),w(pe),N("")}else N(`Unable to load races
`+te.message)}),()=>{$=!0,K.forEach(te=>{r.unregisterRaceUpdateCallback(te.url)})}},[r,l,c,j,R]);function I($){o($)}function L($){h($)}function G($){switch($){case Zt.CSCCLUBSTART:return"10-5-Go";case Zt.RRS26:return"5-4-1-Go";default:return""}}function ae(){return C?"console-error-message":"hidden"}return u.jsxs("div",{className:"w3-container console",children:[u.jsx("h1",{children:"Upcoming Races"}),u.jsx("form",{className:"w3-container",children:u.jsx(xi,{sessionStart:l,sessionEnd:c,onSessionStartChange:I,onSessionEndChange:L})}),u.jsx("p",{className:ae(),children:C}),u.jsx("div",{className:"scrollable",children:u.jsxs("table",{className:"w3-table w3-striped",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Race"}),u.jsx("th",{children:"Class"}),u.jsx("th",{children:"Start Time"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Start Type"})]})}),u.jsx("tbody",{children:Array.from(m.values()).sort(($,K)=>$.plannedStartTime.getTime()-K.plannedStartTime.getTime()).map($=>u.jsxs("tr",{className:"clickable-table-row",id:$.url,onClick:O,children:[u.jsx("td",{children:$.name}),u.jsx("td",{children:$.dinghyClass?$.dinghyClass.name:""}),u.jsx("td",{children:$.plannedStartTime.toLocaleString()}),u.jsx("td",{children:If($.type)}),u.jsx("td",{children:G($.startType)})]},$.url))})]})})]})}function Mf({race:d}){const r=y.useContext(yt),l=y.useContext(Cn),[o,c]=y.useState(""),[h,m]=y.useState(""),[w,C]=y.useState(""),[N,j]=y.useState(()=>d.fleet.dinghyClasses.length===1?d.fleet.dinghyClasses[0].name:""),[P,R]=y.useState({message:""}),[O,I]=y.useState(""),[L,G]=y.useState(new Map),[ae,$]=y.useState([]),[K,te]=y.useState(new Map),[pe,de]=y.useState([]),[q,A]=y.useState(new Map),[re,X]=y.useState([]),[ye,xe]=y.useState([]),[ne,H]=y.useState(null),[oe,V]=y.useState(new Map),D=y.useRef(new Map),_=y.useRef(null),Q=y.useRef(null),W=y.useRef(new Map),[S,b]=y.useState(Date.now()),[T,M]=y.useState(Date.now()),[ue,fe]=y.useState(Date.now()),[ke,ve]=y.useState(Date.now()),[Re,Ke]=y.useState(Date.now()),[Sn,sr]=y.useState(0),Yt=y.useCallback(()=>{b(Date.now())},[]),kn=y.useCallback(()=>{M(Date.now())},[]),zn=y.useCallback(()=>{fe(Date.now())},[]),Hn=y.useCallback(()=>{ve(Date.now())},[]),xn=y.useCallback(()=>{Ke(Date.now())},[]),Bn=y.useCallback(()=>{sr(Date.now())},[]),Nn=gt.useCallback(()=>{c(""),m(""),C(""),j(d.fleet.dinghyClasses.length===1?d.fleet.dinghyClasses[0].name:""),I(""),H(null),V(new Map),d.fleet.dinghyClasses.length===1?_.current.focus():Q.current.focus()},[d.fleet.dinghyClasses]),Kt=y.useCallback(({currentTarget:Z})=>{const le=D.current.get(Z.id);H(le),c(le.helm.name),le.crew&&m(le.crew.name),d.dinghyClass||j(le.dinghy.dinghyClass.name),C(le.dinghy.sailNumber),d.fleet.dinghyClasses.length===1?_.current.focus():Q.current.focus(),I("")},[d]),Mt=y.useCallback(async Z=>{const le=await l.withdrawEntry(Z);le.success?I(""):I(le.message)},[l]),Vn=y.useCallback(Z=>{Z.preventDefault(),Z.stopPropagation(),Mt(D.current.get(Z.target.id))},[Mt]);function rr({currentTarget:Z}){const le=oe.get(Z.id);c(le.crew.helm.name),le.crew.mate?m(le.crew.mate.name):m(""),d.dinghyClass||j(le.dinghy.dinghyClass.name),C(le.dinghy.sailNumber),d.fleet.dinghyClasses.length===1?_.current.focus():Q.current.focus(),I("")}y.useEffect(()=>(r.registerRaceUpdateCallback(d.url,Yt),()=>{r.unregisterRaceUpdateCallback(d.url,Yt)}),[r,d,Yt]),y.useEffect(()=>(r.registerCompetitorCreationCallback(zn),()=>{r.unregisterCompetitorCreationCallback(zn)}),[r,zn]),y.useEffect(()=>(r.registerDinghyCreationCallback(Hn),()=>{r.unregisterDinghyCreationCallback(Hn)}),[r,Hn]),y.useEffect(()=>(r.registerDinghyClassCreationCallback(xn),()=>{r.unregisterDinghyClassCreationCallback(xn)}),[r,xn]),y.useEffect(()=>(r.registerFleetUpdateCallback(d.fleet.url,Bn),()=>{r.unregisterFleetUpdateCallback(d.fleet.url,Bn)}),[r,d,Bn]),y.useEffect(()=>{let Z=!1;return r.getCompetitors().then(le=>{if(!Z)if(le.success){const we=new Map,je=[];le.domainObject.forEach(ce=>{we.set(ce.name,ce),je.push(u.jsx("option",{value:ce.name,children:ce.name},ce.name))}),G(we),$(je)}else I(`Unable to load competitors
`+le.message)}),()=>{Z=!0}},[r,ue]),y.useEffect(()=>{const Z=we=>{const je=we.toSorted((Te,be)=>Te.name.localeCompare(be.name));let ce=[],Me=new Map;ce.push(u.jsx("option",{value:""},"")),je.forEach(Te=>{ce.push(u.jsx("option",{value:Te.name,children:Te.name},Te.name)),Me.set(Te.name,Te)}),te(Me),de(ce)};let le=!1;return d.fleet.dinghyClasses.length>0?Z(d.fleet.dinghyClasses):r.getDinghyClasses().then(we=>{le||(we.success?Z(we.domainObject):I(`Unable to load dinghy classes
`+we.message))}),()=>{le=!0}},[r,Re,d.fleet.dinghyClasses]),y.useEffect(()=>{let Z=!1;return Sn&&!Z&&r.getFleet(d.fleet.url).then(le=>{Z||(le.success?(d.fleet=le.domainObject,Ke(Date.now())):I(`Unable to load fleet on fleet update
`+le.message))}),()=>{Z=!0}},[r,d,Sn]),y.useEffect(()=>{let Z=!1,le=d.dinghyClass;return!le&&K.has(N)&&(le=K.get(N)),r.getDinghies(le).then(we=>{if(!Z)if(we.success){let je=[],ce=new Map;je.push(u.jsx("option",{value:""},"")),we.domainObject.forEach(Me=>{je.push(u.jsx("option",{value:Me.sailNumber,children:Me.sailNumber},Me.dinghyClass.name+Me.sailNumber)),ce.set(Me.sailNumber,Me)}),A(ce),X(je)}else I(`Unable to load dinghies
`+we.message)}),()=>{Z=!0}},[r,d.dinghyClass,N,K,ke]),y.useEffect(()=>{let Z=!1;return r.getEntriesByRace(d).then(le=>{if(W.current=new Map,!Z)if(le.success){const we=new Map;le.domainObject.map(ce=>(r.registerEntryUpdateCallback(ce.url,kn),Ei(ce.dinghy.dinghyClass.name),we.set(ce.url,ce))),D.current=we;const je=le.domainObject.map(ce=>u.jsxs("tr",{id:ce.url,className:"clickable-table-row",onClick:Kt,children:[u.jsx("td",{children:ce.helm.name},"helm"),u.jsx("td",{children:ce.dinghy.sailNumber},"sailNumber"),u.jsx("td",{children:ce.dinghy.dinghyClass.name},"dinghyClass"),!d.dinghyClass||d.dinghyClass.crewSize>1?u.jsx("td",{children:ce.crew?ce.crew.name:""},"crew"):null,u.jsx("td",{children:u.jsx("button",{id:ce.url,className:"embedded",type:"button",onClick:Vn,children:"X"})},"withdrawEntry-button")]},ce.helm.name));xe(u.jsxs("table",{className:"w3-table w3-striped",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Helm"},"helm"),u.jsx("th",{children:"Sail Number"},"sailNumber"),u.jsx("th",{children:"Class"},"dinghyClass"),!d.dinghyClass||d.dinghyClass.crewSize>1?u.jsx("th",{children:"Crew"},"crew"):null,u.jsx("th",{},"withdrawEntry-button")]})}),u.jsx("tbody",{children:je})]}))}else I(`Unable to load race entries
`+le.message)}),()=>{Z=!0,D.current.forEach(le=>{r.unregisterEntryUpdateCallback(le.url,kn)})}},[d,r,Kt,S,Vn,T,kn]),y.useEffect(()=>{P&&P.success&&Nn(),P&&!P.success&&I(P.message)},[P,Nn]);function ir(){return d.fleet.dinghyClasses.length===1?d.fleet.dinghyClasses[0].crewSize>1:N?K.get(N).crewSize>1:(d.fleet.dinghyClasses.some(Z=>Z.crewSize>1),!1)}function zt({target:Z}){Z.name==="sailNumber"&&C(Z.value),Z.name==="helm"&&c(Z.value),Z.name==="crew"&&m(Z.value),Z.name==="dinghyClass"&&(j(Z.value),Z.value!==""&&K.get(Z.value).crewSize===1&&m(""))}async function lr(){const Z=[];L.has(o)?Z.push(Promise.resolve({success:!0})):Z.push(l.createCompetitor({name:o,url:""})),q.has(w)?Z.push(Promise.resolve({success:!0})):Z.push(l.createDinghy({sailNumber:w,dinghyClass:K.get(N),url:""})),h&&!L.has(h)?Z.push(l.createCompetitor({name:h,url:""})):Z.push(Promise.resolve({success:!0}));const le=await Promise.all(Z);let we=!0,je="";if(le.forEach(ce=>{ce.success||(je&&(je+="/n"),we=ce.success,je+=ce.message)}),we){const ce=L.has(o)?L.get(o):{name:o,url:""},Me=q.has(w)?q.get(w):{sailNumber:w,dinghyClass:K.get(N),url:""},Te=h?L.has(h)?L.get(h):{name:h,url:""}:null;let be;if(ne||(Te?be=await l.signupToRace(d,ce,Me,Te):be=await l.signupToRace(d,ce,Me)),ne&&(Te?be=await l.updateEntry(ne,ce,Me,Te):be=await l.updateEntry(ne,ce,Me)),be.success)R(be);else if(/HTTP Error: 409.+(\d+)-(\d+)-(\d+).+/.test(be.message)){const cr=be.message.replace(/ '([0-9]{1,2})-([0-9]{1,2})-([0-9]{1,2})' /," ");R({...be,message:cr})}else R(be)}else R({success:!1,message:je})}async function ps(Z){const le=new Map;let we=[],je=!0,ce="";if(d.fleet.dinghyClasses.length===0){const Te=await r.getDinghiesBySailNumber(Z);Te.success?we=we.concat(Te.domainObject):(je=!1,ce&&(ce+="/n"),ce+=`Unable to retrieve previous entries
`+Te.message)}else(await Promise.all(d.fleet.dinghyClasses.map(be=>r.getDinghyBySailNumberAndDinghyClass(Z,be)))).forEach(be=>{be.success?we.push(be.domainObject):/404/.test(be.message)||(je=!1,ce&&(ce+="/n"),ce+=`Unable to retrieve previous entries
`+be.message)});const Me=await Promise.all(we.map(Te=>r.getCrewsByDinghy(Te)));for(let Te=0;Te<we.length;Te++)if(Me[Te].success)for(const be of Me[Te].domainObject)le.set(we[Te].url+be.helm.url+be?.mate?.url,{dinghy:we[Te],crew:be});else je=!1,ce&&(ce+="/n"),ce+=`Unable to retrieve previous entries
`+Me[Te].message;je?(V(le),I("")):I(ce)}function Wn(){const Z=[];return oe.forEach((le,we)=>{Z.push(u.jsxs("tr",{id:we,className:"clickable-table-row",onClick:rr,children:[u.jsx("td",{children:le.dinghy.dinghyClass.name},le.dinghy.dinghyClass.url),u.jsx("td",{children:le.crew.helm.name},le.crew.helm.name),u.jsx("td",{children:le.crew?.mate?.name},le.crew?.mate?.name)]},we))}),Z}function ar(Z){Z.preventDefault(),lr()}function En(){ps(w)}function jn(Z){let le=null;return Z.fleet.dinghyClasses.length!==1&&(le=u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"dinghy-class-select",className:"w3-col m2",children:"Dinghy Class"}),u.jsx("select",{id:"dinghy-class-select",ref:Q,name:"dinghyClass",className:"w3-half",multiple:!1,onChange:zt,value:N,autoFocus:!0,children:pe})]})),le}function Ni(){return d.fleet.dinghyClasses.length===1?u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"helm-input",className:"w3-col m2",children:"Helm's Name"}),u.jsx("input",{id:"helm-input",ref:_,name:"helm",className:"w3-half",list:"competitor-datalist",onChange:zt,value:o,autoFocus:!0})]}):u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"helm-input",className:"w3-col m2",children:"Helm's Name"}),u.jsx("input",{id:"helm-input",ref:_,name:"helm",className:"w3-half",list:"competitor-datalist",onChange:zt,value:o})]})}function or(){let Z=u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"crew-input",className:"w3-col m2",children:"Crew's Name"}),u.jsx("input",{id:"crew-input",name:"crew",className:"w3-half",list:"competitor-datalist",onChange:zt,value:h,disabled:!0})]});return ir()&&(Z=u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"crew-input",className:"w3-col m2",children:"Crew's Name"}),u.jsx("input",{id:"crew-input",name:"crew",className:"w3-half",list:"competitor-datalist",onChange:zt,value:h})]})),Z}function ur(){if(!ne)return!L.has(o)&&h!==""&&h!=null&&!L.has(h)&&!q.has(w)?"Add helm & crew & dinghy & sign-up":!L.has(o)&&!q.has(w)?"Add helm & dinghy & sign-up":h!==""&&h!=null&&!L.has(h)&&!q.has(w)?"Add crew & dinghy & sign-up":!L.has(o)&&h!==""&&h!=null&&!L.has(h)?"Add helm & crew & sign-up":L.has(o)?h!==""&&h!=null&&!L.has(h)?"Add crew & sign-up":q.has(w)?"Sign-up":"Add dinghy & sign-up":"Add helm & sign-up";if(ne)return!L.has(o)&&h!==""&&h!=null&&!L.has(h)&&!q.has(w)?"Add helm & crew & dinghy & update":!L.has(o)&&!q.has(w)?"Add helm & dinghy & update":h!==""&&h!=null&&!L.has(h)&&!q.has(w)?"Add crew & dinghy & update":!L.has(o)&&h!==""&&h!=null&&!L.has(h)?"Add helm & crew & update":L.has(o)?h!==""&&h!=null&&!L.has(h)?"Add crew & update":q.has(w)?"Update":"Add dinghy & update":"Add helm & update"}function Ei(Z){W.current.has(Z)?W.current.set(Z,W.current.get(Z)+1):W.current.set(Z,1)}function gs(){const Z=[];let le=0;for(const[we,je]of W.current)le+=je,Z.push(u.jsxs("tr",{children:[u.jsx("td",{children:we},`class-${we}`),u.jsx("td",{children:je},`no-entries-${we}`)]},we));return Z.push(u.jsxs("tr",{children:[u.jsx("td",{children:"Total Entries"},"total-entries"),u.jsx("td",{children:le},"total-sum")]},"total")),u.jsxs("table",{className:"sign-up-summary w3-table w3-striped",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Class"},"dinghyClass"),u.jsx("th",{children:"# entries"},"number")]})}),u.jsx("tbody",{children:Z})]})}function ys(){return O?"console-error-message":"hidden"}return u.jsxs("div",{className:"sign-up w3-container console",children:[u.jsx("datalist",{id:"competitor-datalist",children:ae}),u.jsx("datalist",{id:"dinghy-datalist",children:re}),u.jsx("h1",{children:d.name}),u.jsxs("form",{className:"w3-container",action:"",method:"get",children:[jn(d),Ni(),or(),u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"sail-number-input",className:"w3-col m2",children:"Sail Number"}),u.jsx("input",{id:"sail-number-input",name:"sailNumber",className:"w3-half",list:"dinghy-datalist",onChange:zt,onBlur:En,value:w})]}),u.jsx("div",{className:"w3-row",children:u.jsxs("div",{className:"w3-col m8",children:[u.jsx("button",{id:"entry-update-button",className:"w3-right",type:"button",onClick:ar,children:ur()}),u.jsx("button",{id:"cancel-button",className:"w3-right",type:"button",onClick:Nn,children:"Cancel"})]})}),u.jsx("div",{"data-testid":"previous-entries",children:u.jsxs("table",{className:"w3-table w3-striped",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Class"}),u.jsx("th",{children:"Helm"}),u.jsx("th",{children:"Crew"})]})}),u.jsx("tbody",{children:Wn()})]})})]}),u.jsx("p",{className:ys(),children:O}),u.jsx("h3",{children:"Signed-up"}),u.jsxs("div",{className:"w3-container scrollable",children:[ye,u.jsx("h4",{children:"Summary"}),gs()]})]})}function ma({value:d,total:r,editable:l=!1,keyup:o,focusout:c}){const h=y.useCallback(({target:j})=>{new RegExp("(^\\d*(?:(?=:)|$)):?((?<=:)[0-5]?\\d(?:(?=:)|$))?:?((?<=:)[0-5]?\\d(?=$))?$").test(j.value)&&w(j.value)},[]),[m,w]=y.useState(qe.formatDuration(d)),C=y.useRef(null),N=r?"total":null;return y.useEffect(()=>{l&&C.current.focus()}),u.jsx("div",{className:"w3-cell w3-left w3-padding-small",children:l?u.jsx("input",{ref:C,className:N,type:"text",value:m,onChange:h,onKeyUp:o,onBlur:c}):u.jsx("output",{className:N,children:qe.formatDuration(d)})})}function zf({value:d="",onChange:r}){const l=d||"";function o(R){r(R)}function c(R){R.stopPropagation()}function h(R){R.stopPropagation()}function m(R){R.stopPropagation()}function w(R){R.stopPropagation()}function C(R){R.stopPropagation()}function N(R){R.stopPropagation()}function j(R){R.stopPropagation()}function P(R){R.stopPropagation()}return u.jsxs("select",{value:l,onClick:c,onAuxClick:h,onPointerDown:m,onPointerMove:w,onPointerUp:C,onPointerOut:N,onPointerLeave:j,onPointerCancel:P,onChange:o,children:[u.jsx("option",{}),u.jsx("option",{children:"OCS"}),u.jsx("option",{children:"DNC"}),u.jsx("option",{children:"DNS"}),u.jsx("option",{children:"DNF"}),u.jsx("option",{children:"DSQ"}),u.jsx("option",{children:"RET"})]})}function oc({entry:d,addLap:r,removeLap:l,updateLap:o,setScoringAbbreviation:c,onRaceEntryDrop:h,onFastGroup:m,inFastGroup:w=!1,showUserMessage:C}){const[N,j]=y.useState(!1),[P,R]=y.useState(!1),O=y.useRef(d.metadata.eTag),I=[];let L="race-entry-view w3-row w3-border w3-hover-border-blue",G={},ae={},$=!1,K=null;const te=500,pe=10,de=500,q=y.useCallback(async T=>{if(T.key==="Enter"){let M=0;if(o){if(/^(\d+:(?=[0-5]?\d:[0-5]?\d))?([0-5]?\d:(?=[0-5]?\d))?([0-5]?\d)$/.test(T.target.value)){j(!1);const fe=new RegExp("^((?<=^)\\d*(?=:[0-5]?\\d:))*:?((?<=^|:)[0-5]?\\d(?=:))?:?((?<=^|:)[0-5]?\\d(?=$))$").exec(T.target.value);M+=isNaN(fe[1])?0:36e5*fe[1],M+=isNaN(fe[2])?0:6e4*fe[2],M+=isNaN(fe[3])?0:1e3*fe[3]}else{C&&C("Time must be in the format [hh:][mm:]ss.");return}d.laps.reduce((fe,ke)=>({time:fe.time+ke.time})).time!==M?(R(!0),j(!1),(await o(d,M))?.success||R(!1)):j(!1)}}T.key==="Escape"&&j(!1)},[d,o,C]),A=y.useCallback(()=>{j(!1)},[]);y.useEffect(()=>{O.current!==d.metadata.eTag&&(R(!1),O.current=d.metadata.eTag)},[d]);async function re(T){if(!N&&!P){let M;T.button===0&&T.ctrlKey?l&&(R(!0),M=await l(d)):T.button===0&&!d.finishedRace&&!d.scoringAbbreviation&&d.race.plannedStartTime<new Date&&r&&(R(!0),M=await r(d)),M?.success||R(!1)}}function X(){!N&&!P&&d.laps.length>0&&j(!0)}function ye(T){T.preventDefault()}function xe(T){$=!0,G.t=Date.now(),G.x=T.clientX,G.y=T.clientY,K=setTimeout(()=>{!N&&!P&&(d.laps.length>0&&j(!0),$=!1)},de)}function ne(T){$&&(T.preventDefault(),K&&(clearTimeout(K),K=null),ae.x=T.clientX,ae.y=T.clientY)}function H(){if($){K&&(clearTimeout(K),K=null),$=!1;var T=Date.now(),M=T-G.t,ue=ae.x-G.x,fe=ae.y-G.y;if(M>te)return;ue>pe&&Math.abs(fe)<pe||-ue>pe&&Math.abs(fe)<pe&&l(d)}}function oe(){K&&(clearTimeout(K),K=null),$=!1}async function V(T){c&&(R(!0),(await c(d,T.target.value))?.success||R(!1))}function D(T){T.stopPropagation()}function _(){m&&m(d.dinghy.dinghyClass.name+d.dinghy.sailNumber+d.helm.name)}function Q(T){T.dataTransfer.setData("text/html",d.dinghy.dinghyClass.name+d.dinghy.sailNumber+d.helm.name),T.dataTransfer.dropEffect="move"}function W(T){T.preventDefault(),T.dataTransfer.dropEffect="move"}async function S(T){T.preventDefault();const M=T.dataTransfer.getData("text/html"),ue=d.dinghy.dinghyClass.name+d.dinghy.sailNumber+d.helm.name;h&&M!==ue&&(d.race.type===Se.PURSUIT&&R(!0),(await h(T.dataTransfer.getData("text/html"),d.dinghy.dinghyClass.name+d.dinghy.sailNumber+d.helm.name))?.success||R(!1))}let b=0;if(d.laps.length===0)I.push(u.jsx("div",{className:"w3-cell w3-left w3-padding-small",children:u.jsx("output",{children:" "})}," "));else for(let T=0;T<d.laps.length;T++){const M=d.laps[T];b+=M.time;let ue;T===d.laps.length-1?N?ue=u.jsx(ma,{value:b,editable:!0,keyup:q,focusout:A},M.number):ue=u.jsx(ma,{value:b,editable:!1},M.number):ue=u.jsx(ma,{value:b,editable:!1},M.number),I.push(ue)}return d.scoringAbbreviation==="DNS"?L+="did-not-start":d.scoringAbbreviation==="DSQ"?L+=" disqualified":d.scoringAbbreviation==="OCS"?L+=" on-course-side":d.scoringAbbreviation==="RET"?L+=" retired":d.scoringAbbreviation==="DNC"?L+=" did-not-compete":d.scoringAbbreviation==="DNF"?L+=" did-not-finish":d.onLastLap?L+=" on-last-lap":d.finishedRace&&(L+=" finished-race"),P&&(L===""?L="race-entry-view w3-row disabled":L+=" disabled"),u.jsxs("div",{className:L,onDragStart:Q,onDragOver:W,onDrop:S,draggable:!0,children:[u.jsxs("div",{className:"cursor-pointer preserve-whitespace",onClick:re,onAuxClick:X,onContextMenu:ye,onPointerDown:xe,onPointerMove:ne,onPointerUp:H,onPointerOut:H,onPointerLeave:H,onPointerCancel:oe,children:[u.jsx("div",{className:"w3-col m2 w3-padding-small bgis-cell",children:u.jsx("output",{children:d.dinghy.dinghyClass.name})}),u.jsx("div",{className:"w3-col m1 w3-padding-small bgis-cell w3-right-align",children:u.jsxs("output",{className:"sail-number",children:[d.dinghy.sailNumber.slice(0,Math.max(0,d.dinghy.sailNumber.length-3)),u.jsx("b",{children:d.dinghy.sailNumber.slice(-3)})]})}),u.jsx("div",{className:"w3-col m2 w3-padding-small bgis-cell",children:u.jsx("output",{children:d.helm.name})}),u.jsx("div",{className:"w3-col m1-half w3-padding-small",children:u.jsx("output",{id:d.dinghy.dinghyClass.name+"-"+d.dinghy.sailNumber+"-"+d.helm.name+"-position",children:d.position!=null?d.position:" "})}),u.jsx("div",{className:"w3-col m5 w3-hide-small",children:u.jsx("div",{className:"w3-cell-row bgis-cell",children:I})}),u.jsx("div",{className:"w3-col m1 w3-padding-small",children:u.jsx(zf,{value:d.scoringAbbreviation,onChange:V},d.scoringAbbreviation)})]}),m?u.jsx("div",{className:"w3-col m1-half w3-padding-small",children:u.jsx("input",{type:"checkbox",onClick:D,onChange:_,checked:w})}):null]})}function Hf({races:d}){const r=y.useContext(yt),l=y.useContext(Cn),[o,c]=y.useState(new Map),[h,m]=y.useState(""),[w,C]=y.useState("default"),[N,j]=y.useState(Date.now()),[P,R]=y.useState([]),[O,I]=y.useState([]),L=y.useCallback(()=>{j(Date.now())},[]);y.useEffect(()=>{let H=!1;const oe=new Map,V=d.map(D=>!D||!D.name&&!D.url?Promise.resolve({success:!0,domainObject:[]}):r.getEntriesByRace(D));return H||Promise.all(V).then(D=>{D.forEach(_=>{_.success?_.domainObject.forEach(Q=>{oe.set(Q.dinghy.dinghyClass.name+Q.dinghy.sailNumber+Q.helm.name,Q),r.registerEntryUpdateCallback(Q.url,L)}):m(`Unable to load entries
`+_.message)}),H||c(oe)}),()=>{oe.forEach(D=>{r.unregisterEntryUpdateCallback(D.url,L)}),H=!0,m("")}},[r,d,L,N]);function G(){j(Date.now())}function ae(H,oe){let V=[];switch(oe){case"lastThree":V=It(H,D=>{const _=D.dinghy.sailNumber,Q=_.substring(_.length-3,_.length);return Number(Q)});break;case"classLastThree":V=It(H,D=>{const _=D.dinghy.sailNumber,Q=_.substring(_.length-3,_.length);return[D.dinghy.dinghyClass.name,Number(Q)]});break;case"sailNumber":V=It(H,D=>isNaN(D.dinghy.sailNumber)?D.dinghy.sailNumber:Number(D.dinghy.sailNumber));break;case"classSailNumber":V=It(H,D=>[D.dinghy.dinghyClass.name,isNaN(D.dinghy.sailNumber)?D.dinghy.sailNumber:Number(D.dinghy.sailNumber)]);break;case"lapTimes":V=It(H,D=>{const _=D.scoringAbbreviation==null||D.scoringAbbreviation===""?0:-Date.now();return[D.laps.length+_,-D.sumOfLapTimes]},!0);break;case"position":V=It(H,D=>{let _=.5;return D.scoringAbbreviation==null||D.scoringAbbreviation===""||(_=_*2),D.position&&_===.5?D.position:Date.now()*_});break;case"forecast":V=It(H,D=>{let _=1;D.scoringAbbreviation==null||D.scoringAbbreviation===""||(_=_*2);const Q=D.sumOfLapTimes?D.sumOfLapTimes:0;return(D.race.plannedStartTime.getTime()+Q+D.race.duration/D.race.plannedLaps*D.dinghy.dinghyClass.portsmouthNumber/1e3)*_});break;default:V=It(H,D=>[D.dinghy.dinghyClass.name,isNaN(D.dinghy.sailNumber)?D.dinghy.sailNumber:Number(D.dinghy.sailNumber)])}return V.map(D=>D.dinghy.dinghyClass.name+D.dinghy.sailNumber+D.helm.name)}async function $(H){const oe=l.addLap(H,H.race.clock.getElapsedTime(H.race.plannedStartTime)),V=await oe;return V.success||m(V.message),oe}async function K(H){const oe=l.removeLap(H,H.laps[H.laps.length-1]),V=await oe;return V.success||m(V.message),oe}async function te(H,oe){const V=l.updateLap(H,oe),D=await V;return D.success||m(D.message),V}async function pe(H,oe){const V=l.setScoringAbbreviation(H,oe),D=await V;return D.success||m(D.message),V}function de(H){m(H)}function q(H){const oe=o.get(H);if(oe.scoringAbbreviation==null||oe.scoringAbbreviation==="")if(O.includes(H)){I(O.toSpliced(O.indexOf(H),1));const V=P.toSpliced(P.indexOf(H),1);R(V)}else{const V=P.indexOf(H),D=P.toSpliced(V,1);D.splice(O.length,0,H),I(O.toSpliced(O.length,0,H)),R(D)}else m("Cannot fast group an entry with a scoring abbreviation")}function A(){let H=0;return o.forEach(oe=>{oe.position>H&&(H=oe.position)}),H}async function re(H,oe){let V;if(!oe){m("No position to set");return}switch(oe){case uc.MOVEUPONE:if(H.position!=null)V=await l.updateEntryPosition(H,H.position-1);else{const D=A();V=await l.updateEntryPosition(H,D||1)}break;case uc.MOVEDOWNONE:H.position!=null?V=await l.updateEntryPosition(H,H.position+1):V=await l.updateEntryPosition(H,A()+1);break;default:V=await l.updateEntryPosition(H,oe)}V.success||m(V.message)}function X(H,oe){const V=o.get(H),D=o.get(oe);let _=[],Q=[];(V.scoringAbbreviation==null||V.scoringAbbreviation==="")&&(D.scoringAbbreviation==null||D.scoringAbbreviation==="")?(O.includes(H)&&!O.includes(oe)?Q=O.toSpliced(O.indexOf(H),1):!O.includes(H)&&O.includes(oe)?Q=O.toSpliced(Math.max(0,O.indexOf(oe)),0,H):O.includes(H)&&O.includes(oe)&&(Q=O.toSpliced(O.indexOf(H),1),Q.splice(Math.max(0,O.indexOf(oe)),0,H)),_=P.toSpliced(P.indexOf(H),1),_.splice(Math.max(0,P.indexOf(oe)),0,H),I(Q),R(_),V.race.type===Se.PURSUIT&&V.race.name===D.race.name&&re(V,D.position)):m("Cannot change position of an entry with a scoring abbreviation")}function ye(){return h?"console-error-message":"hidden"}function xe(){const H=Array.from(o.keys()).every(V=>P.includes(V)),oe=P.every(V=>o.has(V));if(!(H&&oe)){const V=ae(Array.from(o.values()),w),D=[];O.forEach(_=>{V.includes(_)&&D.push(_)}),D.forEach(_=>{V.includes(_)&&(V.splice(V.indexOf(_),1),V.splice(D.indexOf(_),0,_))}),I(D),R(V)}return P.map(V=>{const D=o.get(V);return D?D.race.type===Se.FLEET?u.jsx(oc,{entry:D,addLap:$,removeLap:K,updateLap:te,setScoringAbbreviation:pe,onRaceEntryDrop:X,onFastGroup:q,inFastGroup:O.includes(V),showUserMessage:de},V):u.jsx(oc,{entry:D,addLap:$,removeLap:K,updateLap:te,setScoringAbbreviation:pe,onRaceEntryDrop:X},V):null})}function ne(H){I([]),R(ae(Array.from(o.values()),H)),C(H)}return u.jsxs("div",{className:"race-entries-view",children:[u.jsx("p",{className:ye(),children:h}),u.jsxs("div",{className:"w3-row",children:[u.jsx("div",{className:"w3-col m2",children:u.jsx("button",{className:"w3-btn w3-block w3-card",onClick:()=>ne("sailNumber"),children:"By sail number"})}),u.jsx("div",{className:"w3-col m3",children:u.jsx("button",{className:"w3-btn w3-block w3-card",onClick:()=>ne("classSailNumber"),children:"By class & sail number"})}),u.jsx("div",{className:"w3-col m2",children:u.jsx("button",{className:"w3-btn w3-block w3-card",onClick:()=>ne("lapTimes"),children:"By lap times"})}),u.jsx("div",{className:"w3-col m2",children:u.jsx("button",{className:"w3-btn w3-block w3-card",onClick:()=>ne("position"),children:"By position"})}),u.jsx("div",{className:"w3-col m2",children:u.jsx("button",{className:"w3-btn w3-block w3-card",onClick:()=>ne("forecast"),children:"By forecast"})}),u.jsx("div",{className:"w3-col m1",children:u.jsx("button",{className:"w3-btn w3-block w3-card",title:"refresh",onClick:G,children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:".9em",viewBox:"0 -960 960 960",width:".9em",fill:"#5f6368",children:u.jsx("path",{d:"M480-160q-134 0-227-93t-93-227q0-134 93-227t227-93q69 0 132 28.5T720-690v-110h80v280H520v-80h168q-32-56-87.5-88T480-720q-100 0-170 70t-70 170q0 100 70 170t170 70q77 0 139-44t87-116h84q-28 106-114 173t-196 67Z"})})})})]}),u.jsx("div",{className:"scrollable",children:xe()})]})}class uc{static MOVEUPONE="moveUpOne";static MOVEDOWNONE="moveDownOne"}function Bf({race:d,onPostpone:r,closeParent:l}){const[o,c]=y.useState(30);function h({target:w}){w.value>=0&&c(w.value)}function m(w){w.preventDefault(),r(d,o*60*1e3),l&&l()}return u.jsxs("form",{onSubmit:m,children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"delay-input",children:"Delay"}),u.jsx("input",{id:"delay-input",type:"number",name:"delay",min:"0",step:"5",value:o,onChange:h,autoFocus:!0})]}),u.jsxs("div",{children:[l?u.jsx("button",{type:"button",onClick:l,children:"Cancel"}):null,u.jsx("button",{type:"submit",children:"Postpone"})]})]})}function pa({show:d,onClose:r,children:l,testid:o=""}){const c=y.useRef(null),h=y.useCallback(m=>{m.preventDefault(),r()},[r]);return y.useEffect(()=>{d&&c.current?c.current.showModal():c.current&&c.current.close()}),u.jsx("dialog",{"data-testid":o,ref:c,onCancel:h,children:l})}function cc({race:d,minLaps:r=1,maxLaps:l=100,initialValue:o,onUpdate:c,closeParent:h}){const[m,w]=y.useState(o||r);function C({target:j}){j.value>=r&&j.value<=l&&w(j.value)}function N(j){j.preventDefault(),c(d,Number(m)),h&&h()}return u.jsxs("form",{onSubmit:N,children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"set-laps-input",children:"Set Laps"}),u.jsx("input",{id:"set-laps-input",name:"laps",type:"number",min:r.toString(),max:l.toString(),value:m,onChange:C,autoFocus:!0})]}),u.jsxs("div",{children:[h?u.jsx("button",{type:"button",onClick:h,children:"Cancel"}):null,u.jsx("button",{type:"submit",children:"Update Laps"})]})]})}function pc({race:d,showInRaceData:r=!0}){const l=y.useContext(yt),o=y.useContext(Cn),[c,h]=y.useState(d),[m,w]=y.useState(d.clock.getElapsedTime(d.plannedStartTime)),[C,N]=y.useState(""),j=y.useRef(),[P,R]=y.useState(!1),[O,I]=y.useState(!1),L=y.useRef(new AudioContext),G=y.useRef(null),ae=y.useRef(null),$=y.useRef(null),K=y.useRef(null);G.current===null&&d.type===Se.PURSUIT&&(G.current=new Audio("./sounds/prepare_alert.mp3")),ae.current===null&&d.type===Se.PURSUIT&&(ae.current=new Audio("./sounds/act_alert.mp3")),$===null&&L!=null&&G.current!=null&&($.current=L.createMediaElementSource(G.current),$.current(L.current.destination)),K===null&&L!=null&&ae.current!=null&&(K.current=L.createMediaElementSource(ae.current),K.current(L.current.destination));const te=y.useCallback(()=>{l.getRace(d.url).then(ne=>{ne.success?h(ne.domainObject):N(`Unable to update race
`+ne.message)})},[l,d]),pe=y.useCallback(()=>{const ne=d.clock.getElapsedTime(d.plannedStartTime);w(ne),G.current!=null&&Math.floor(ne/1e3)*1e3===d.duration-6e4&&G.current.play(),ae.current!=null&&Math.floor(ne/1e3)*1e3===d.duration&&ae.current.play()},[d.clock,d.plannedStartTime,d.duration]);function de(){R(!0)}function q(){o.startRace(d)}function A(){I(!0)}function re(){const ne=d.url.match(/(\d+$)/)[0];window.open(window.location.origin+"/lap-sheet/"+ne)}y.useEffect(()=>{let ne=!1;return ne||l.registerRaceEntryLapsUpdateCallback(d.url,te),()=>{ne=!0,l.unregisterEntryUpdateCallback(d.url,te)}},[l,d,te]),y.useEffect(()=>(j.current&&j.current.clock&&j.current.clock.removeTickHandler(pe),d.clock.addTickHandler(pe),j.current=d,(()=>{d.clock.removeTickHandler(pe)})),[d,pe]);function X(){R(!1)}function ye(){I(!1)}function xe(){return C?"console-error-message":"hidden"}return u.jsxs("div",{className:"race-header-view",children:[u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{className:"w3-col m2",children:u.jsx("b",{children:d.name})}),u.jsxs("div",{className:"w3-col m1 s6",children:[d.type!==Se.PURSUIT?u.jsx("label",{htmlFor:"race-laps-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:"Laps"}):null,d.type!==Se.PURSUIT?u.jsx("output",{id:"race-laps-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:d.plannedLaps}):null]}),u.jsxs("div",{className:"w3-col m1 s6",children:[u.jsx("label",{htmlFor:"race-duration-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:"Duration"}),u.jsx("output",{id:"race-duration-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:qe.formatDuration(d.duration)})]}),u.jsxs("div",{className:"w3-col m1 s6",children:[r&&m>=0?u.jsx("label",{htmlFor:"race-elapsed-time-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:"Elapsed"}):null,r&&m>=0?u.jsx("output",{id:"race-elapsed-time-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:qe.formatDuration(m)}):null]}),u.jsxs("div",{className:"w3-col m2 s6",children:[u.jsx("label",{htmlFor:"race-duration-remaining-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:m<0?"Countdown":"Remaining"}),u.jsx("output",{id:"race-duration-remaining-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:m<0?qe.formatDuration(m,!1,!0):qe.formatDuration(d.duration-Math.floor(m/1e3)*1e3)})]}),u.jsxs("div",{className:"w3-col m1 s6",children:[r&&d.type!==Se.PURSUIT&&c.lastLapTime>0?u.jsx("label",{htmlFor:"estmated-race-laps-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:"Laps estimate"}):null,r&&d.type!==Se.PURSUIT&&c.lastLapTime>0?u.jsx("output",{id:"estmated-race-laps-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:Number(c.lapForecast).toFixed(2)}):null]}),u.jsxs("div",{className:"w3-col m1 s6",children:[r&&d.type!==Se.PURSUIT&&c.lastLapTime>0?u.jsx("label",{htmlFor:"last-lap-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:"Last lap time"}):null,r&&d.type!==Se.PURSUIT&&c.lastLapTime>0?u.jsx("output",{id:"last-lap-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:qe.formatDuration(c.lastLapTime)}):null]}),u.jsxs("div",{className:"w3-col m1 s6",children:[r&&d.type!==Se.PURSUIT&&c.lastLapTime>0?u.jsx("label",{htmlFor:"average-lap-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:"Average lap time"}):null,r&&d.type!==Se.PURSUIT&&c.lastLapTime>0?u.jsx("output",{id:"average-lap-"+d.name.replace(/ /g,"-").toLowerCase(),className:"w3-col",children:qe.formatDuration(c.averageLapTime)}):null]}),u.jsxs("div",{className:"w3-col m1 s6",children:[r&&d.type!==Se.PURSUIT&&c.lapsSailed<c.plannedLaps?u.jsx("button",{id:"shorten-course-button",className:"w3-col",onClick:A,children:"Shorten Course"}):null,!r&&d.type!==Se.PURSUIT?u.jsx("button",{id:"adjust-course-button",className:"w3-col",onClick:A,children:"Adjust Laps"}):null]}),u.jsxs("div",{className:"w3-col m1 s6",children:[m<0?u.jsx("button",{id:"race-postpone-button",className:"w3-col",onClick:de,children:"Postpone Start"}):null,m>=0&&(c.lapsSailed==null||c?.lapsSailed<1)?u.jsx("button",{id:"race-restart-button",className:"w3-col",onClick:de,children:"Restart Race"}):null]}),u.jsx("div",{className:"w3-col m1 s6",children:m<0?u.jsx("button",{id:"race-start-button",className:"w3-col",onClick:q,children:"Start Now"}):null}),u.jsx("div",{className:"w3-col m1 s6",children:u.jsx("button",{id:"race-start-button",className:"w3-col",onClick:re,children:"Lap Sheet"})})]}),u.jsx("p",{className:xe(),children:C}),u.jsx(pa,{show:P,onClose:()=>R(!1),testid:"postpone-race-dialog",children:u.jsx(Bf,{race:d,onPostpone:o.postponeRace,closeParent:X})}),u.jsx(pa,{show:O,onClose:ye,testid:"shorten-course-dialog",children:r?u.jsx(cc,{race:d,minLaps:Math.max(1,c.lapsSailed),maxLaps:c.plannedLaps-1,initialValue:Math.max(1,c.plannedLaps-1),onUpdate:o.updateRacePlannedLaps,closeParent:ye}):u.jsx(cc,{race:d,minLaps:Math.max(1,c.lapsSailed),initialValue:Math.max(1,c.plannedLaps),onUpdate:o.updateRacePlannedLaps,closeParent:ye})})]})}function ms({heading:d,children:r}){const[l,o]=y.useState(!1);function c(){o(h=>!h)}return u.jsxs("div",{children:[u.jsxs("h1",{children:[d,u.jsx("button",{id:"toggle-children-button",className:"embedded",type:"button",title:l?"Show":"Hide",onClick:c,children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-caret-down-fill",viewBox:"0 0 16 16",children:u.jsx("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"})})})]}),u.jsx("div",{hidden:l,children:r})]})}function gc(d){let r;try{r=window[d];const l="__storage_test__";return r.setItem(l,l),r.removeItem(l),!0}catch(l){return l instanceof DOMException&&l.name==="QuotaExceededError"&&r&&r.length!==0}}function Vf(){const d=y.useContext(yt),r=y.useMemo(()=>gc("sessionStorage"),[]),[l,o]=y.useState([]),[c,h]=y.useState([]),[m,w]=y.useState(new Map),[C,N]=y.useState(""),[j,P]=y.useState(()=>{let A;if(r){const re=sessionStorage.getItem("sessionStart");re&&(A=new Date(re))}return A||(A=new Date(Math.floor(Date.now()/864e5)*864e5+288e5),A.setMinutes(A.getMinutes()+A.getTimezoneOffset())),A}),[R,O]=y.useState(()=>{let A;if(r){const re=sessionStorage.getItem("sessionEnd");re&&(A=new Date(re))}return A||(A=new Date(Math.floor(Date.now()/864e5)*864e5+72e6),A.setMinutes(A.getMinutes()+A.getTimezoneOffset())),A}),[I,L]=y.useState(Date.now()),[G,ae]=y.useState(()=>{let A;if(r){const re=sessionStorage.getItem("raceType");re&&(A=Se.from(re))}return A||(A=Se.FLEET),A}),$=y.useCallback(()=>{L(Date.now())},[]);y.useEffect(()=>{let A=!1;return d.getRacesBetweenTimesForType(new Date(j),new Date(R),G).then(re=>{if(!A&&!re.success)N(`Unable to load races
`+re.message);else if(!A){const X=new Map,ye=[],xe=[];re.domainObject.forEach(ne=>{X.set(ne.name,ne),ye.push(u.jsx("option",{value:ne.name,children:ne.name},ne.name+ne.plannedStartTime.toISOString())),xe.push(ne.name)}),w(X),o(ne=>ne.filter(H=>xe.includes(H))),h(ye)}}),()=>{A=!0,N("")}},[d,j,R,G,I]),y.useEffect(()=>{const A=Array.from(m.values());return A.forEach(re=>{d.registerRaceUpdateCallback(re.url,$),d.registerRaceEntryLapsUpdateCallback(re.url,$)}),()=>{A.forEach(re=>{d.unregisterRaceUpdateCallback(re.url,$),d.unregisterRaceEntryLapsUpdateCallback(re.url,$)})}},[d,m,$]);function K(A){const re=[...A.target.selectedOptions];o(re.map(X=>X.value))}function te(A){r&&sessionStorage.setItem("sessionStart",A.toISOString()),P(A)}function pe(A){r&&sessionStorage.setItem("sessionEnd",A.toISOString()),O(A)}function de({target:A}){r&&sessionStorage.setItem("raceType",A.value),ae(Se.from(A.value))}function q(){return C?"console-error-message":"hidden"}return u.jsxs("div",{className:"w3-container console",children:[u.jsxs(ms,{heading:"Select Races",children:[u.jsxs("form",{className:"w3-container",children:[u.jsx(xi,{sessionStart:j,sessionEnd:R,onSessionStartChange:te,onSessionEndChange:pe}),u.jsx("div",{className:"w3-row",children:u.jsxs("fieldset",{className:"w3-third",children:[u.jsx("legend",{children:"Race Type:"}),u.jsxs("div",{className:"w3-cell-row",children:[u.jsxs("div",{className:"w3-cell",children:[u.jsx("input",{id:"radio-race-type-fleet",name:"race-type",type:"radio",value:"FLEET",onChange:de,checked:G===Se.FLEET}),u.jsx("label",{htmlFor:"radio-race-type-fleet",children:"Fleet"})]}),u.jsxs("div",{className:"w3-cell",children:[u.jsx("input",{id:"radio-race-type-pursuit",name:"race-type",type:"radio",value:"PURSUIT",onChange:de,checked:G===Se.PURSUIT}),u.jsx("label",{htmlFor:"radio-race-type-pursuit",children:"Pursuit"})]})]})]})}),u.jsx("label",{htmlFor:"race-select",className:"w3-left w3-col",children:"Select Race"}),u.jsx("select",{id:"race-select",name:"race",multiple:!0,className:"w3-col w3-third",onChange:K,value:l,children:c})]}),u.jsx("p",{className:q(),children:C})]}),u.jsx(ms,{heading:"Races",children:l.map(A=>{const re=m.get(A);return u.jsx(pc,{race:re},re.name+re.plannedStartTime.toISOString())})}),u.jsx(Hf,{races:l.map(A=>m.get(A))})]})}class Wf{async getRoles(){let r,l;const o=window.location.origin+window.location.pathname+"authentication/roles";let c;try{c=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-store"}),r=await c.json(),l=r.roles?r.roles:[]}catch(h){console.error(`Failed to fetch roles: ${h.message}`),l=[]}return Promise.resolve(l)}}class hs{static FIRSTNAMESURNAME="firstnameSurname";static SURNAMEFIRSTNAME="surnameFirstname"}function $f({race:d,downloadFunction:r}){const[l,o]=y.useState(hs.FIRSTNAMESURNAME);function c({target:m}){o(m.value)}function h(){r&&r(d,{nameFormat:l})}return u.jsxs("form",{className:"download-race w3-container w3-padding w3-border w3-margin",action:"",method:"get",children:[u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{className:"w3-col m3",children:d.name}),u.jsx("label",{className:"w3-col m2",children:d.dinghyClass?d.dinghyClass.name:""}),u.jsx("output",{id:"race-start-"+d.name.replace(/ /g,"-").toLowerCase(),children:new Intl.DateTimeFormat(navigator.language,{dateStyle:"medium",timeStyle:"medium",hour12:!1}).format(d.plannedStartTime)})]}),u.jsx("div",{className:"w3-row",children:u.jsxs("fieldset",{className:"w3-half",children:[u.jsx("legend",{children:"Choose Name Format"}),u.jsxs("div",{className:"w3-cell-row",children:[u.jsxs("div",{className:"w3-cell",children:[u.jsx("input",{id:d.name+"-"+d.plannedStartTime.toISOString()+"-firstname-surname",name:d.name+"-"+d.plannedStartTime.toISOString()+"-name-format",type:"radio",value:hs.FIRSTNAMESURNAME,checked:l===hs.FIRSTNAMESURNAME,onChange:c}),u.jsx("label",{htmlFor:d.name+"-"+d.plannedStartTime.toISOString()+"-firstname-surname",children:"Firstname Surname"})]}),u.jsxs("div",{className:"w3-cell",children:[u.jsx("input",{id:d.name+"-"+d.plannedStartTime.toISOString()+"-surname-firstname",name:d.name+"-"+d.plannedStartTime.toISOString()+"-name-format",type:"radio",value:hs.SURNAMEFIRSTNAME,checked:l===hs.SURNAMEFIRSTNAME,onChange:c}),u.jsx("label",{htmlFor:d.name+"-"+d.plannedStartTime.toISOString()+"-surname-firstname",children:"Surname, Firstname"})]})]})]})}),u.jsx("div",{className:"w3-row",children:u.jsx("div",{className:"w3-half",children:u.jsx("button",{id:"race-result-download-button",className:"w3-right",type:"button",onClick:h,children:"Download Results"})})})]})}function Qf(){const d=y.useContext(yt),r=y.useContext(Cn),[l,o]=y.useState(()=>{const I=new Date(Math.floor(Date.now()/864e5)*864e5+288e5);return I.setMinutes(I.getMinutes()+I.getTimezoneOffset()),I}),[c,h]=y.useState(()=>{const I=new Date(Math.floor(Date.now()/864e5)*864e5+756e5);return I.setMinutes(I.getMinutes()+I.getTimezoneOffset()),I}),[m,w]=y.useState([]),[C,N]=y.useState(""),j=y.useCallback((I,L)=>{r.downloadRaceResults(I,L).then(G=>{G.success||N(`Unable to download results
`+G.message)})},[r]);function P(I){o(I)}function R(I){h(I)}y.useEffect(()=>{let I=!1;return d.getRacesBetweenTimes(l,c).then(L=>{!I&&!L.success?N(`Unable to load races
`+L.message):I||w(L.domainObject)}),()=>{I=!0,N("")}},[d,l,c]);function O(){return C?"console-error-message":"hidden"}return u.jsxs("div",{className:"w3-container console",children:[u.jsx("h1",{children:"Download Races"}),u.jsx("form",{className:"w3-container",action:"",method:"get",children:u.jsx(xi,{sessionStart:l,sessionEnd:c,onSessionStartChange:P,onSessionEndChange:R})}),u.jsx("p",{className:O(),children:C}),u.jsx("div",{className:"scrollable",children:m.map(I=>u.jsx($f,{race:I,downloadFunction:j},I.name+I.plannedStartTime.toISOString()))})]})}function Gf({signals:d,clock:r}){const[l,o]=y.useState(r.getTimeToSecondPrecision()),c=y.useCallback(()=>{o(r.getTimeToSecondPrecision())},[r]);y.useEffect(()=>(r.addTickHandler(c),(()=>{r.removeTickHandler(c)})),[r,c]);const h=Intl.DateTimeFormat().resolvedOptions();let m={timeZone:h.timeZone,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};const w=new Intl.DateTimeFormat(h.locale,m),C=new Map;d.sort((j,P)=>j.time-P.time),d.forEach(j=>{let P=j.meaning;if(P&&(P+=". "),j?.visualSignal?.flagsState===At.RAISED?P+="Raise "+j.visualSignal.flags.map(R=>R.name).join(" + ")+".":j?.visualSignal?.flagsState===At.LOWERED&&(P+="Lower "+j.visualSignal.flags.map(R=>R.name).join(" + ")+"."),j?.soundSignal&&(P&&(P+=" "),P+="Sound: "+j.soundSignal.description+"."),C.has(j.time)){const R=C.get(j.time);C.set(j.time,R+`
`+P)}else C.set(j.time,P)});const N=[];return C.forEach((j,P)=>{if(P>=l){const R=Math.max(P-l,0);N.push(u.jsxs("tr",{children:[u.jsx("td",{children:w.format(new Date(P))},"time"),u.jsx("td",{className:"preserve-whitespace",children:j},"action"),u.jsx("td",{children:qe.formatDuration(R,!1,!0)},"countdown")]},P))}}),u.jsxs("div",{className:"action-list-view",children:[u.jsx("h1",{children:"Action List"}),u.jsx("div",{className:"scrollable",children:u.jsxs("table",{className:"w3-table w3-striped",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Time"}),u.jsx("th",{children:"Action"}),u.jsx("th",{children:"Countdown"})]})}),u.jsx("tbody",{children:N})]})})]})}function qf({signals:d}){const r=y.useContext(yt),[l,o]=y.useState(r.getClock().getTimeToSecondPrecision()),c=y.useCallback(()=>{o(r.getClock().getTimeToSecondPrecision())},[r]);y.useEffect(()=>(r.getClock().addTickHandler(c),(()=>{r.getClock().removeTickHandler(c)})),[r,c]);const h=d[0]?.visualSignal.flags,m=d.findLast(N=>N.time<=l),w=d.find(N=>N.time>l),C=()=>m?.time===l?0:w?w.time-l:0;return u.jsxs("div",{className:"signal-indicator w3-row",children:[u.jsxs("div",{className:"w3-col s4 m3 w3-cell-row",children:[u.jsx("label",{htmlFor:"flag-name-output",className:"w3-cell",children:"Flag"}),u.jsx("output",{id:"flag-name-output",className:"w3-cell",children:h.map(N=>N.name).join(" ")})]}),u.jsxs("div",{className:"w3-col s4 m2 w3-cell-row",children:[u.jsx("label",{htmlFor:"current-state-output",className:"w3-cell",children:"State"}),u.jsx("output",{id:"current-state-output",className:"w3-cell",children:m?.visualSignal.flagsState===At.RAISED?"Raised":"Lowered"})]}),u.jsxs("div",{className:"w3-col s4 m2 w3-cell-row",children:[u.jsx("label",{htmlFor:"change-in-output",className:"w3-cell",children:"Change In"}),u.jsx("output",{id:"change-in-output",className:"w3-cell",children:qe.formatDuration(C(),!1,!0)})]})]})}function Zf({signals:d=[]}){const r=new Map;return d.filter(l=>l.visualSignal).sort((l,o)=>l.time-o.time).forEach(l=>{const c=(h=>{const m=h.map(w=>w.name);return m.sort(),m.join("")})(l.visualSignal.flags);r.has(c)?r.get(c).push(l):r.set(c,[l])}),u.jsx("div",{className:"signals-panel",children:Array.from(r.values()).map((l,o)=>u.jsx(qf,{signals:l},o))})}function dc({time:d,message:r,beep:l=!1}){const o=y.useRef(new Audio("./sounds/beep_2000hz_100ms_mono.wav"));return l&&o.current.play(),u.jsxs("div",{className:"countdown-display-control",children:[u.jsx("output",{className:"clock-display",children:qe.formatDuration(d,!1,!0)}),u.jsx("div",{children:u.jsx("output",{children:r})})]})}function Yf(){const d=y.useContext(yt),r=y.useMemo(()=>gc("sessionStorage"),[]),[l,o]=y.useState([]),[c,h]=y.useState(new Map),[m,w]=y.useState(""),[C,N]=y.useState(()=>{let T;if(r){const M=sessionStorage.getItem("sessionStart");M&&(T=new Date(M))}return T||(T=new Date(Math.floor(Date.now()/864e5)*864e5+288e5),T.setMinutes(T.getMinutes()+T.getTimezoneOffset())),T}),[j,P]=y.useState(()=>{let T;if(r){const M=sessionStorage.getItem("sessionEnd");M&&(T=new Date(M))}return T||(T=new Date(Math.floor(Date.now()/864e5)*864e5+72e6),T.setMinutes(T.getMinutes()+T.getTimezoneOffset())),T}),[R,O]=y.useState(d.getClock().getTime()),[I,L]=y.useState(d.getClock().getTime()),[G,ae]=y.useState(()=>{let T;if(r){const M=sessionStorage.getItem("raceType");M&&(T=Se.from(M))}return T||(T=Se.FLEET),T}),[$,K]=y.useState([]),[te,pe]=y.useState(d.getClock().getTime()),de=y.useRef(null),q=y.useRef(null);q.current===null&&(q.current=new Audio("./sounds/prepare_alert.mp3"));const A=y.useRef(null);A.current===null&&(A.current=new Audio("./sounds/act_alert.mp3"));const re=y.useRef(null);re.current===null&&(re.current=new AudioContext);const X=y.useRef(null);X===null&&re!=null&&A!=null&&(X.current=re.createMediaElementSource(A.current),X.current(re.current.destination));const ye=y.useRef(null);ye===null&&re!=null&&q!=null&&(ye.current=re.createMediaElementSource(q.current),ye.current(re.current.destination));const xe=y.useCallback(()=>{O(d.getClock().getTime())},[d]),ne=y.useCallback(()=>{L(d.getClock().getTime())},[d]),H=y.useCallback(()=>{q.current.play()},[]),oe=y.useCallback(()=>{A.current.play()},[]),V=y.useCallback(()=>{pe(d.getClock().getTimeToSecondPrecision())},[d]);y.useEffect(()=>{let T=!1;return d.getRacesBetweenTimesForType(new Date(C),new Date(j),G,null,null,{by:"plannedStartTime",order:Lf.ASCENDING}).then(M=>{if(!T&&!M.success)w(`Unable to load races
`+M.message);else if(!T){const ue=new Map,fe=[],ke=[];M.domainObject.forEach(ve=>{ue.set(ve.name,ve),fe.push(u.jsx("option",{value:ve.name,children:ve.name},ve.name+ve.plannedStartTime.toISOString())),ke.push(ve.name)}),h(ue),l.length===0?o(ke):o(ve=>ve.filter(Re=>ke.includes(Re)))}}),()=>{T=!0,w("")}},[d,C,j,G,R,l.length]),y.useEffect(()=>{let T=!1;return d.getStartSequence(l.map(M=>c.get(M)),G).then(M=>{!T&&!M.success?w(`Unable to load start sequence
`+M.message):T||(de.current=M.domainObject,de.current.addPrepareForRaceStartSignalHandler(H),de.current.addMakeRaceStartSignalHandler(oe),K(de.current.getSignals()),w(""))}),()=>{T=!0,de.current&&(de.current.removePrepareForRaceStartSignalHandler(H),de.current.removeMakeRaceStartSignalHandler(oe),de.current.dispose())}},[d,l,G,c,R,I,de,oe,H]),y.useEffect(()=>(d.getClock().addTickHandler(V),()=>{d.getClock().removeTickHandler(V)}),[d,V]),y.useEffect(()=>{const T=Array.from(c.values());return T.forEach(M=>{d.registerRaceUpdateCallback(M.url,xe)}),()=>{T.forEach(M=>{d.unregisterRaceUpdateCallback(M.url,xe)})}},[d,c,xe]),y.useEffect(()=>{const T=Array.from(c.values());return T.forEach(M=>{d.registerFleetUpdateCallback(M.fleet.url,ne)}),()=>{T.forEach(M=>{d.unregisterFleetUpdateCallback(M.fleet.url,ne)})}},[d,c,ne]);function D(T){const M=[...T.target.selectedOptions];o(M.map(ue=>ue.value))}function _(T){r&&sessionStorage.setItem("sessionStart",T.toISOString()),N(T)}function Q(T){r&&sessionStorage.setItem("sessionEnd",T.toISOString()),P(T)}function W({target:T}){r&&sessionStorage.setItem("raceType",T.value),ae(Se.from(T.value))}function S(){return m?"console-error-message":"hidden"}function b(){if(de.current){const T=de.current.getNextRaceToStart(new Date(te));let M;if(T){const ue=T.plannedStartTime.getTime()-d.getClock().getTimeToSecondPrecision(),fe=ue<=1e4&&ue>0;M=u.jsx(dc,{title:"Start Countdown",message:T.name,time:ue,beep:fe})}else M=u.jsx(dc,{title:"Start Countdown",message:"",time:0});return u.jsx(ms,{heading:"Start Countdown",children:M})}}return u.jsxs("div",{className:"w3-container console",children:[u.jsxs(ms,{heading:"Start Races",children:[u.jsxs("form",{className:"w3-container",children:[u.jsx(xi,{sessionStart:C,sessionEnd:j,onSessionStartChange:_,onSessionEndChange:Q}),u.jsxs("div",{className:"w3-row",children:[u.jsxs("fieldset",{className:"w3-third",children:[u.jsx("legend",{children:"Race Type"}),u.jsxs("div",{className:"w3-cell-row",children:[u.jsxs("div",{className:"w3-cell",children:[u.jsx("input",{id:"radio-race-type-fleet",name:"race-type",type:"radio",value:"FLEET",onChange:W,checked:G===Se.FLEET}),u.jsx("label",{htmlFor:"radio-race-type-fleet",children:"Fleet"})]}),u.jsxs("div",{className:"w3-cell",children:[u.jsx("input",{id:"radio-race-type-pursuit",name:"race-type",type:"radio",value:"PURSUIT",onChange:W,checked:G===Se.PURSUIT}),u.jsx("label",{htmlFor:"radio-race-type-pursuit",children:"Pursuit"})]})]})]}),u.jsx("label",{htmlFor:"race-select",className:"w3-left w3-col",children:"Select Race"}),u.jsx("select",{id:"race-select",name:"race",multiple:!0,className:"w3-col w3-third",onChange:D,value:l,children:Array.from(c.values()).map(T=>u.jsx("option",{value:T.name,children:T.name},T.name+T.plannedStartTime.toISOString()))})]})]}),u.jsx("p",{className:S(),children:m})]}),b(),u.jsxs("div",{className:"scrollable",children:[u.jsx(ms,{heading:"Flags",children:u.jsx(Zf,{signals:$})}),u.jsx(ms,{heading:"Races",children:l.map(T=>{const M=c.get(T);return u.jsx(pc,{race:M,showInRaceData:!1},M.name+M.plannedStartTime.toISOString())})}),u.jsx(Gf,{signals:$,clock:d.getClock()})]})]})}function Kf(){const d=y.useContext(yt),r=y.useContext(Cn),[l,o]=y.useState(new Map),[c,h]=y.useState(),[m,w]=y.useState(),[C,N]=y.useState(""),[j,P]=y.useState(Date.now());y.useEffect(()=>{let K=!1;return d.getCompetitors().then(te=>{if(!K&&!te.success)N(`Unable to load competitors
`+te.message);else if(!K){const pe=new Map;te.domainObject.forEach(de=>{pe.set(de.url,de)}),o(pe)}}),()=>{K=!0,N("")}},[d,j]);async function R(K,te){const pe=await r.updateCompetitor(K,te);pe.success?(O(),P(Date.now())):N(pe.message)}function O(){h(null),w(""),N("")}function I({currentTarget:K}){const te=l.get(K.id);h(te),w(te.name),N("")}function L({target:K}){w(K.value)}function G(){R(c,m)}function ae(){const K=[];return l.forEach((te,pe)=>{K.push(u.jsx("tr",{id:pe,className:"clickable-table-row",onClick:I,children:u.jsx("td",{children:te.name})},pe))}),K}function $(){return C?"console-error-message":"hidden"}return u.jsxs("div",{className:"w3-container console",children:[u.jsx("h1",{children:"Competitors"}),c?u.jsxs("form",{className:"w3-container",action:"",method:"post",children:[u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"name-input",className:"w3-col m2",children:"Name"}),u.jsx("input",{id:"name-input",type:"text",name:"name",className:"w3-half",value:m,onChange:L})]}),u.jsx("div",{className:"w3-row",children:u.jsxs("div",{className:"w3-col m8",children:[u.jsx("button",{className:"w3-right",type:"button",onClick:G,children:"Update"}),u.jsx("button",{className:"w3-right",type:"button",onClick:O,children:"Cancel"})]})})]}):null,u.jsx("p",{className:$(),children:C}),u.jsx("div",{className:"scrollable",children:u.jsxs("table",{className:"w3-table w3-striped",children:[u.jsx("thead",{children:u.jsx("tr",{children:u.jsx("th",{children:"Competitors"})})}),u.jsx("tbody",{children:ae()})]})})]})}let Xf={timeZone:"UTC",hour:"2-digit",minute:"2-digit",second:"2-digit"};const Jf=new Intl.DateTimeFormat("en-GB",Xf);function eh({setTime:d,closeParent:r}){const[l,o]=y.useState(Jf.format(Date.now()));function c(w){const C=w.split(":"),N=Math.floor(Date.now()/864e5)*864e5,j=C[0]*36e5,P=C[1]*6e4,R=C[2]?C[2]*1e3:0;return new Date(N+j+P+R)}function h({target:w}){const C=w.value?w.value:0;o(C)}function m(w){w.preventDefault(),d(c(l)),r&&r()}return u.jsxs("form",{action:"",method:"get",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"input-time",children:"Enter time:"}),u.jsx("input",{id:"input-time",type:"time",value:l,step:"1",onChange:h})]}),u.jsxs("div",{children:[r?u.jsx("button",{type:"button",onClick:r,children:"Cancel"}):null,u.jsx("button",{type:"button",onClick:m,children:"Set Time"})]})]})}function th(){const d=y.useContext(yt),r=y.useContext(Cn),[l,o]=y.useState(Le.fleetTemplate()),[c,h]=y.useState(new Map),[m,w]=y.useState(new Map),[C,N]=y.useState(""),j=y.useRef(null),[P,R]=y.useState(!1),[O,I]=y.useState(Date.now()),L=y.useCallback(()=>{I(Date.now())},[]),G=y.useCallback(()=>{o(Le.fleetTemplate()),R(!1),j.current.focus(),N("")},[]);y.useEffect(()=>(d.registerFleetCreationCallback(L),()=>{d.unregisterFleetCreationCallback(L)}),[d,L]),y.useEffect(()=>{const X=Array.from(c.values());return X.forEach(ye=>{d.registerFleetUpdateCallback(ye.url,L)}),()=>{X.forEach(ye=>{d.unregisterFleetUpdateCallback(ye.url,L)})}},[d,c,L]),y.useEffect(()=>{let X=!1;return d.getFleets().then(ye=>{if(!X&&!ye.success)N(`Unable to load fleets
`+ye.message);else if(!X){const xe=new Map;ye.domainObject.forEach(ne=>{xe.set(ne.url,ne)}),h(xe)}}),()=>{X=!0,N("")}},[d,O]),y.useEffect(()=>{let X=!1;return d.getDinghyClasses().then(ye=>{if(!X&&!ye.success)N(`Unable to load dinghy classes
`+ye.message);else if(!X){const xe=new Map;ye.domainObject.forEach(ne=>{xe.set(ne.url,ne)}),w(xe)}}),()=>{X=!0,N("")}},[d]);async function ae(X){const ye=await r.createFleet(X);ye.success?G():N(ye.message)}async function $(X){const ye=await r.updateFleet(X);ye.success?G():N(ye.message)}function K({target:X}){o({...l,name:X.value})}function te(X){const xe=[...X.target.selectedOptions].map(ne=>m.get(ne.value));o({...l,dinghyClasses:xe})}function pe(X){X.preventDefault(),ae(l)}function de(X){X.preventDefault(),$(l)}function q(){return C?"console-error-message":"hidden"}function A(){return Array.from(c.values()).map(X=>u.jsx("tr",{onClick:re,id:X.url,children:u.jsx("td",{children:X.name})},X.url))}function re({currentTarget:X}){const ye={...c.get(X.id)};o(ye),R(!0),j.current.focus(),N("")}return u.jsxs("div",{className:"w3-container console ",children:[u.jsx("h1",{children:"Fleets"}),u.jsxs("form",{className:"w3-container",action:"",method:"post",children:[u.jsxs("div",{className:"w3-row",children:[u.jsx("label",{htmlFor:"name-input",className:"w3-col m2",children:"Fleet Name"}),u.jsx("input",{id:"name-input",ref:j,name:"name",className:"w3-half",type:"text",value:l.name,onChange:K,autoFocus:!0}),u.jsx("label",{htmlFor:"dinghy-class-select",className:"w3-left w3-col",children:"Select Dinghy Class"}),u.jsx("select",{id:"dinghy-class-select",name:"dinghy-classes",multiple:!0,className:"w3-col w3-third",onChange:te,value:l.dinghyClasses.map(X=>X.url),children:Array.from(m.values()).map(X=>u.jsx("option",{value:X.url,children:X.name},X.url))})]}),u.jsx("div",{className:"w3-row",children:u.jsxs("div",{className:"w3-col m8",children:[P?u.jsx("button",{className:"w3-right",type:"button",onClick:de,children:"Update"}):u.jsx("button",{className:"w3-right",type:"button",onClick:pe,children:"Create"}),u.jsx("button",{className:"w3-right",type:"button",onClick:G,children:"Cancel"})]})})]}),u.jsx("p",{className:q(),children:C}),u.jsx("div",{className:"scrollable",children:u.jsxs("table",{className:"w3-table w3-striped",children:[u.jsx("thead",{children:u.jsx("tr",{children:u.jsx("th",{children:"Fleet Name"})})}),u.jsx("tbody",{children:A()})]})})]})}function nh({clock:d}){const[r,l]=y.useState(d.getTime());return y.useEffect(()=>{const o=()=>{l(d.getTime())};return d.addTickHandler(o),()=>{d.removeTickHandler(o)}},[d]),u.jsx("div",{className:"time-display",children:u.jsx("output",{children:qe.formatTime(r)})})}function sh({model:d,controller:r}){const[l,o]=gt.useState(),[c,h]=gt.useState([]),[m,w]=gt.useState(!1),C=y.useRef(null),N=y.useRef(null),j=y.useRef(null),P=y.useRef(null);y.useEffect(()=>{new Wf().getRoles().then(X=>{X.toString()!==c.toString()&&h(X)})});function R(){j.current?.classList.remove("selected"),P.current?.classList.remove("selected"),N.current?.classList.remove("selected"),o(u.jsx(Uf,{},Date.now()))}function O(){j.current?.classList.remove("selected"),P.current?.classList.remove("selected"),N.current?.classList.remove("selected"),o(u.jsx(th,{},Date.now()))}function I(){j.current?.classList.remove("selected"),P.current?.classList.remove("selected"),N.current?.classList.remove("selected"),o(u.jsx(Ff,{onCreate:r.createRace},Date.now()))}function L(){j.current?.classList.remove("selected"),P.current?.classList.remove("selected"),N.current?.classList.add("selected"),o(u.jsx(Af,{showSignUpForm:G},Date.now()))}function G(re){j.current?.classList.remove("selected"),P.current?.classList.remove("selected"),N.current?.classList.remove("selected"),o(u.jsx(Mf,{race:re}))}function ae(){N.current?.classList.remove("selected"),P.current?.classList.remove("selected"),j.current?.classList.add("selected"),o(u.jsx(Yf,{},Date.now()))}function $(){j.current?.classList.remove("selected"),N.current?.classList.remove("selected"),P.current?.classList.add("selected"),o(u.jsx(Vf,{},Date.now()))}function K(){j.current?.classList.remove("selected"),P.current?.classList.remove("selected"),N.current?.classList.remove("selected"),o(u.jsx(Kf,{},Date.now()))}function te(){j.current?.classList.remove("selected"),P.current?.classList.remove("selected"),N.current?.classList.remove("selected"),o(u.jsx(Qf,{},Date.now()))}function pe(){w(!0)}function de(){w(!1)}function q(){C.current.style.display="block"}function A(){C.current.style.display="none"}return u.jsx(yt.Provider,{value:d,children:u.jsx(Cn.Provider,{value:r,children:u.jsxs(ac,{children:[u.jsxs("div",{className:"w3-row w3-display-container w3-white",children:[u.jsxs("div",{className:"w3-display-container",children:[u.jsx("img",{className:"w3-image",src:"/images/dinghy-icon.svg",alt:"Dinghy Icon"}),u.jsx("button",{className:"w3-button w3-xlarge w3-display-right",onClick:q,children:""})]}),u.jsxs("div",{ref:C,className:"w3-sidebar w3-bar-block w3-border-left",style:{display:"none",right:"0"},children:[u.jsx("button",{onClick:A,className:"w3-bar-item w3-btn",children:"Close "}),c.includes("ROLE_RACE_SCHEDULER")?u.jsx("button",{type:"button",className:"w3-bar-item w3-btn",onClick:R,children:"Dinghy Classes"},0):null,c.includes("ROLE_RACE_SCHEDULER")?u.jsx("button",{type:"button",className:"w3-bar-item w3-btn",onClick:O,children:"Fleets"},1):null,c.includes("ROLE_RACE_SCHEDULER")?u.jsx("button",{type:"button",className:"w3-bar-item w3-btn",onClick:I,children:"Create Race"},2):null,u.jsx("button",{type:"button",className:"w3-bar-item w3-btn",onClick:K,children:"Competitors"},6),c.includes("ROLE_RACE_OFFICER")?u.jsx("button",{type:"button",className:"w3-bar-item w3-btn",onClick:te,children:"Download Races"},7):null,c.includes("ROLE_RACE_OFFICER")?u.jsx("button",{type:"button",className:"w3-bar-item w3-btn",onClick:pe,children:"Synch External Clock"},8):null,u.jsx("button",{type:"button",className:"w3-bar-item w3-btn",onClick:()=>{window.location.href=window.origin+"/logout"},children:"Logout"},9)]}),u.jsxs("nav",{className:"w3-row w3-bginfosys-display-bottommiddle-m1",children:[u.jsx("button",{ref:N,type:"button",className:"w3-third bgis-min-content w3-btn w3-card",onClick:L,children:"Enrolment"},3),c.includes("ROLE_RACE_OFFICER")?u.jsx("button",{ref:j,type:"button",className:"w3-third w3-btn w3-card",onClick:ae,children:"Race Start"},4):null,c.includes("ROLE_RACE_OFFICER")?u.jsx("button",{ref:P,type:"button",className:"w3-third w3-btn w3-card",onClick:$,children:"Run Race"},5):null]})]}),u.jsx("div",{className:"w3-row",children:u.jsx("div",{className:"w3-right",children:u.jsx(nh,{clock:d.getClock()})})}),u.jsx("div",{className:"display-port",children:u.jsx(ac,{children:l},Date.now())}),u.jsx(pa,{show:m,onClose:()=>w(!1),testid:"synch-external-time-dialog",children:u.jsx(eh,{setTime:qe.synchToTime,closeParent:de})})]})})})}async function rh(d,r,l){const o=document.createElement("a");let c;try{const h=new Blob(lh(d,r,l),{type:"text/csv"});if(ah()){const w=await(await window.showSaveFilePicker({suggestedName:d.name+".csv",types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]})).createWritable();await w.write(h),await w.close(),c={success:!0}}else o.href=window.URL.createObjectURL(h),o.download=d.name+".csv",o.click(),c={success:!0}}catch(h){h.name!=="AbortError"&&(c={success:!1,message:h.message})}finally{window.URL.revokeObjectURL(o.href)}return Promise.resolve(c)}function ih(d){switch(d.type){case Se.PURSUIT:return d.fleet.dinghyClasses.length===0||d.fleet.dinghyClasses.some(r=>r.crewSize>1)?`HelmName,CrewName,SailNo,Class,Place,Code,RaceRating
`:`HelmName,SailNo,Class,Place,Code,RaceRating
`;default:return d.fleet.dinghyClasses.length===0||d.fleet.dinghyClasses.some(r=>r.crewSize>1)?`HelmName,CrewName,SailNo,Class,Place,Elapsed,Laps,Code,RaceRating,Corrected
`:`HelmName,SailNo,Class,Place,Elapsed,Laps,Code,RaceRating,Corrected
`}}function lh(d,r,l){let o=[];return o.push(ih(d)),o=o.concat(r.map(c=>{let h="";switch(l?.nameFormat){case hs.SURNAMEFIRSTNAME:h+='"'+fc(c.helm.name)+'",',(!d.dinghyClass||d.dinghyClass.crewSize>1)&&(h+=c.crew?'"'+fc(c.crew.name)+'",':",");break;default:h+=c.helm.name+",",(d.fleet.dinghyClasses.length===0||d.fleet.dinghyClasses.some(m=>m.crewSize>1))&&(h+=c.crew?c.crew.name+",":",")}return h+=c.dinghy.sailNumber+",",h+=(c.dinghy.dinghyClass.externalName==null||c.dinghy.dinghyClass.externalName===""?c.dinghy.dinghyClass.name:c.dinghy.dinghyClass.externalName)+",",h+=(c.scoringAbbreviation?"":c.position)+",",d.type!==Se.PURSUIT&&(h+=qe.formatDurationAsSeconds(c.sumOfLapTimes)+",",h+=c.laps.length+","),h+=(c.scoringAbbreviation?c.scoringAbbreviation:"")+",",d.type!==Se.PURSUIT?(h+=(c.dinghy.dinghyClass.portsmouthNumber?c.dinghy.dinghyClass.portsmouthNumber:"")+",",h+=qe.formatDurationAsSeconds(c.correctedTime)+`
`):h+=(c.dinghy.dinghyClass.portsmouthNumber?c.dinghy.dinghyClass.portsmouthNumber:"")+`
`,h})),o}function fc(d){const r=d.trim().split(" ");return r.length>1&&r.unshift(r.pop()+","),r.join(" ")}function ah(){return"showSaveFilePicker"in window&&(()=>{try{return window.self===window.top}catch{return!1}})()}class oh{model;constructor(r){if(!r)throw new Error("A dinghy racing model is required when creating an instance of DinghyRacingController");this.model=r,this.createDinghyClass=this.createDinghyClass.bind(this),this.createRace=this.createRace.bind(this),this.addLap=this.addLap.bind(this),this.postponeRace=this.postponeRace.bind(this),this.updateRacePlannedLaps=this.updateRacePlannedLaps.bind(this)}addLap(r,l){return!r||!r.url?Promise.resolve({success:!1,message:"A valid entry is required to add a lap time."}):r.finishedRace?Promise.resolve({success:!1,message:"Cannot add a lap to an entry that has finished the race."}):r.scoringAbbreviation==="DNS"?Promise.resolve({success:!1,message:"Cannot add a lap to an entry that did not start the race."}):r.scoringAbbreviation==="DSQ"?Promise.resolve({success:!1,message:"Cannot add a lap to an entry that has been disqualified from the race."}):r.scoringAbbreviation==="RET"?Promise.resolve({success:!1,message:"Cannot add a lap to an entry that has retired from the race."}):isNaN(l)?Promise.resolve({success:!1,message:"Time must be a number; in milliseconds."}):l<=0?Promise.resolve({success:!1,message:"Time must be greater than zero."}):this.model.addLap(r,this._calculateLapTime(l,r.laps))}removeLap(r,l){return!r||!r.url?Promise.resolve({success:!1,message:"A valid entry is required to remove a lap."}):l?this.model.removeLap(r,l):Promise.resolve({success:!1,message:"A lap to remove is required."})}updateLap(r,l){let o=0;if(Number.isInteger(l))o=l;else if(/^(\d+:(?=[0-5]?\d:[0-5]?\d))?([0-5]?\d:(?=[0-5]?\d))?([0-5]?\d)$/.test(l)){const c=new RegExp("^((?<=^)\\d*(?=:[0-5]?\\d:))*:?((?<=^|:)[0-5]?\\d(?=:))?:?((?<=^|:)[0-5]?\\d(?=$))$").exec(l);o+=isNaN(c[1])?0:36e5*c[1],o+=isNaN(c[2])?0:6e4*c[2],o+=isNaN(c[3])?0:1e3*c[3]}else return Promise.resolve({success:!1,message:"Time must be a number, in milliseconds, or a string value in the format [hh:][mm:]ss."});return!r||!r.url?Promise.resolve({success:!1,message:"A valid entry is required to update a lap time."}):o<=0?Promise.resolve({success:!1,message:"Time must be greater than zero."}):o>r.race.clock.getElapsedTime(r.race.plannedStartTime)?Promise.resolve({success:!1,message:"Time should be less than or equal to the elapsed time of the race."}):this.model.updateLap(r,this._calculateLapTime(o,r.laps.toSpliced(r.laps.length-1,1)))}_calculateLapTime(r,l){const o=l.reduce((c,h)=>c+h.time,0);return r-o}setScoringAbbreviation(r,l){let o=null;if(!r||!r.url)return Promise.resolve({success:!1,message:"A valid entry is required to set a scoring abbreviation."});if(l){if(l.length!==3)return Promise.resolve({success:!1,message:"Scoring abbreviation must be 3 characters long."});o=l.toUpperCase()}return this.model.update(r.url,{scoringAbbreviation:o})}createCompetitor(r){return!r||!r.name?Promise.resolve({success:!1,message:"A name is required for a new competitor."}):this.model.createCompetitor(r)}updateCompetitor(r,l){return r?l?this.model.updateCompetitor(r,l):Promise.resolve({success:!1,message:"A new name is required for the competitor."}):Promise.resolve({success:!1,message:"An exisiting competitor to update is required."})}createDinghy(r){return!r||!r.sailNumber?Promise.resolve({success:!1,message:"A sail number is required for a new dinghy."}):!r.dinghyClass||!r.dinghyClass.name?Promise.resolve({success:!1,message:"A dinghy class is required for a new dinghy."}):this.model.createDinghy(r)}createDinghyClass(r){let l=!0,o="";return(r.name==null||r.name==="")&&(l=!1,o!==""&&(o+="/n"),o+="A name is required for a new dinghy class."),typeof r.crewSize!="number"&&(l=!1,o!==""&&(o+="/n"),o+="A numeric crew size is required for a new dinghy class."),typeof r.portsmouthNumber!="number"&&(l=!1,o!==""&&(o+="/n"),o+="A numeric portsmouth number is required for a new dinghy class."),l?this.model.createDinghyClass(r):Promise.resolve({success:!1,message:o})}updateDinghyClass(r){let l=!0,o="";return r?(r?.url||(l=!1,o!==""&&(o+="/n"),o+="The url of an existing dinghy class is required to update a dinghy class."),(r?.name==null||r.name==="")&&(l=!1,o!==""&&(o+="/n"),o+="A name is required for a dinghy class."),typeof r?.crewSize!="number"&&(l=!1,o!==""&&(o+="/n"),o+="A numeric crew size is required for a dinghy class."),typeof r?.portsmouthNumber!="number"&&(l=!1,o!==""&&(o+="/n"),o+="A numeric portsmouth number is required for a new dinghy class."),l?this.model.updateDinghyClass(r):Promise.resolve({success:!1,message:o})):Promise.resolve({success:!1,message:"A dinghy class to update is required."})}async createFleet(r){return!r||!r.name?Promise.resolve({success:!1,message:"A name is required for a new fleet."}):this.model.createFleet(r)}async updateFleet(r){return!r||!r.name?Promise.resolve({success:!1,message:"A name is required for a fleet."}):this.model.updateFleet(r)}createRace(r){return r.name===void 0||r.name===null||r.name===""?Promise.resolve({success:!1,message:"A name is required for a new race."}):r.plannedStartTime instanceof Date?r.plannedLaps===void 0||r.plannedLaps===null||r.plannedLaps===""?Promise.resolve({success:!1,message:"Planned laps is required for a new race."}):this.model.createRace(r):Promise.resolve({success:!1,message:"A time is required for a new race."})}signupToRace(r,l,o,c=null){let h=!0,m="";return(!r.name||r.name===""||!r.plannedStartTime)&&(h=!1,m&&(m+="/n"),m+="Please provide details of the race."),(!l.name||l.name==="")&&(h=!1,m&&(m+="/n"),m+="Please provide details for the helm."),(!o.sailNumber||o.sailNumber===""||!o.dinghyClass||!o.dinghyClass.name||o.dinghyClass.name==="")&&(h=!1,m&&(m+="/n"),m+="Please provide details for the dinghy."),c&&(!c.name||c.name==="")&&(h=!1,m&&(m+="/n"),m+="Please provide details for the crew."),o.dinghyClass.crewSize>1&&!c&&(h=!1,m&&(m+="/n"),m+="You have selected a dinghy with a crew. Please select a crew."),h?this.model.createEntry(r,l,o,c):Promise.resolve({success:!1,message:m})}updateEntry(r,l,o,c=null){let h=!0,m="";return r.url||(h=!1,m&&(m+="/n"),m+="Please provide an existing race entry."),(!l.name||l.name==="")&&(h=!1,m&&(m+="/n"),m+="Please provide details for the helm."),(!o.sailNumber||o.sailNumber===""||!o.dinghyClass||!o.dinghyClass.name||o.dinghyClass.name==="")&&(h=!1,m&&(m+="/n"),m+="Please provide details for the dinghy."),c&&(!c.name||c.name==="")&&(h=!1,m&&(m+="/n"),m+="Please provide details for the crew."),o.dinghyClass.crewSize>1&&!c&&(h=!1,m&&(m+="/n"),m+="You have selected a dinghy with a crew. Please select a crew."),h?this.model.updateEntry(r,l,o,c):Promise.resolve({success:!1,message:m})}withdrawEntry(r){return!r||!r.url?Promise.resolve({success:!1,message:"An entry with a URL is required to withdraw from a race."}):this.model.withdrawEntry(r)}async updateEntryPosition(r,l){let o="";return r.race.url||(o+="The race URL is required to update an entry position."),r.url||(o!==""&&(o+="/n"),o+="An entry with a URL is required to update an entry position."),(!l||l<=0)&&(o!==""&&(o+="/n"),o+="A numeric new position greater than 0 is required to update an entry position."),o!==""?Promise.resolve({success:!1,message:o}):this.model.updateEntryPosition(r,l)}updateRacePlannedLaps(r,l){return!r.url&&(!r.name||r.name===""||!r.plannedStartTime)?Promise.resolve({success:!1,message:"Please provide details of the race."}):Number.isInteger(l)?this.model.updateRacePlannedLaps(r,l):Promise.resolve({success:!1,message:"Please provide an integer value for the number of laps."})}startRace(r){return!r.url&&(!r.name||r.name===""||!r.plannedStartTime)?Promise.resolve({success:!1,message:"Please provide details of the race."}):this.model.startRace(r,new Date)}async downloadRaceResults(r,l){if(!r.url&&(!r.name||r.name===""||!r.plannedStartTime))return Promise.resolve({success:!1,message:"Please provide details of the race."});const o=await this.model.getEntriesByRace(r);return o.success?rh(r,o.domainObject,l):Promise.resolve(o)}async postponeRace(r,l){if(!r.url&&(!r.name||r.name===""||!r.plannedStartTime))return Promise.resolve({success:!1,message:"Please provide details of the race."});if(r?.lapsSailed>0)return Promise.resolve({success:!1,message:"Cannot postpone start after an entry has sailed a lap."});if(!r.url){const c=await this.model.getRaceByNameAndPlannedStartTime(r.name,r.plannedStartTime);if(c.success)r.url=c.domainObject.url;else return Promise.resolve(c)}const o=new Date(r.plannedStartTime.getTime()+l);return this.model.update(r.url,{plannedStartTime:o})}}async function uh(d){return(await fetch(d,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-store"})).json()}const ch=window.location.origin+window.location.pathname+"dinghyracingproperties/connectionurls",hc=await uh(ch),dh=Nf.createRoot(document.getElementById("root")),yc=new Le(hc.httpRootURL,hc.wsRootURL),fh=new oh(yc);dh.render(u.jsx(gt.StrictMode,{children:u.jsx(sh,{model:yc,controller:fh})}));
